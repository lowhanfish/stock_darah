{"remainingRequest":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/babel-loader/lib/index.js!/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/quasar/src/components/select/QSelect.js","dependencies":[{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/quasar/src/components/select/QSelect.js","mtime":1758930416711},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/babel.config.js","mtime":1755527684372},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/cache-loader/dist/cjs.js","mtime":1758930418112},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/babel-loader/lib/index.js","mtime":1758930419036}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFFGaWVsZCBmcm9tICcuLi9maWVsZC9RRmllbGQuanMnOwppbXBvcnQgUUljb24gZnJvbSAnLi4vaWNvbi9RSWNvbi5qcyc7CmltcG9ydCBRQ2hpcCBmcm9tICcuLi9jaGlwL1FDaGlwLmpzJzsKaW1wb3J0IFFJdGVtIGZyb20gJy4uL2l0ZW0vUUl0ZW0uanMnOwppbXBvcnQgUUl0ZW1TZWN0aW9uIGZyb20gJy4uL2l0ZW0vUUl0ZW1TZWN0aW9uLmpzJzsKaW1wb3J0IFFJdGVtTGFiZWwgZnJvbSAnLi4vaXRlbS9RSXRlbUxhYmVsLmpzJzsKaW1wb3J0IFFNZW51IGZyb20gJy4uL21lbnUvUU1lbnUuanMnOwppbXBvcnQgUURpYWxvZyBmcm9tICcuLi9kaWFsb2cvUURpYWxvZy5qcyc7CmltcG9ydCB7IGlzRGVlcEVxdWFsIH0gZnJvbSAnLi4vLi4vdXRpbHMvaXMuanMnOwppbXBvcnQgeyBzdG9wLCBwcmV2ZW50LCBzdG9wQW5kUHJldmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL2V2ZW50LmpzJzsKaW1wb3J0IHsgbm9ybWFsaXplVG9JbnRlcnZhbCB9IGZyb20gJy4uLy4uL3V0aWxzL2Zvcm1hdC5qcyc7CmltcG9ydCB7IHNob3VsZElnbm9yZUtleSwgaXNLZXlDb2RlIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9rZXktY29tcG9zaXRpb24uanMnOwppbXBvcnQgeyBtZXJnZVNsb3QgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL3Nsb3QuanMnOwppbXBvcnQgY2FjaGUgZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9jYWNoZS5qcyc7CmltcG9ydCB7IEZvcm1GaWVsZE1peGluIH0gZnJvbSAnLi4vLi4vbWl4aW5zL2Zvcm0uanMnOwppbXBvcnQgVmlydHVhbFNjcm9sbCBmcm9tICcuLi8uLi9taXhpbnMvdmlydHVhbC1zY3JvbGwuanMnOwppbXBvcnQgQ29tcG9zaXRpb25NaXhpbiBmcm9tICcuLi8uLi9taXhpbnMvY29tcG9zaXRpb24uanMnOwppbXBvcnQgTGlzdGVuZXJzTWl4aW4gZnJvbSAnLi4vLi4vbWl4aW5zL2xpc3RlbmVycy5qcyc7CmNvbnN0IHZhbGlkYXRlTmV3VmFsdWVNb2RlID0gdiA9PiBbJ2FkZCcsICdhZGQtdW5pcXVlJywgJ3RvZ2dsZSddLmluY2x1ZGVzKHYpOwpjb25zdCByZUVzY2FwZUxpc3QgPSAnLiorP14ke30oKXxbXVxcJzsKZXhwb3J0IGRlZmF1bHQgVnVlLmV4dGVuZCh7CiAgbmFtZTogJ1FTZWxlY3QnLAogIG1peGluczogW1FGaWVsZCwgVmlydHVhbFNjcm9sbCwgQ29tcG9zaXRpb25NaXhpbiwgRm9ybUZpZWxkTWl4aW4sIExpc3RlbmVyc01peGluXSwKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBtdWx0aXBsZTogQm9vbGVhbiwKICAgIGRpc3BsYXlWYWx1ZTogW1N0cmluZywgTnVtYmVyXSwKICAgIGRpc3BsYXlWYWx1ZVNhbml0aXplOiBCb29sZWFuLAogICAgZHJvcGRvd25JY29uOiBTdHJpbmcsCiAgICBvcHRpb25zOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiBbXQogICAgfSwKICAgIG9wdGlvblZhbHVlOiBbRnVuY3Rpb24sIFN0cmluZ10sCiAgICBvcHRpb25MYWJlbDogW0Z1bmN0aW9uLCBTdHJpbmddLAogICAgb3B0aW9uRGlzYWJsZTogW0Z1bmN0aW9uLCBTdHJpbmddLAogICAgaGlkZVNlbGVjdGVkOiBCb29sZWFuLAogICAgaGlkZURyb3Bkb3duSWNvbjogQm9vbGVhbiwKICAgIGZpbGxJbnB1dDogQm9vbGVhbiwKICAgIG1heFZhbHVlczogW051bWJlciwgU3RyaW5nXSwKICAgIG9wdGlvbnNEZW5zZTogQm9vbGVhbiwKICAgIG9wdGlvbnNEYXJrOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBvcHRpb25zU2VsZWN0ZWRDbGFzczogU3RyaW5nLAogICAgb3B0aW9uc1Nhbml0aXplOiBCb29sZWFuLAogICAgb3B0aW9uc0NvdmVyOiBCb29sZWFuLAogICAgbWVudVNocmluazogQm9vbGVhbiwKICAgIG1lbnVBbmNob3I6IFN0cmluZywKICAgIG1lbnVTZWxmOiBTdHJpbmcsCiAgICBtZW51T2Zmc2V0OiBBcnJheSwKICAgIHBvcHVwQ29udGVudENsYXNzOiBTdHJpbmcsCiAgICBwb3B1cENvbnRlbnRTdHlsZTogW1N0cmluZywgQXJyYXksIE9iamVjdF0sCiAgICB1c2VJbnB1dDogQm9vbGVhbiwKICAgIHVzZUNoaXBzOiBCb29sZWFuLAogICAgbmV3VmFsdWVNb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZU5ld1ZhbHVlTW9kZQogICAgfSwKICAgIG1hcE9wdGlvbnM6IEJvb2xlYW4sCiAgICBlbWl0VmFsdWU6IEJvb2xlYW4sCiAgICBpbnB1dERlYm91bmNlOiB7CiAgICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZ10sCiAgICAgIGRlZmF1bHQ6IDUwMAogICAgfSwKICAgIGlucHV0Q2xhc3M6IFtBcnJheSwgU3RyaW5nLCBPYmplY3RdLAogICAgaW5wdXRTdHlsZTogW0FycmF5LCBTdHJpbmcsIE9iamVjdF0sCiAgICB0YWJpbmRleDogewogICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXJdLAogICAgICBkZWZhdWx0OiAwCiAgICB9LAogICAgYXV0b2NvbXBsZXRlOiBTdHJpbmcsCiAgICB0cmFuc2l0aW9uU2hvdzogU3RyaW5nLAogICAgdHJhbnNpdGlvbkhpZGU6IFN0cmluZywKICAgIGJlaGF2aW9yOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgdmFsaWRhdG9yOiB2ID0+IFsnZGVmYXVsdCcsICdtZW51JywgJ2RpYWxvZyddLmluY2x1ZGVzKHYpLAogICAgICBkZWZhdWx0OiAnZGVmYXVsdCcKICAgIH0sCiAgICB2aXJ0dWFsU2Nyb2xsSXRlbVNpemU6IHsKICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXSwKICAgICAgZGVmYXVsdDogdm9pZCAwCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbWVudTogZmFsc2UsCiAgICAgIGRpYWxvZzogZmFsc2UsCiAgICAgIG9wdGlvbkluZGV4OiAtMSwKICAgICAgaW5wdXRWYWx1ZTogJycsCiAgICAgIGRpYWxvZ0ZpZWxkRm9jdXNlZDogZmFsc2UKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgaW5uZXJWYWx1ZTogewogICAgICBoYW5kbGVyKHZhbCkgewogICAgICAgIHRoaXMuaW5uZXJWYWx1ZUNhY2hlID0gdmFsOwogICAgICAgIGlmICh0aGlzLnVzZUlucHV0ID09PSB0cnVlICYmIHRoaXMuZmlsbElucHV0ID09PSB0cnVlICYmIHRoaXMubXVsdGlwbGUgIT09IHRydWUgJiYKICAgICAgICAvLyBQcmV2ZW50IHJlLWVudGVyaW5nIGluIGZpbHRlciB3aGlsZSBmaWx0ZXJpbmcKICAgICAgICAvLyBBbHNvIHByZXZlbnQgY2xlYXJpbmcgaW5wdXRWYWx1ZSB3aGlsZSBmaWx0ZXJpbmcKICAgICAgICB0aGlzLmlubmVyTG9hZGluZyAhPT0gdHJ1ZSAmJiAodGhpcy5kaWFsb2cgIT09IHRydWUgJiYgdGhpcy5tZW51ICE9PSB0cnVlIHx8IHRoaXMuaGFzVmFsdWUgIT09IHRydWUpKSB7CiAgICAgICAgICB0aGlzLnVzZXJJbnB1dFZhbHVlICE9PSB0cnVlICYmIHRoaXMuX19yZXNldElucHV0VmFsdWUoKTsKICAgICAgICAgIGlmICh0aGlzLmRpYWxvZyA9PT0gdHJ1ZSB8fCB0aGlzLm1lbnUgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5maWx0ZXIoJycpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9LAogICAgZmlsbElucHV0KCkgewogICAgICB0aGlzLl9fcmVzZXRJbnB1dFZhbHVlKCk7CiAgICB9LAogICAgbWVudShzaG93KSB7CiAgICAgIHRoaXMuX191cGRhdGVNZW51KHNob3cpOwogICAgfSwKICAgIHZpcnR1YWxTY3JvbGxMZW5ndGgobmV3TGVuZ3RoLCBvbGRMZW5ndGgpIHsKICAgICAgaWYgKHRoaXMubWVudSA9PT0gdHJ1ZSAmJiB0aGlzLmlubmVyTG9hZGluZyA9PT0gZmFsc2UpIHsKICAgICAgICB0aGlzLl9fcmVzZXRWaXJ0dWFsU2Nyb2xsKC0xLCB0cnVlKTsKICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICBpZiAodGhpcy5tZW51ID09PSB0cnVlICYmIHRoaXMuaW5uZXJMb2FkaW5nID09PSBmYWxzZSkgewogICAgICAgICAgICBpZiAobmV3TGVuZ3RoID4gb2xkTGVuZ3RoKSB7CiAgICAgICAgICAgICAgdGhpcy5fX3Jlc2V0VmlydHVhbFNjcm9sbCgpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuX191cGRhdGVNZW51KHRydWUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBpc09wdGlvbnNEYXJrKCkgewogICAgICByZXR1cm4gdGhpcy5vcHRpb25zRGFyayA9PT0gbnVsbCA/IHRoaXMuaXNEYXJrIDogdGhpcy5vcHRpb25zRGFyazsKICAgIH0sCiAgICB2aXJ0dWFsU2Nyb2xsTGVuZ3RoKCkgewogICAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh0aGlzLm9wdGlvbnMpID8gdGhpcy5vcHRpb25zLmxlbmd0aCA6IDA7CiAgICB9LAogICAgZmllbGRDbGFzcygpIHsKICAgICAgcmV0dXJuIGBxLXNlbGVjdCBxLWZpZWxkLS1hdXRvLWhlaWdodCBxLXNlbGVjdC0td2l0aCR7dGhpcy51c2VJbnB1dCAhPT0gdHJ1ZSA/ICdvdXQnIDogJyd9LWlucHV0YCArIGAgcS1zZWxlY3QtLXdpdGgke3RoaXMudXNlQ2hpcHMgIT09IHRydWUgPyAnb3V0JyA6ICcnfS1jaGlwc2AgKyBgIHEtc2VsZWN0LS0ke3RoaXMubXVsdGlwbGUgPT09IHRydWUgPyAnbXVsdGlwbGUnIDogJ3NpbmdsZSd9YDsKICAgIH0sCiAgICBjb21wdXRlZElucHV0Q2xhc3MoKSB7CiAgICAgIGlmICh0aGlzLmhpZGVTZWxlY3RlZCA9PT0gdHJ1ZSB8fCB0aGlzLmlubmVyVmFsdWUubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXRDbGFzczsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5pbnB1dENsYXNzID09PSB2b2lkIDAgPyAncS1maWVsZF9faW5wdXQtLXBhZGRpbmcnIDogW3RoaXMuaW5wdXRDbGFzcywgJ3EtZmllbGRfX2lucHV0LS1wYWRkaW5nJ107CiAgICB9LAogICAgbWVudUNvbnRlbnRDbGFzcygpIHsKICAgICAgcmV0dXJuICh0aGlzLnZpcnR1YWxTY3JvbGxIb3Jpem9udGFsID09PSB0cnVlID8gJ3EtdmlydHVhbC1zY3JvbGwtLWhvcml6b250YWwnIDogJycpICsgKHRoaXMucG9wdXBDb250ZW50Q2xhc3MgPyAnICcgKyB0aGlzLnBvcHVwQ29udGVudENsYXNzIDogJycpOwogICAgfSwKICAgIGlubmVyVmFsdWUoKSB7CiAgICAgIGNvbnN0IG1hcE51bGwgPSB0aGlzLm1hcE9wdGlvbnMgPT09IHRydWUgJiYgdGhpcy5tdWx0aXBsZSAhPT0gdHJ1ZSwKICAgICAgICB2YWwgPSB0aGlzLnZhbHVlICE9PSB2b2lkIDAgJiYgKHRoaXMudmFsdWUgIT09IG51bGwgfHwgbWFwTnVsbCA9PT0gdHJ1ZSkgPyB0aGlzLm11bHRpcGxlID09PSB0cnVlICYmIEFycmF5LmlzQXJyYXkodGhpcy52YWx1ZSkgPyB0aGlzLnZhbHVlIDogW3RoaXMudmFsdWVdIDogW107CiAgICAgIGlmICh0aGlzLm1hcE9wdGlvbnMgPT09IHRydWUgJiYgQXJyYXkuaXNBcnJheSh0aGlzLm9wdGlvbnMpID09PSB0cnVlKSB7CiAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLm1hcE9wdGlvbnMgPT09IHRydWUgJiYgdGhpcy5pbm5lclZhbHVlQ2FjaGUgIT09IHZvaWQgMCA/IHRoaXMuaW5uZXJWYWx1ZUNhY2hlIDogW107CiAgICAgICAgY29uc3QgdmFsdWVzID0gdmFsLm1hcCh2ID0+IHRoaXMuX19nZXRPcHRpb24odiwgY2FjaGUpKTsKICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSA9PT0gbnVsbCAmJiBtYXBOdWxsID09PSB0cnVlID8gdmFsdWVzLmZpbHRlcih2ID0+IHYgIT09IG51bGwpIDogdmFsdWVzOwogICAgICB9CiAgICAgIHJldHVybiB2YWw7CiAgICB9LAogICAgbm9PcHRpb25zKCkgewogICAgICByZXR1cm4gdGhpcy52aXJ0dWFsU2Nyb2xsTGVuZ3RoID09PSAwOwogICAgfSwKICAgIHNlbGVjdGVkU3RyaW5nKCkgewogICAgICByZXR1cm4gdGhpcy5pbm5lclZhbHVlLm1hcChvcHQgPT4gdGhpcy5nZXRPcHRpb25MYWJlbChvcHQpKS5qb2luKCcsICcpOwogICAgfSwKICAgIGFyaWFDdXJyZW50VmFsdWUoKSB7CiAgICAgIHJldHVybiB0aGlzLmRpc3BsYXlWYWx1ZSAhPT0gdm9pZCAwID8gdGhpcy5kaXNwbGF5VmFsdWUgOiB0aGlzLnNlbGVjdGVkU3RyaW5nOwogICAgfSwKICAgIHNhbml0aXplRm4oKSB7CiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNTYW5pdGl6ZSA9PT0gdHJ1ZSA/ICgpID0+IHRydWUgOiBvcHQgPT4gb3B0ICE9PSB2b2lkIDAgJiYgb3B0ICE9PSBudWxsICYmIG9wdC5zYW5pdGl6ZSA9PT0gdHJ1ZTsKICAgIH0sCiAgICBkaXNwbGF5QXNUZXh0KCkgewogICAgICByZXR1cm4gdGhpcy5kaXNwbGF5VmFsdWVTYW5pdGl6ZSA9PT0gdHJ1ZSB8fCB0aGlzLmRpc3BsYXlWYWx1ZSA9PT0gdm9pZCAwICYmICh0aGlzLm9wdGlvbnNTYW5pdGl6ZSA9PT0gdHJ1ZSB8fCB0aGlzLmlubmVyVmFsdWUuc29tZSh0aGlzLnNhbml0aXplRm4pKTsKICAgIH0sCiAgICBjb21wdXRlZFRhYmluZGV4KCkgewogICAgICByZXR1cm4gdGhpcy5mb2N1c2VkID09PSB0cnVlID8gdGhpcy50YWJpbmRleCA6IC0xOwogICAgfSwKICAgIHNlbGVjdGVkU2NvcGUoKSB7CiAgICAgIHJldHVybiB0aGlzLmlubmVyVmFsdWUubWFwKChvcHQsIGkpID0+ICh7CiAgICAgICAgaW5kZXg6IGksCiAgICAgICAgb3B0LAogICAgICAgIHNhbml0aXplOiB0aGlzLnNhbml0aXplRm4ob3B0KSwKICAgICAgICBzZWxlY3RlZDogdHJ1ZSwKICAgICAgICByZW1vdmVBdEluZGV4OiB0aGlzLl9fcmVtb3ZlQXRJbmRleEFuZEZvY3VzLAogICAgICAgIHRvZ2dsZU9wdGlvbjogdGhpcy50b2dnbGVPcHRpb24sCiAgICAgICAgdGFiaW5kZXg6IHRoaXMuY29tcHV0ZWRUYWJpbmRleAogICAgICB9KSk7CiAgICB9LAogICAgb3B0aW9uU2NvcGUoKSB7CiAgICAgIGlmICh0aGlzLnZpcnR1YWxTY3JvbGxMZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgICAgY29uc3QgewogICAgICAgIGZyb20sCiAgICAgICAgdG8KICAgICAgfSA9IHRoaXMudmlydHVhbFNjcm9sbFNsaWNlUmFuZ2U7CiAgICAgIGNvbnN0IHsKICAgICAgICBvcHRpb25zLAogICAgICAgIG9wdGlvbkVscwogICAgICB9ID0gdGhpcy5fX29wdGlvblNjb3BlQ2FjaGU7CiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuc2xpY2UoZnJvbSwgdG8pLm1hcCgob3B0LCBpKSA9PiB7CiAgICAgICAgY29uc3QgZGlzYWJsZSA9IHRoaXMuaXNPcHRpb25EaXNhYmxlZChvcHQpOwogICAgICAgIGNvbnN0IGluZGV4ID0gZnJvbSArIGk7CiAgICAgICAgY29uc3QgaXRlbVByb3BzID0gewogICAgICAgICAgY2xpY2thYmxlOiB0cnVlLAogICAgICAgICAgYWN0aXZlOiBmYWxzZSwKICAgICAgICAgIGFjdGl2ZUNsYXNzOiB0aGlzLmNvbXB1dGVkT3B0aW9uc1NlbGVjdGVkQ2xhc3MsCiAgICAgICAgICBtYW51YWxGb2N1czogdHJ1ZSwKICAgICAgICAgIGZvY3VzZWQ6IGZhbHNlLAogICAgICAgICAgZGlzYWJsZSwKICAgICAgICAgIHRhYmluZGV4OiAtMSwKICAgICAgICAgIGRlbnNlOiB0aGlzLm9wdGlvbnNEZW5zZSwKICAgICAgICAgIGRhcms6IHRoaXMuaXNPcHRpb25zRGFyawogICAgICAgIH07CiAgICAgICAgY29uc3QgaXRlbUF0dHJzID0gewogICAgICAgICAgcm9sZTogJ29wdGlvbicsCiAgICAgICAgICBpZDogYCR7dGhpcy50YXJnZXRVaWR9XyR7aW5kZXh9YAogICAgICAgIH07CiAgICAgICAgaWYgKGRpc2FibGUgIT09IHRydWUpIHsKICAgICAgICAgIHRoaXMuaXNPcHRpb25TZWxlY3RlZChvcHQpID09PSB0cnVlICYmIChpdGVtUHJvcHMuYWN0aXZlID0gdHJ1ZSk7CiAgICAgICAgICBpdGVtQXR0cnNbJ2FyaWEtc2VsZWN0ZWQnXSA9IGl0ZW1Qcm9wcy5hY3RpdmUgPT09IHRydWUgPyAndHJ1ZScgOiAnZmFsc2UnOwogICAgICAgICAgdGhpcy5vcHRpb25JbmRleCA9PT0gaW5kZXggJiYgKGl0ZW1Qcm9wcy5mb2N1c2VkID0gdHJ1ZSk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IGl0ZW1FdmVudHMgPSB7CiAgICAgICAgICBjbGljazogKCkgPT4gewogICAgICAgICAgICB0aGlzLnRvZ2dsZU9wdGlvbihvcHQpOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgaWYgKHRoaXMuJHEucGxhdGZvcm0uaXMuZGVza3RvcCA9PT0gdHJ1ZSkgewogICAgICAgICAgaXRlbUV2ZW50cy5tb3VzZW1vdmUgPSAoKSA9PiB7CiAgICAgICAgICAgIHRoaXMubWVudSA9PT0gdHJ1ZSAmJiB0aGlzLnNldE9wdGlvbkluZGV4KGluZGV4KTsKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIGNvbnN0IG9wdGlvbiA9IHsKICAgICAgICAgIGluZGV4LAogICAgICAgICAgb3B0LAogICAgICAgICAgc2FuaXRpemU6IHRoaXMuc2FuaXRpemVGbihvcHQpLAogICAgICAgICAgc2VsZWN0ZWQ6IGl0ZW1Qcm9wcy5hY3RpdmUsCiAgICAgICAgICBmb2N1c2VkOiBpdGVtUHJvcHMuZm9jdXNlZCwKICAgICAgICAgIHRvZ2dsZU9wdGlvbjogdGhpcy50b2dnbGVPcHRpb24sCiAgICAgICAgICBzZXRPcHRpb25JbmRleDogdGhpcy5zZXRPcHRpb25JbmRleCwKICAgICAgICAgIGl0ZW1Qcm9wcywKICAgICAgICAgIGl0ZW1BdHRycwogICAgICAgIH07CiAgICAgICAgaWYgKG9wdGlvbnNbaV0gPT09IHZvaWQgMCB8fCBpc0RlZXBFcXVhbChvcHRpb24sIG9wdGlvbnNbaV0pICE9PSB0cnVlKSB7CiAgICAgICAgICBvcHRpb25zW2ldID0gb3B0aW9uOwogICAgICAgICAgb3B0aW9uRWxzW2ldID0gdm9pZCAwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4ub3B0aW9uLAogICAgICAgICAgaXRlbUV2ZW50cwogICAgICAgIH07CiAgICAgIH0pOwogICAgfSwKICAgIGRyb3Bkb3duQXJyb3dJY29uKCkgewogICAgICByZXR1cm4gdGhpcy5kcm9wZG93bkljb24gIT09IHZvaWQgMCA/IHRoaXMuZHJvcGRvd25JY29uIDogdGhpcy4kcS5pY29uU2V0LmFycm93LmRyb3Bkb3duOwogICAgfSwKICAgIHNxdWFyZWRNZW51KCkgewogICAgICByZXR1cm4gdGhpcy5vcHRpb25zQ292ZXIgPT09IGZhbHNlICYmIHRoaXMub3V0bGluZWQgIT09IHRydWUgJiYgdGhpcy5zdGFuZG91dCAhPT0gdHJ1ZSAmJiB0aGlzLmJvcmRlcmxlc3MgIT09IHRydWUgJiYgdGhpcy5yb3VuZGVkICE9PSB0cnVlOwogICAgfSwKICAgIGNvbXB1dGVkT3B0aW9uc1NlbGVjdGVkQ2xhc3MoKSB7CiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNTZWxlY3RlZENsYXNzICE9PSB2b2lkIDAgPyB0aGlzLm9wdGlvbnNTZWxlY3RlZENsYXNzIDogdGhpcy5jb2xvciAhPT0gdm9pZCAwID8gYHRleHQtJHt0aGlzLmNvbG9yfWAgOiAnJzsKICAgIH0sCiAgICBpbm5lck9wdGlvbnNWYWx1ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaW5uZXJWYWx1ZS5tYXAob3B0ID0+IHRoaXMuZ2V0T3B0aW9uVmFsdWUob3B0KSk7CiAgICB9LAogICAgLy8gcmV0dXJucyBtZXRob2QgdG8gZ2V0IHZhbHVlIG9mIGFuIG9wdGlvbjsKICAgIC8vIHRha2VzIGludG8gYWNjb3VudCAnb3B0aW9uLXZhbHVlJyBwcm9wCiAgICBnZXRPcHRpb25WYWx1ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX19nZXRQcm9wVmFsdWVGbignb3B0aW9uVmFsdWUnLCAndmFsdWUnKTsKICAgIH0sCiAgICAvLyByZXR1cm5zIG1ldGhvZCB0byBnZXQgbGFiZWwgb2YgYW4gb3B0aW9uOwogICAgLy8gdGFrZXMgaW50byBhY2NvdW50ICdvcHRpb24tbGFiZWwnIHByb3AKICAgIGdldE9wdGlvbkxhYmVsKCkgewogICAgICByZXR1cm4gdGhpcy5fX2dldFByb3BWYWx1ZUZuKCdvcHRpb25MYWJlbCcsICdsYWJlbCcpOwogICAgfSwKICAgIC8vIHJldHVybnMgbWV0aG9kIHRvIHRlbGwgaWYgYW4gb3B0aW9uIGlzIGRpc2FibGVkOwogICAgLy8gdGFrZXMgaW50byBhY2NvdW50ICdvcHRpb24tZGlzYWJsZScgcHJvcAogICAgaXNPcHRpb25EaXNhYmxlZCgpIHsKICAgICAgY29uc3QgZm4gPSB0aGlzLl9fZ2V0UHJvcFZhbHVlRm4oJ29wdGlvbkRpc2FibGUnLCAnZGlzYWJsZScpOwogICAgICByZXR1cm4gKC4uLmFyZ3MpID0+IGZuLmFwcGx5KG51bGwsIGFyZ3MpID09PSB0cnVlOwogICAgfSwKICAgIGlucHV0Q29udHJvbEV2ZW50cygpIHsKICAgICAgY29uc3Qgb24gPSB7CiAgICAgICAgaW5wdXQ6IHRoaXMuX19vbklucHV0LAogICAgICAgIC8vIFNhZmFyaSA8IDEwLjIgJiBVSVdlYlZpZXcgZG9lc24ndCBmaXJlIGNvbXBvc2l0aW9uZW5kIHdoZW4KICAgICAgICAvLyBzd2l0Y2hpbmcgZm9jdXMgYmVmb3JlIGNvbmZpcm1pbmcgY29tcG9zaXRpb24gY2hvaWNlCiAgICAgICAgLy8gdGhpcyBhbHNvIGZpeGVzIHRoZSBpc3N1ZSB3aGVyZSBzb21lIGJyb3dzZXJzIGUuZy4gaU9TIENocm9tZQogICAgICAgIC8vIGZpcmVzICJjaGFuZ2UiIGluc3RlYWQgb2YgImlucHV0IiBvbiBhdXRvY29tcGxldGUuCiAgICAgICAgY2hhbmdlOiB0aGlzLl9fb25DaGFuZ2UsCiAgICAgICAga2V5ZG93bjogdGhpcy5fX29uVGFyZ2V0S2V5ZG93biwKICAgICAgICBrZXl1cDogdGhpcy5fX29uVGFyZ2V0QXV0b2NvbXBsZXRlLAogICAgICAgIGtleXByZXNzOiB0aGlzLl9fb25UYXJnZXRLZXlwcmVzcywKICAgICAgICBmb2N1czogdGhpcy5fX3NlbGVjdElucHV0VGV4dCwKICAgICAgICBjbGljazogZSA9PiB7CiAgICAgICAgICB0aGlzLmhhc0RpYWxvZyA9PT0gdHJ1ZSAmJiBzdG9wKGUpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgb24uY29tcG9zaXRpb25zdGFydCA9IG9uLmNvbXBvc2l0aW9udXBkYXRlID0gb24uY29tcG9zaXRpb25lbmQgPSB0aGlzLl9fb25Db21wb3NpdGlvbjsKICAgICAgcmV0dXJuIG9uOwogICAgfSwKICAgIHZpcnR1YWxTY3JvbGxJdGVtU2l6ZUNvbXB1dGVkKCkgewogICAgICByZXR1cm4gdGhpcy52aXJ0dWFsU2Nyb2xsSXRlbVNpemUgPT09IHZvaWQgMCA/IHRoaXMub3B0aW9uc0RlbnNlID09PSB0cnVlID8gMjQgOiA0OCA6IHRoaXMudmlydHVhbFNjcm9sbEl0ZW1TaXplOwogICAgfSwKICAgIGNvbWJvYm94QXR0cnMoKSB7CiAgICAgIGNvbnN0IGF0dHJzID0gewogICAgICAgIHRhYmluZGV4OiB0aGlzLnRhYmluZGV4LAogICAgICAgIHJvbGU6ICdjb21ib2JveCcsCiAgICAgICAgJ2FyaWEtbGFiZWwnOiB0aGlzLmxhYmVsLAogICAgICAgICdhcmlhLXJlYWRvbmx5JzogdGhpcy5yZWFkb25seSA9PT0gdHJ1ZSA/ICd0cnVlJyA6ICdmYWxzZScsCiAgICAgICAgJ2FyaWEtYXV0b2NvbXBsZXRlJzogdGhpcy51c2VJbnB1dCA9PT0gdHJ1ZSA/ICdsaXN0JyA6ICdub25lJywKICAgICAgICAnYXJpYS1leHBhbmRlZCc6IHRoaXMubWVudSA9PT0gdHJ1ZSA/ICd0cnVlJyA6ICdmYWxzZScsCiAgICAgICAgJ2FyaWEtY29udHJvbHMnOiBgJHt0aGlzLnRhcmdldFVpZH1fbGJgCiAgICAgIH07CiAgICAgIGlmICh0aGlzLm9wdGlvbkluZGV4ID49IDApIHsKICAgICAgICBhdHRyc1snYXJpYS1hY3RpdmVkZXNjZW5kYW50J10gPSBgJHt0aGlzLnRhcmdldFVpZH1fJHt0aGlzLm9wdGlvbkluZGV4fWA7CiAgICAgIH0KICAgICAgcmV0dXJuIGF0dHJzOwogICAgfSwKICAgIGxpc3Rib3hBdHRycygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBpZDogYCR7dGhpcy50YXJnZXRVaWR9X2xiYCwKICAgICAgICByb2xlOiAnbGlzdGJveCcsCiAgICAgICAgJ2FyaWEtbXVsdGlzZWxlY3RhYmxlJzogdGhpcy5tdWx0aXBsZSA9PT0gdHJ1ZSA/ICd0cnVlJyA6ICdmYWxzZScKICAgICAgfTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEVtaXR0aW5nT3B0aW9uVmFsdWUob3B0KSB7CiAgICAgIHJldHVybiB0aGlzLmVtaXRWYWx1ZSA9PT0gdHJ1ZSA/IHRoaXMuZ2V0T3B0aW9uVmFsdWUob3B0KSA6IG9wdDsKICAgIH0sCiAgICByZW1vdmVBdEluZGV4KGluZGV4KSB7CiAgICAgIGlmIChpbmRleCA+IC0xICYmIGluZGV4IDwgdGhpcy5pbm5lclZhbHVlLmxlbmd0aCkgewogICAgICAgIGlmICh0aGlzLm11bHRpcGxlID09PSB0cnVlKSB7CiAgICAgICAgICBjb25zdCBtb2RlbCA9IHRoaXMudmFsdWUuc2xpY2UoKTsKICAgICAgICAgIHRoaXMuJGVtaXQoJ3JlbW92ZScsIHsKICAgICAgICAgICAgaW5kZXgsCiAgICAgICAgICAgIHZhbHVlOiBtb2RlbC5zcGxpY2UoaW5kZXgsIDEpWzBdCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgbW9kZWwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIG51bGwpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIF9fcmVtb3ZlQXRJbmRleEFuZEZvY3VzKGluZGV4KSB7CiAgICAgIHRoaXMucmVtb3ZlQXRJbmRleChpbmRleCk7CiAgICAgIHRoaXMuX19mb2N1cygpOwogICAgfSwKICAgIGFkZChvcHQsIHVuaXF1ZSkgewogICAgICBjb25zdCB2YWwgPSB0aGlzLmdldEVtaXR0aW5nT3B0aW9uVmFsdWUob3B0KTsKICAgICAgaWYgKHRoaXMubXVsdGlwbGUgIT09IHRydWUpIHsKICAgICAgICB0aGlzLmZpbGxJbnB1dCA9PT0gdHJ1ZSAmJiB0aGlzLnVwZGF0ZUlucHV0VmFsdWUodGhpcy5nZXRPcHRpb25MYWJlbChvcHQpLCB0cnVlLCB0cnVlKTsKICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHZhbCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0aGlzLmlubmVyVmFsdWUubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy4kZW1pdCgnYWRkJywgewogICAgICAgICAgaW5kZXg6IDAsCiAgICAgICAgICB2YWx1ZTogdmFsCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB0aGlzLm11bHRpcGxlID09PSB0cnVlID8gW3ZhbF0gOiB2YWwpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodW5pcXVlID09PSB0cnVlICYmIHRoaXMuaXNPcHRpb25TZWxlY3RlZChvcHQpID09PSB0cnVlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0aGlzLm1heFZhbHVlcyAhPT0gdm9pZCAwICYmIHRoaXMudmFsdWUubGVuZ3RoID49IHRoaXMubWF4VmFsdWVzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IG1vZGVsID0gdGhpcy52YWx1ZS5zbGljZSgpOwogICAgICB0aGlzLiRlbWl0KCdhZGQnLCB7CiAgICAgICAgaW5kZXg6IG1vZGVsLmxlbmd0aCwKICAgICAgICB2YWx1ZTogdmFsCiAgICAgIH0pOwogICAgICBtb2RlbC5wdXNoKHZhbCk7CiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgbW9kZWwpOwogICAgfSwKICAgIHRvZ2dsZU9wdGlvbihvcHQsIGtlZXBPcGVuKSB7CiAgICAgIGlmICh0aGlzLmVkaXRhYmxlICE9PSB0cnVlIHx8IG9wdCA9PT0gdm9pZCAwIHx8IHRoaXMuaXNPcHRpb25EaXNhYmxlZChvcHQpID09PSB0cnVlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IG9wdFZhbHVlID0gdGhpcy5nZXRPcHRpb25WYWx1ZShvcHQpOwogICAgICBpZiAodGhpcy5tdWx0aXBsZSAhPT0gdHJ1ZSkgewogICAgICAgIGlmIChrZWVwT3BlbiAhPT0gdHJ1ZSkgewogICAgICAgICAgdGhpcy51cGRhdGVJbnB1dFZhbHVlKHRoaXMuZmlsbElucHV0ID09PSB0cnVlID8gdGhpcy5nZXRPcHRpb25MYWJlbChvcHQpIDogJycsIHRydWUsIHRydWUpOwogICAgICAgICAgdGhpcy5kaWFsb2dGaWVsZEZvY3VzZWQgPSBmYWxzZTsKICAgICAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpOwogICAgICAgICAgdGhpcy5oaWRlUG9wdXAoKTsKICAgICAgICB9CiAgICAgICAgdGhpcy4kcmVmcy50YXJnZXQgIT09IHZvaWQgMCAmJiB0aGlzLiRyZWZzLnRhcmdldC5mb2N1cygpOwogICAgICAgIGlmICh0aGlzLmlubmVyVmFsdWUubGVuZ3RoID09PSAwIHx8IGlzRGVlcEVxdWFsKHRoaXMuZ2V0T3B0aW9uVmFsdWUodGhpcy5pbm5lclZhbHVlWzBdKSwgb3B0VmFsdWUpICE9PSB0cnVlKSB7CiAgICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHRoaXMuZW1pdFZhbHVlID09PSB0cnVlID8gb3B0VmFsdWUgOiBvcHQpOwogICAgICAgIH0KICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgKHRoaXMuaGFzRGlhbG9nICE9PSB0cnVlIHx8IHRoaXMuZGlhbG9nRmllbGRGb2N1c2VkID09PSB0cnVlKSAmJiB0aGlzLl9fZm9jdXMoKTsKICAgICAgdGhpcy5fX3NlbGVjdElucHV0VGV4dCgpOwogICAgICBpZiAodGhpcy5pbm5lclZhbHVlLmxlbmd0aCA9PT0gMCkgewogICAgICAgIGNvbnN0IHZhbCA9IHRoaXMuZW1pdFZhbHVlID09PSB0cnVlID8gb3B0VmFsdWUgOiBvcHQ7CiAgICAgICAgdGhpcy4kZW1pdCgnYWRkJywgewogICAgICAgICAgaW5kZXg6IDAsCiAgICAgICAgICB2YWx1ZTogdmFsCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB0aGlzLm11bHRpcGxlID09PSB0cnVlID8gW3ZhbF0gOiB2YWwpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBtb2RlbCA9IHRoaXMudmFsdWUuc2xpY2UoKSwKICAgICAgICBpbmRleCA9IHRoaXMuaW5uZXJPcHRpb25zVmFsdWUuZmluZEluZGV4KHYgPT4gaXNEZWVwRXF1YWwodiwgb3B0VmFsdWUpKTsKICAgICAgaWYgKGluZGV4ID4gLTEpIHsKICAgICAgICB0aGlzLiRlbWl0KCdyZW1vdmUnLCB7CiAgICAgICAgICBpbmRleCwKICAgICAgICAgIHZhbHVlOiBtb2RlbC5zcGxpY2UoaW5kZXgsIDEpWzBdCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMubWF4VmFsdWVzICE9PSB2b2lkIDAgJiYgbW9kZWwubGVuZ3RoID49IHRoaXMubWF4VmFsdWVzKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGNvbnN0IHZhbCA9IHRoaXMuZW1pdFZhbHVlID09PSB0cnVlID8gb3B0VmFsdWUgOiBvcHQ7CiAgICAgICAgdGhpcy4kZW1pdCgnYWRkJywgewogICAgICAgICAgaW5kZXg6IG1vZGVsLmxlbmd0aCwKICAgICAgICAgIHZhbHVlOiB2YWwKICAgICAgICB9KTsKICAgICAgICBtb2RlbC5wdXNoKHZhbCk7CiAgICAgIH0KICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCBtb2RlbCk7CiAgICB9LAogICAgc2V0T3B0aW9uSW5kZXgoaW5kZXgpIHsKICAgICAgaWYgKHRoaXMuJHEucGxhdGZvcm0uaXMuZGVza3RvcCAhPT0gdHJ1ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCB2YWwgPSBpbmRleCA+IC0xICYmIGluZGV4IDwgdGhpcy52aXJ0dWFsU2Nyb2xsTGVuZ3RoID8gaW5kZXggOiAtMTsKICAgICAgaWYgKHRoaXMub3B0aW9uSW5kZXggIT09IHZhbCkgewogICAgICAgIHRoaXMub3B0aW9uSW5kZXggPSB2YWw7CiAgICAgIH0KICAgIH0sCiAgICBtb3ZlT3B0aW9uU2VsZWN0aW9uKG9mZnNldCA9IDEsIHNraXBJbnB1dFZhbHVlKSB7CiAgICAgIGlmICh0aGlzLm1lbnUgPT09IHRydWUpIHsKICAgICAgICBsZXQgaW5kZXggPSB0aGlzLm9wdGlvbkluZGV4OwogICAgICAgIGRvIHsKICAgICAgICAgIGluZGV4ID0gbm9ybWFsaXplVG9JbnRlcnZhbChpbmRleCArIG9mZnNldCwgLTEsIHRoaXMudmlydHVhbFNjcm9sbExlbmd0aCAtIDEpOwogICAgICAgIH0gd2hpbGUgKGluZGV4ICE9PSAtMSAmJiBpbmRleCAhPT0gdGhpcy5vcHRpb25JbmRleCAmJiB0aGlzLmlzT3B0aW9uRGlzYWJsZWQodGhpcy5vcHRpb25zW2luZGV4XSkgPT09IHRydWUpOwogICAgICAgIGlmICh0aGlzLm9wdGlvbkluZGV4ICE9PSBpbmRleCkgewogICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5tb3ZlQW5pbWF0aW9uRnJhbWUpOwogICAgICAgICAgdGhpcy5tb3ZlQW5pbWF0aW9uRnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gewogICAgICAgICAgICB0aGlzLnNldE9wdGlvbkluZGV4KGluZGV4KTsKICAgICAgICAgICAgdGhpcy5zY3JvbGxUbyhpbmRleCk7CiAgICAgICAgICAgIGlmIChza2lwSW5wdXRWYWx1ZSAhPT0gdHJ1ZSAmJiB0aGlzLnVzZUlucHV0ID09PSB0cnVlICYmIHRoaXMuZmlsbElucHV0ID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgdGhpcy5fX3NldElucHV0VmFsdWUoaW5kZXggPj0gMCA/IHRoaXMuZ2V0T3B0aW9uTGFiZWwodGhpcy5vcHRpb25zW2luZGV4XSkgOiB0aGlzLmRlZmF1bHRJbnB1dFZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgX19nZXRPcHRpb24odmFsdWUsIGlubmVyVmFsdWVDYWNoZSkgewogICAgICBjb25zdCBmbiA9IG9wdCA9PiBpc0RlZXBFcXVhbCh0aGlzLmdldE9wdGlvblZhbHVlKG9wdCksIHZhbHVlKTsKICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5maW5kKGZuKSB8fCBpbm5lclZhbHVlQ2FjaGUuZmluZChmbikgfHwgdmFsdWU7CiAgICB9LAogICAgX19nZXRQcm9wVmFsdWVGbihwcm9wTmFtZSwgZGVmYXVsdFZhbCkgewogICAgICBjb25zdCB2YWwgPSB0aGlzW3Byb3BOYW1lXSAhPT0gdm9pZCAwID8gdGhpc1twcm9wTmFtZV0gOiBkZWZhdWx0VmFsOwogICAgICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJyA/IHZhbCA6IG9wdCA9PiBvcHQgIT09IG51bGwgJiYgdHlwZW9mIG9wdCA9PT0gJ29iamVjdCcgJiYgdmFsIGluIG9wdCA/IG9wdFt2YWxdIDogb3B0OwogICAgfSwKICAgIGlzT3B0aW9uU2VsZWN0ZWQob3B0KSB7CiAgICAgIGNvbnN0IHZhbCA9IHRoaXMuZ2V0T3B0aW9uVmFsdWUob3B0KTsKICAgICAgcmV0dXJuIHRoaXMuaW5uZXJPcHRpb25zVmFsdWUuZmluZCh2ID0+IGlzRGVlcEVxdWFsKHYsIHZhbCkpICE9PSB2b2lkIDA7CiAgICB9LAogICAgX19zZWxlY3RJbnB1dFRleHQoZSkgewogICAgICBpZiAodGhpcy51c2VJbnB1dCA9PT0gdHJ1ZSAmJiB0aGlzLiRyZWZzLnRhcmdldCAhPT0gdm9pZCAwICYmIChlID09PSB2b2lkIDAgfHwgdGhpcy4kcmVmcy50YXJnZXQgPT09IGUudGFyZ2V0ICYmIGUudGFyZ2V0LnZhbHVlID09PSB0aGlzLnNlbGVjdGVkU3RyaW5nKSkgewogICAgICAgIHRoaXMuJHJlZnMudGFyZ2V0LnNlbGVjdCgpOwogICAgICB9CiAgICB9LAogICAgX19vblRhcmdldEtleXVwKGUpIHsKICAgICAgLy8gaWYgRVNDIGFuZCB3ZSBoYXZlIGFuIG9wZW5lZCBtZW51CiAgICAgIC8vIHRoZW4gc3RvcCBwcm9wYWdhdGlvbiAobWlnaHQgYmUgY2F1Z2h0IGJ5IGEgUURpYWxvZwogICAgICAvLyBhbmQgc28gaXQgd2lsbCBhbHNvIGNsb3NlIHRoZSBRRGlhbG9nLCB3aGljaCBpcyB3cm9uZykKICAgICAgaWYgKGlzS2V5Q29kZShlLCAyNykgPT09IHRydWUgJiYgdGhpcy5tZW51ID09PSB0cnVlKSB7CiAgICAgICAgc3RvcChlKTsKICAgICAgICAvLyBvbiBFU0Mgd2UgbmVlZCB0byBjbG9zZSB0aGUgZGlhbG9nIGFsc28KICAgICAgICB0aGlzLmhpZGVQb3B1cCgpOwogICAgICAgIHRoaXMuX19yZXNldElucHV0VmFsdWUoKTsKICAgICAgfQogICAgICB0aGlzLiRlbWl0KCdrZXl1cCcsIGUpOwogICAgfSwKICAgIF9fb25UYXJnZXRBdXRvY29tcGxldGUoZSkgewogICAgICBjb25zdCB7CiAgICAgICAgdmFsdWUKICAgICAgfSA9IGUudGFyZ2V0OwogICAgICBpZiAoZS5rZXlDb2RlICE9PSB2b2lkIDApIHsKICAgICAgICB0aGlzLl9fb25UYXJnZXRLZXl1cChlKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZS50YXJnZXQudmFsdWUgPSAnJzsKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaW5wdXRUaW1lcik7CiAgICAgIHRoaXMuX19yZXNldElucHV0VmFsdWUoKTsKICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUubGVuZ3RoID4gMCkgewogICAgICAgIGNvbnN0IG5lZWRsZSA9IHZhbHVlLnRvTG9jYWxlTG93ZXJDYXNlKCk7CiAgICAgICAgY29uc3QgZmluZEZuID0gZXh0cmFjdEZuID0+IHsKICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IHRoaXMub3B0aW9ucy5maW5kKG9wdCA9PiBleHRyYWN0Rm4ob3B0KS50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuZWVkbGUpOwogICAgICAgICAgaWYgKG9wdGlvbiA9PT0gdm9pZCAwKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0aGlzLmlubmVyVmFsdWUuaW5kZXhPZihvcHRpb24pID09PSAtMSkgewogICAgICAgICAgICB0aGlzLnRvZ2dsZU9wdGlvbihvcHRpb24pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5oaWRlUG9wdXAoKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH07CiAgICAgICAgY29uc3QgZmlsbEZuID0gYWZ0ZXJGaWx0ZXIgPT4gewogICAgICAgICAgaWYgKGZpbmRGbih0aGlzLmdldE9wdGlvblZhbHVlKSA9PT0gdHJ1ZSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZmluZEZuKHRoaXMuZ2V0T3B0aW9uTGFiZWwpID09PSB0cnVlIHx8IGFmdGVyRmlsdGVyID09PSB0cnVlKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuZmlsdGVyKHZhbHVlLCB0cnVlLCAoKSA9PiBmaWxsRm4odHJ1ZSkpOwogICAgICAgIH07CiAgICAgICAgZmlsbEZuKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5fX2NsZWFyVmFsdWUoZSk7CiAgICAgIH0KICAgIH0sCiAgICBfX29uVGFyZ2V0S2V5cHJlc3MoZSkgewogICAgICB0aGlzLiRlbWl0KCdrZXlwcmVzcycsIGUpOwogICAgfSwKICAgIF9fb25UYXJnZXRLZXlkb3duKGUpIHsKICAgICAgdGhpcy4kZW1pdCgna2V5ZG93bicsIGUpOwogICAgICBpZiAoc2hvdWxkSWdub3JlS2V5KGUpID09PSB0cnVlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IG5ld1ZhbHVlTW9kZVZhbGlkID0gdGhpcy5pbnB1dFZhbHVlLmxlbmd0aCA+IDAgJiYgKHRoaXMubmV3VmFsdWVNb2RlICE9PSB2b2lkIDAgfHwgdGhpcy5xTGlzdGVuZXJzWyduZXctdmFsdWUnXSAhPT0gdm9pZCAwKTsKICAgICAgY29uc3QgdGFiU2hvdWxkU2VsZWN0ID0gZS5zaGlmdEtleSAhPT0gdHJ1ZSAmJiB0aGlzLm11bHRpcGxlICE9PSB0cnVlICYmICh0aGlzLm9wdGlvbkluZGV4ID4gLTEgfHwgbmV3VmFsdWVNb2RlVmFsaWQgPT09IHRydWUpOwoKICAgICAgLy8gZXNjYXBlCiAgICAgIGlmIChlLmtleUNvZGUgPT09IDI3KSB7CiAgICAgICAgcHJldmVudChlKTsgLy8gcHJldmVudCBjbGVhcmluZyB0aGUgaW5wdXRWYWx1ZQogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8gdGFiCiAgICAgIGlmIChlLmtleUNvZGUgPT09IDkgJiYgdGFiU2hvdWxkU2VsZWN0ID09PSBmYWxzZSkgewogICAgICAgIHRoaXMuX19jbG9zZU1lbnUoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKGUudGFyZ2V0ID09PSB2b2lkIDAgfHwgZS50YXJnZXQuaWQgIT09IHRoaXMudGFyZ2V0VWlkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICAvLyBkb3duCiAgICAgIGlmIChlLmtleUNvZGUgPT09IDQwICYmIHRoaXMuaW5uZXJMb2FkaW5nICE9PSB0cnVlICYmIHRoaXMubWVudSA9PT0gZmFsc2UpIHsKICAgICAgICBzdG9wQW5kUHJldmVudChlKTsKICAgICAgICB0aGlzLnNob3dQb3B1cCgpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8gYmFja3NwYWNlCiAgICAgIGlmIChlLmtleUNvZGUgPT09IDggJiYgdGhpcy5oaWRlU2VsZWN0ZWQgIT09IHRydWUgJiYgdGhpcy5pbnB1dFZhbHVlLmxlbmd0aCA9PT0gMCkgewogICAgICAgIGlmICh0aGlzLm11bHRpcGxlID09PSB0cnVlICYmIEFycmF5LmlzQXJyYXkodGhpcy52YWx1ZSkpIHsKICAgICAgICAgIHRoaXMucmVtb3ZlQXRJbmRleCh0aGlzLnZhbHVlLmxlbmd0aCAtIDEpOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5tdWx0aXBsZSAhPT0gdHJ1ZSAmJiB0aGlzLnZhbHVlICE9PSBudWxsKSB7CiAgICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIG51bGwpOwogICAgICAgIH0KICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vIGhvbWUsIGVuZCAtIDM2LCAzNQogICAgICBpZiAoKGUua2V5Q29kZSA9PT0gMzUgfHwgZS5rZXlDb2RlID09PSAzNikgJiYgKHR5cGVvZiB0aGlzLmlucHV0VmFsdWUgIT09ICdzdHJpbmcnIHx8IHRoaXMuaW5wdXRWYWx1ZS5sZW5ndGggPT09IDApKSB7CiAgICAgICAgc3RvcEFuZFByZXZlbnQoZSk7CiAgICAgICAgdGhpcy5vcHRpb25JbmRleCA9IC0xOwogICAgICAgIHRoaXMubW92ZU9wdGlvblNlbGVjdGlvbihlLmtleUNvZGUgPT09IDM2ID8gMSA6IC0xLCB0aGlzLm11bHRpcGxlKTsKICAgICAgfQoKICAgICAgLy8gcGcgdXAsIHBnIGRvd24gLSAzMywgMzQKICAgICAgaWYgKChlLmtleUNvZGUgPT09IDMzIHx8IGUua2V5Q29kZSA9PT0gMzQpICYmIHRoaXMudmlydHVhbFNjcm9sbFNsaWNlU2l6ZUNvbXB1dGVkICE9PSB2b2lkIDApIHsKICAgICAgICBzdG9wQW5kUHJldmVudChlKTsKICAgICAgICB0aGlzLm9wdGlvbkluZGV4ID0gTWF0aC5tYXgoLTEsIE1hdGgubWluKHRoaXMudmlydHVhbFNjcm9sbExlbmd0aCwgdGhpcy5vcHRpb25JbmRleCArIChlLmtleUNvZGUgPT09IDMzID8gLTEgOiAxKSAqIHRoaXMudmlydHVhbFNjcm9sbFNsaWNlU2l6ZUNvbXB1dGVkLnZpZXcpKTsKICAgICAgICB0aGlzLm1vdmVPcHRpb25TZWxlY3Rpb24oZS5rZXlDb2RlID09PSAzMyA/IDEgOiAtMSwgdGhpcy5tdWx0aXBsZSk7CiAgICAgIH0KCiAgICAgIC8vIHVwLCBkb3duCiAgICAgIGlmIChlLmtleUNvZGUgPT09IDM4IHx8IGUua2V5Q29kZSA9PT0gNDApIHsKICAgICAgICBzdG9wQW5kUHJldmVudChlKTsKICAgICAgICB0aGlzLm1vdmVPcHRpb25TZWxlY3Rpb24oZS5rZXlDb2RlID09PSAzOCA/IC0xIDogMSwgdGhpcy5tdWx0aXBsZSk7CiAgICAgIH0KICAgICAgY29uc3Qgb3B0aW9uc0xlbmd0aCA9IHRoaXMudmlydHVhbFNjcm9sbExlbmd0aDsKCiAgICAgIC8vIGNsZWFyIHNlYXJjaCBidWZmZXIgaWYgZXhwaXJlZAogICAgICBpZiAodGhpcy5zZWFyY2hCdWZmZXIgPT09IHZvaWQgMCB8fCB0aGlzLnNlYXJjaEJ1ZmZlckV4cCA8IERhdGUubm93KCkpIHsKICAgICAgICB0aGlzLnNlYXJjaEJ1ZmZlciA9ICcnOwogICAgICB9CgogICAgICAvLyBrZXlib2FyZCBzZWFyY2ggd2hlbiBub3QgaGF2aW5nIHVzZS1pbnB1dAogICAgICBpZiAob3B0aW9uc0xlbmd0aCA+IDAgJiYgdGhpcy51c2VJbnB1dCAhPT0gdHJ1ZSAmJiBlLmtleSAhPT0gdm9pZCAwICYmIGUua2V5Lmxlbmd0aCA9PT0gMSAmJgogICAgICAvLyBwcmludGFibGUgY2hhcgogICAgICBlLmFsdEtleSA9PT0gZmFsc2UgJiYKICAgICAgLy8gbm90IGtiZCBzaG9ydGN1dAogICAgICBlLmN0cmxLZXkgPT09IGZhbHNlICYmCiAgICAgIC8vIG5vdCBrYmQgc2hvcnRjdXQKICAgICAgZS5tZXRhS2V5ID09PSBmYWxzZSAmJiAoCiAgICAgIC8vIG5vdCBrYmQgc2hvcnRjdXQsIGVzcGVjaWFsbHkgb24gbWFjT1Mgd2l0aCBDb21tYW5kIGtleQogICAgICBlLmtleUNvZGUgIT09IDMyIHx8IHRoaXMuc2VhcmNoQnVmZmVyLmxlbmd0aCA+IDApIC8vIHNwYWNlIGluIG1pZGRsZSBvZiBzZWFyY2gKICAgICAgKSB7CiAgICAgICAgdGhpcy5tZW51ICE9PSB0cnVlICYmIHRoaXMuc2hvd1BvcHVwKGUpOwogICAgICAgIGNvbnN0IGNoYXIgPSBlLmtleS50b0xvY2FsZUxvd2VyQ2FzZSgpLAogICAgICAgICAga2V5UmVwZWF0ID0gdGhpcy5zZWFyY2hCdWZmZXIubGVuZ3RoID09PSAxICYmIHRoaXMuc2VhcmNoQnVmZmVyWzBdID09PSBjaGFyOwogICAgICAgIHRoaXMuc2VhcmNoQnVmZmVyRXhwID0gRGF0ZS5ub3coKSArIDE1MDA7CiAgICAgICAgaWYgKGtleVJlcGVhdCA9PT0gZmFsc2UpIHsKICAgICAgICAgIHN0b3BBbmRQcmV2ZW50KGUpOwogICAgICAgICAgdGhpcy5zZWFyY2hCdWZmZXIgKz0gY2hhcjsKICAgICAgICB9CiAgICAgICAgY29uc3Qgc2VhcmNoUmUgPSBuZXcgUmVnRXhwKCdeJyArIHRoaXMuc2VhcmNoQnVmZmVyLnNwbGl0KCcnKS5tYXAobCA9PiByZUVzY2FwZUxpc3QuaW5kZXhPZihsKSA+IC0xID8gJ1xcJyArIGwgOiBsKS5qb2luKCcuKicpLCAnaScpOwogICAgICAgIGxldCBpbmRleCA9IHRoaXMub3B0aW9uSW5kZXg7CiAgICAgICAgaWYgKGtleVJlcGVhdCA9PT0gdHJ1ZSB8fCBpbmRleCA8IDAgfHwgc2VhcmNoUmUudGVzdCh0aGlzLmdldE9wdGlvbkxhYmVsKHRoaXMub3B0aW9uc1tpbmRleF0pKSAhPT0gdHJ1ZSkgewogICAgICAgICAgZG8gewogICAgICAgICAgICBpbmRleCA9IG5vcm1hbGl6ZVRvSW50ZXJ2YWwoaW5kZXggKyAxLCAtMSwgb3B0aW9uc0xlbmd0aCAtIDEpOwogICAgICAgICAgfSB3aGlsZSAoaW5kZXggIT09IHRoaXMub3B0aW9uSW5kZXggJiYgKHRoaXMuaXNPcHRpb25EaXNhYmxlZCh0aGlzLm9wdGlvbnNbaW5kZXhdKSA9PT0gdHJ1ZSB8fCBzZWFyY2hSZS50ZXN0KHRoaXMuZ2V0T3B0aW9uTGFiZWwodGhpcy5vcHRpb25zW2luZGV4XSkpICE9PSB0cnVlKSk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLm9wdGlvbkluZGV4ICE9PSBpbmRleCkgewogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICB0aGlzLnNldE9wdGlvbkluZGV4KGluZGV4KTsKICAgICAgICAgICAgdGhpcy5zY3JvbGxUbyhpbmRleCk7CiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwICYmIHRoaXMudXNlSW5wdXQgPT09IHRydWUgJiYgdGhpcy5maWxsSW5wdXQgPT09IHRydWUpIHsKICAgICAgICAgICAgICB0aGlzLl9fc2V0SW5wdXRWYWx1ZSh0aGlzLmdldE9wdGlvbkxhYmVsKHRoaXMub3B0aW9uc1tpbmRleF0pKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8gZW50ZXIsIHNwYWNlICh3aGVuIG5vdCB1c2luZyB1c2UtaW5wdXQgYW5kIG5vdCBpbiBzZWFyY2gpLCBvciB0YWIgKHdoZW4gbm90IHVzaW5nIG11bHRpcGxlIGFuZCBvcHRpb24gc2VsZWN0ZWQpCiAgICAgIC8vIHNhbWUgdGFyZ2V0IGlzIGNoZWNrZWQgYWJvdmUKICAgICAgaWYgKGUua2V5Q29kZSAhPT0gMTMgJiYgKGUua2V5Q29kZSAhPT0gMzIgfHwgdGhpcy51c2VJbnB1dCA9PT0gdHJ1ZSB8fCB0aGlzLnNlYXJjaEJ1ZmZlciAhPT0gJycpICYmIChlLmtleUNvZGUgIT09IDkgfHwgdGFiU2hvdWxkU2VsZWN0ID09PSBmYWxzZSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZS5rZXlDb2RlICE9PSA5ICYmIHN0b3BBbmRQcmV2ZW50KGUpOwogICAgICBpZiAodGhpcy5vcHRpb25JbmRleCA+IC0xICYmIHRoaXMub3B0aW9uSW5kZXggPCBvcHRpb25zTGVuZ3RoKSB7CiAgICAgICAgdGhpcy50b2dnbGVPcHRpb24odGhpcy5vcHRpb25zW3RoaXMub3B0aW9uSW5kZXhdKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKG5ld1ZhbHVlTW9kZVZhbGlkID09PSB0cnVlKSB7CiAgICAgICAgY29uc3QgZG9uZSA9ICh2YWwsIG1vZGUpID0+IHsKICAgICAgICAgIGlmIChtb2RlKSB7CiAgICAgICAgICAgIGlmICh2YWxpZGF0ZU5ld1ZhbHVlTW9kZShtb2RlKSAhPT0gdHJ1ZSkgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbW9kZSA9IHRoaXMubmV3VmFsdWVNb2RlOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHZhbCA9PT0gdm9pZCAwIHx8IHZhbCA9PT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnVwZGF0ZUlucHV0VmFsdWUoJycsIHRoaXMubXVsdGlwbGUgIT09IHRydWUsIHRydWUpOwogICAgICAgICAgdGhpc1ttb2RlID09PSAndG9nZ2xlJyA/ICd0b2dnbGVPcHRpb24nIDogJ2FkZCddKHZhbCwgbW9kZSA9PT0gJ2FkZC11bmlxdWUnKTsKICAgICAgICAgIGlmICh0aGlzLm11bHRpcGxlICE9PSB0cnVlKSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnMudGFyZ2V0ICE9PSB2b2lkIDAgJiYgdGhpcy4kcmVmcy50YXJnZXQuZm9jdXMoKTsKICAgICAgICAgICAgdGhpcy5oaWRlUG9wdXAoKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGlmICh0aGlzLnFMaXN0ZW5lcnNbJ25ldy12YWx1ZSddICE9PSB2b2lkIDApIHsKICAgICAgICAgIHRoaXMuJGVtaXQoJ25ldy12YWx1ZScsIHRoaXMuaW5wdXRWYWx1ZSwgZG9uZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRvbmUodGhpcy5pbnB1dFZhbHVlKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMubXVsdGlwbGUgIT09IHRydWUpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHRoaXMubWVudSA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMuX19jbG9zZU1lbnUoKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmlubmVyTG9hZGluZyAhPT0gdHJ1ZSkgewogICAgICAgIHRoaXMuc2hvd1BvcHVwKCk7CiAgICAgIH0KICAgIH0sCiAgICBfX2dldFZpcnR1YWxTY3JvbGxFbCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaGFzRGlhbG9nID09PSB0cnVlID8gdGhpcy4kcmVmcy5tZW51Q29udGVudCA6IHRoaXMuJHJlZnMubWVudSAhPT0gdm9pZCAwICYmIHRoaXMuJHJlZnMubWVudS5fX3BvcnRhbCAhPT0gdm9pZCAwID8gdGhpcy4kcmVmcy5tZW51Ll9fcG9ydGFsLiRlbCA6IHZvaWQgMDsKICAgIH0sCiAgICBfX2dldFZpcnR1YWxTY3JvbGxUYXJnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9fZ2V0VmlydHVhbFNjcm9sbEVsKCk7CiAgICB9LAogICAgX19nZXRTZWxlY3Rpb24oaCkgewogICAgICBpZiAodGhpcy5oaWRlU2VsZWN0ZWQgPT09IHRydWUpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgICAgaWYgKHRoaXMuJHNjb3BlZFNsb3RzWydzZWxlY3RlZC1pdGVtJ10gIT09IHZvaWQgMCkgewogICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkU2NvcGUubWFwKHNjb3BlID0+IHRoaXMuJHNjb3BlZFNsb3RzWydzZWxlY3RlZC1pdGVtJ10oc2NvcGUpKS5zbGljZSgpOwogICAgICB9CiAgICAgIGlmICh0aGlzLiRzY29wZWRTbG90cy5zZWxlY3RlZCAhPT0gdm9pZCAwKSB7CiAgICAgICAgcmV0dXJuIFtdLmNvbmNhdCh0aGlzLiRzY29wZWRTbG90cy5zZWxlY3RlZCgpKTsKICAgICAgfQogICAgICBpZiAodGhpcy51c2VDaGlwcyA9PT0gdHJ1ZSkgewogICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkU2NvcGUubWFwKChzY29wZSwgaSkgPT4gaChRQ2hpcCwgewogICAgICAgICAga2V5OiAncmVtIycgKyBpLAogICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgcmVtb3ZhYmxlOiB0aGlzLmVkaXRhYmxlID09PSB0cnVlICYmIHRoaXMuaXNPcHRpb25EaXNhYmxlZChzY29wZS5vcHQpICE9PSB0cnVlLAogICAgICAgICAgICBkZW5zZTogdHJ1ZSwKICAgICAgICAgICAgdGV4dENvbG9yOiB0aGlzLmNvbG9yLAogICAgICAgICAgICB0YWJpbmRleDogdGhpcy5jb21wdXRlZFRhYmluZGV4CiAgICAgICAgICB9LAogICAgICAgICAgb246IGNhY2hlKHRoaXMsICdyZW0jJyArIGksIHsKICAgICAgICAgICAgcmVtb3ZlKCkgewogICAgICAgICAgICAgIHNjb3BlLnJlbW92ZUF0SW5kZXgoaSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfSwgW2goJ3NwYW4nLCB7CiAgICAgICAgICBzdGF0aWNDbGFzczogJ2VsbGlwc2lzJywKICAgICAgICAgIGRvbVByb3BzOiB7CiAgICAgICAgICAgIFtzY29wZS5zYW5pdGl6ZSA9PT0gdHJ1ZSA/ICd0ZXh0Q29udGVudCcgOiAnaW5uZXJIVE1MJ106IHRoaXMuZ2V0T3B0aW9uTGFiZWwoc2NvcGUub3B0KQogICAgICAgICAgfQogICAgICAgIH0pXSkpOwogICAgICB9CiAgICAgIHJldHVybiBbaCgnc3BhbicsIHsKICAgICAgICBkb21Qcm9wczogewogICAgICAgICAgW3RoaXMuZGlzcGxheUFzVGV4dCA/ICd0ZXh0Q29udGVudCcgOiAnaW5uZXJIVE1MJ106IHRoaXMuYXJpYUN1cnJlbnRWYWx1ZQogICAgICAgIH0KICAgICAgfSldOwogICAgfSwKICAgIF9fZ2V0Q29udHJvbChoLCBmcm9tRGlhbG9nKSB7CiAgICAgIGNvbnN0IGNoaWxkID0gdGhpcy5fX2dldFNlbGVjdGlvbihoKTsKICAgICAgY29uc3QgaXNUYXJnZXQgPSBmcm9tRGlhbG9nID09PSB0cnVlIHx8IHRoaXMuZGlhbG9nICE9PSB0cnVlIHx8IHRoaXMuaGFzRGlhbG9nICE9PSB0cnVlOwogICAgICBpZiAodGhpcy51c2VJbnB1dCA9PT0gdHJ1ZSkgewogICAgICAgIGNoaWxkLnB1c2godGhpcy5fX2dldElucHV0KGgsIGZyb21EaWFsb2csIGlzVGFyZ2V0KSk7CiAgICAgIH0KICAgICAgLy8gdGhlcmUgY2FuIGJlIG9ubHkgb25lICh3aGVuIGRpYWxvZyBpcyBvcGVuZWQgdGhlIGNvbnRyb2wgaW4gZGlhbG9nIHNob3VsZCBiZSB0YXJnZXQpCiAgICAgIGVsc2UgaWYgKHRoaXMuZWRpdGFibGUgPT09IHRydWUpIHsKICAgICAgICBjb25zdCBhdHRycyA9IGlzVGFyZ2V0ID09PSB0cnVlID8gdGhpcy5jb21ib2JveEF0dHJzIDogdm9pZCAwOwogICAgICAgIGNoaWxkLnB1c2goaCgnaW5wdXQnLCB7CiAgICAgICAgICByZWY6IGlzVGFyZ2V0ID09PSB0cnVlID8gJ3RhcmdldCcgOiB2b2lkIDAsCiAgICAgICAgICBrZXk6ICdkX3QnLAogICAgICAgICAgc3RhdGljQ2xhc3M6ICdxLXNlbGVjdF9fZm9jdXMtdGFyZ2V0JywKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgIGlkOiBpc1RhcmdldCA9PT0gdHJ1ZSA/IHRoaXMudGFyZ2V0VWlkIDogdm9pZCAwLAogICAgICAgICAgICByZWFkb25seTogdHJ1ZSwKICAgICAgICAgICAgJ2RhdGEtYXV0b2ZvY3VzJzogKGZyb21EaWFsb2cgPT09IHRydWUgPyBpc1RhcmdldCA9PT0gdHJ1ZSA6IHRoaXMuYXV0b2ZvY3VzKSB8fCB2b2lkIDAsCiAgICAgICAgICAgIC4uLmF0dHJzCiAgICAgICAgICB9LAogICAgICAgICAgb246IGNhY2hlKHRoaXMsICdmLXRnZXQnLCB7CiAgICAgICAgICAgIGtleWRvd246IHRoaXMuX19vblRhcmdldEtleWRvd24sCiAgICAgICAgICAgIGtleXVwOiB0aGlzLl9fb25UYXJnZXRLZXl1cCwKICAgICAgICAgICAga2V5cHJlc3M6IHRoaXMuX19vblRhcmdldEtleXByZXNzCiAgICAgICAgICB9KQogICAgICAgIH0pKTsKICAgICAgICBpZiAoaXNUYXJnZXQgPT09IHRydWUgJiYgdHlwZW9mIHRoaXMuYXV0b2NvbXBsZXRlID09PSAnc3RyaW5nJyAmJiB0aGlzLmF1dG9jb21wbGV0ZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICBjaGlsZC5wdXNoKGgoJ2lucHV0JywgewogICAgICAgICAgICBrZXk6ICdhdXRvaW5wJywKICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICdxLXNlbGVjdF9fYXV0b2NvbXBsZXRlLWlucHV0JywKICAgICAgICAgICAgZG9tUHJvcHM6IHsKICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5hcmlhQ3VycmVudFZhbHVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgYXV0b2NvbXBsZXRlOiB0aGlzLmF1dG9jb21wbGV0ZSwKICAgICAgICAgICAgICB0YWJpbmRleDogLTEKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb246IGNhY2hlKHRoaXMsICdhdXRvaW5wJywgewogICAgICAgICAgICAgIGtleXVwOiB0aGlzLl9fb25UYXJnZXRBdXRvY29tcGxldGUKICAgICAgICAgICAgfSkKICAgICAgICAgIH0pKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHRoaXMubmFtZVByb3AgIT09IHZvaWQgMCAmJiB0aGlzLmRpc2FibGUgIT09IHRydWUgJiYgdGhpcy5pbm5lck9wdGlvbnNWYWx1ZS5sZW5ndGggPiAwKSB7CiAgICAgICAgY29uc3Qgb3B0cyA9IHRoaXMuaW5uZXJPcHRpb25zVmFsdWUubWFwKHZhbHVlID0+IGgoJ29wdGlvbicsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgIHZhbHVlLAogICAgICAgICAgICBzZWxlY3RlZDogdHJ1ZQogICAgICAgICAgfQogICAgICAgIH0pKTsKICAgICAgICBjaGlsZC5wdXNoKGgoJ3NlbGVjdCcsIHsKICAgICAgICAgIHN0YXRpY0NsYXNzOiAnaGlkZGVuJywKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZVByb3AsCiAgICAgICAgICAgIG11bHRpcGxlOiB0aGlzLm11bHRpcGxlCiAgICAgICAgICB9CiAgICAgICAgfSwgb3B0cykpOwogICAgICB9CiAgICAgIGNvbnN0IGF0dHJzID0gdGhpcy51c2VJbnB1dCA9PT0gdHJ1ZSB8fCBpc1RhcmdldCAhPT0gdHJ1ZSA/IHZvaWQgMCA6IHRoaXMucUF0dHJzOwogICAgICByZXR1cm4gaCgnZGl2JywgewogICAgICAgIHN0YXRpY0NsYXNzOiAncS1maWVsZF9fbmF0aXZlIHJvdyBpdGVtcy1jZW50ZXInLAogICAgICAgIGF0dHJzCiAgICAgIH0sIGNoaWxkKTsKICAgIH0sCiAgICBfX2dldE9wdGlvbnMoaCkgewogICAgICBpZiAodGhpcy5tZW51ICE9PSB0cnVlKSB7CiAgICAgICAgcmV0dXJuIHZvaWQgMDsKICAgICAgfQogICAgICBpZiAodGhpcy5ub09wdGlvbnMgPT09IHRydWUpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc2NvcGVkU2xvdHNbJ25vLW9wdGlvbiddICE9PSB2b2lkIDAgPyB0aGlzLiRzY29wZWRTbG90c1snbm8tb3B0aW9uJ10oewogICAgICAgICAgaW5wdXRWYWx1ZTogdGhpcy5pbnB1dFZhbHVlCiAgICAgICAgfSkgOiB2b2lkIDA7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuJHNjb3BlZFNsb3RzLm9wdGlvbiAhPT0gdm9pZCAwICYmIHRoaXMuX19vcHRpb25TY29wZUNhY2hlLm9wdGlvblNsb3QgIT09IHRoaXMuJHNjb3BlZFNsb3RzLm9wdGlvbikgewogICAgICAgIHRoaXMuX19vcHRpb25TY29wZUNhY2hlLm9wdGlvblNsb3QgPSB0aGlzLiRzY29wZWRTbG90cy5vcHRpb247CiAgICAgICAgdGhpcy5fX29wdGlvblNjb3BlQ2FjaGUub3B0aW9uRWxzID0gW107CiAgICAgIH0KICAgICAgY29uc3QgZm4gPSB0aGlzLiRzY29wZWRTbG90cy5vcHRpb24gIT09IHZvaWQgMCA/IHRoaXMuJHNjb3BlZFNsb3RzLm9wdGlvbiA6IHNjb3BlID0+IGgoUUl0ZW0sIHsKICAgICAgICBrZXk6IHNjb3BlLmluZGV4LAogICAgICAgIHByb3BzOiBzY29wZS5pdGVtUHJvcHMsCiAgICAgICAgYXR0cnM6IHNjb3BlLml0ZW1BdHRycywKICAgICAgICBvbjogc2NvcGUuaXRlbUV2ZW50cwogICAgICB9LCBbaChRSXRlbVNlY3Rpb24sIFtoKFFJdGVtTGFiZWwsIHsKICAgICAgICBkb21Qcm9wczogewogICAgICAgICAgW3Njb3BlLnNhbml0aXplID09PSB0cnVlID8gJ3RleHRDb250ZW50JyA6ICdpbm5lckhUTUwnXTogdGhpcy5nZXRPcHRpb25MYWJlbChzY29wZS5vcHQpCiAgICAgICAgfQogICAgICB9KV0pXSk7CiAgICAgIGNvbnN0IHsKICAgICAgICBvcHRpb25FbHMKICAgICAgfSA9IHRoaXMuX19vcHRpb25TY29wZUNhY2hlOwogICAgICBsZXQgb3B0aW9ucyA9IHRoaXMuX19wYWRWaXJ0dWFsU2Nyb2xsKGgsICdkaXYnLCB0aGlzLm9wdGlvblNjb3BlLm1hcCgoc2NvcGUsIGkpID0+IHsKICAgICAgICBpZiAob3B0aW9uRWxzW2ldID09PSB2b2lkIDApIHsKICAgICAgICAgIG9wdGlvbkVsc1tpXSA9IGZuKHNjb3BlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG9wdGlvbkVsc1tpXTsKICAgICAgfSkpOwogICAgICBpZiAodGhpcy4kc2NvcGVkU2xvdHNbJ2JlZm9yZS1vcHRpb25zJ10gIT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB0aGlzLiRzY29wZWRTbG90c1snYmVmb3JlLW9wdGlvbnMnXSgpLmNvbmNhdChvcHRpb25zKTsKICAgICAgfQogICAgICByZXR1cm4gbWVyZ2VTbG90KG9wdGlvbnMsIHRoaXMsICdhZnRlci1vcHRpb25zJyk7CiAgICB9LAogICAgX19nZXRJbm5lckFwcGVuZChoKSB7CiAgICAgIHJldHVybiB0aGlzLmxvYWRpbmcgIT09IHRydWUgJiYgdGhpcy5pbm5lckxvYWRpbmdJbmRpY2F0b3IgIT09IHRydWUgJiYgdGhpcy5oaWRlRHJvcGRvd25JY29uICE9PSB0cnVlID8gW2goUUljb24sIHsKICAgICAgICBzdGF0aWNDbGFzczogJ3Etc2VsZWN0X19kcm9wZG93bi1pY29uJyArICh0aGlzLm1lbnUgPT09IHRydWUgPyAnIHJvdGF0ZS0xODAnIDogJycpLAogICAgICAgIHByb3BzOiB7CiAgICAgICAgICBuYW1lOiB0aGlzLmRyb3Bkb3duQXJyb3dJY29uCiAgICAgICAgfQogICAgICB9KV0gOiBudWxsOwogICAgfSwKICAgIF9fZ2V0SW5wdXQoaCwgZnJvbURpYWxvZywgaXNUYXJnZXQpIHsKICAgICAgY29uc3QgYXR0cnMgPSBpc1RhcmdldCA9PT0gdHJ1ZSA/IHsKICAgICAgICAuLi50aGlzLmNvbWJvYm94QXR0cnMsCiAgICAgICAgLi4udGhpcy5xQXR0cnMKICAgICAgfSA6IHZvaWQgMDsKICAgICAgY29uc3Qgb3B0aW9ucyA9IHsKICAgICAgICByZWY6IGlzVGFyZ2V0ID09PSB0cnVlID8gJ3RhcmdldCcgOiB2b2lkIDAsCiAgICAgICAga2V5OiAnaV90JywKICAgICAgICBzdGF0aWNDbGFzczogJ3EtZmllbGRfX2lucHV0IHEtcGxhY2Vob2xkZXIgY29sJywKICAgICAgICBzdHlsZTogdGhpcy5pbnB1dFN0eWxlLAogICAgICAgIGNsYXNzOiB0aGlzLmNvbXB1dGVkSW5wdXRDbGFzcywKICAgICAgICBkb21Qcm9wczogewogICAgICAgICAgdmFsdWU6IHRoaXMuaW5wdXRWYWx1ZSAhPT0gdm9pZCAwID8gdGhpcy5pbnB1dFZhbHVlIDogJycKICAgICAgICB9LAogICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAvLyByZXF1aXJlZCBmb3IgQW5kcm9pZCBpbiBvcmRlciB0byBzaG93IEVOVEVSIGtleSB3aGVuIGluIGZvcm0KICAgICAgICAgIHR5cGU6ICdzZWFyY2gnLAogICAgICAgICAgLi4uYXR0cnMsCiAgICAgICAgICBpZDogaXNUYXJnZXQgPT09IHRydWUgPyB0aGlzLnRhcmdldFVpZCA6IHZvaWQgMCwKICAgICAgICAgIG1heGxlbmd0aDogdGhpcy5tYXhsZW5ndGgsCiAgICAgICAgICAvLyB0aGlzIGlzIGNvbnZlcnRlZCB0byBwcm9wIGJ5IFFGaWVsZAogICAgICAgICAgYXV0b2NvbXBsZXRlOiB0aGlzLmF1dG9jb21wbGV0ZSwKICAgICAgICAgICdkYXRhLWF1dG9mb2N1cyc6IChmcm9tRGlhbG9nID09PSB0cnVlID8gaXNUYXJnZXQgPT09IHRydWUgOiB0aGlzLmF1dG9mb2N1cykgfHwgdm9pZCAwLAogICAgICAgICAgZGlzYWJsZWQ6IHRoaXMuZGlzYWJsZSA9PT0gdHJ1ZSwKICAgICAgICAgIHJlYWRvbmx5OiB0aGlzLnJlYWRvbmx5ID09PSB0cnVlCiAgICAgICAgfSwKICAgICAgICBvbjogdGhpcy5pbnB1dENvbnRyb2xFdmVudHMKICAgICAgfTsKICAgICAgaWYgKGZyb21EaWFsb2cgIT09IHRydWUgJiYgdGhpcy5oYXNEaWFsb2cgPT09IHRydWUpIHsKICAgICAgICBvcHRpb25zLnN0YXRpY0NsYXNzICs9ICcgbm8tcG9pbnRlci1ldmVudHMnOwogICAgICB9CiAgICAgIHJldHVybiBoKCdpbnB1dCcsIG9wdGlvbnMpOwogICAgfSwKICAgIF9fb25DaGFuZ2UoZSkgewogICAgICB0aGlzLl9fb25Db21wb3NpdGlvbihlKTsKICAgIH0sCiAgICBfX29uSW5wdXQoZSkgewogICAgICBjbGVhclRpbWVvdXQodGhpcy5pbnB1dFRpbWVyKTsKICAgICAgaWYgKGUgJiYgZS50YXJnZXQgJiYgZS50YXJnZXQucUNvbXBvc2luZyA9PT0gdHJ1ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLl9fc2V0SW5wdXRWYWx1ZShlLnRhcmdldC52YWx1ZSB8fCAnJyk7CiAgICAgIC8vIG1hcmsgaXQgaGVyZSBhcyB1c2VyIGlucHV0IHNvIHRoYXQgaWYgdXBkYXRlSW5wdXRWYWx1ZSBpcyBjYWxsZWQKICAgICAgLy8gYmVmb3JlIGZpbHRlciBpcyBjYWxsZWQgdGhlIGluZGljYXRvciBpcyByZXNldAogICAgICB0aGlzLnVzZXJJbnB1dFZhbHVlID0gdHJ1ZTsKICAgICAgdGhpcy5kZWZhdWx0SW5wdXRWYWx1ZSA9IHRoaXMuaW5wdXRWYWx1ZTsKICAgICAgaWYgKHRoaXMuZm9jdXNlZCAhPT0gdHJ1ZSAmJiAodGhpcy5oYXNEaWFsb2cgIT09IHRydWUgfHwgdGhpcy5kaWFsb2dGaWVsZEZvY3VzZWQgPT09IHRydWUpKSB7CiAgICAgICAgdGhpcy5fX2ZvY3VzKCk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMucUxpc3RlbmVycy5maWx0ZXIgIT09IHZvaWQgMCkgewogICAgICAgIHRoaXMuaW5wdXRUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy5maWx0ZXIodGhpcy5pbnB1dFZhbHVlKTsKICAgICAgICB9LCB0aGlzLmlucHV0RGVib3VuY2UpOwogICAgICB9CiAgICB9LAogICAgX19zZXRJbnB1dFZhbHVlKGlucHV0VmFsdWUpIHsKICAgICAgaWYgKHRoaXMuaW5wdXRWYWx1ZSAhPT0gaW5wdXRWYWx1ZSkgewogICAgICAgIHRoaXMuaW5wdXRWYWx1ZSA9IGlucHV0VmFsdWU7CiAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQtdmFsdWUnLCBpbnB1dFZhbHVlKTsKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZUlucHV0VmFsdWUodmFsLCBub0ZpbHRlcmluZywgaW50ZXJuYWwpIHsKICAgICAgdGhpcy51c2VySW5wdXRWYWx1ZSA9IGludGVybmFsICE9PSB0cnVlOwogICAgICBpZiAodGhpcy51c2VJbnB1dCA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMuX19zZXRJbnB1dFZhbHVlKHZhbCk7CiAgICAgICAgaWYgKG5vRmlsdGVyaW5nID09PSB0cnVlIHx8IGludGVybmFsICE9PSB0cnVlKSB7CiAgICAgICAgICB0aGlzLmRlZmF1bHRJbnB1dFZhbHVlID0gdmFsOwogICAgICAgIH0KICAgICAgICBub0ZpbHRlcmluZyAhPT0gdHJ1ZSAmJiB0aGlzLmZpbHRlcih2YWwpOwogICAgICB9CiAgICB9LAogICAgZmlsdGVyKHZhbCwga2VlcENsb3NlZCwgYWZ0ZXJVcGRhdGVGbikgewogICAgICBpZiAodGhpcy5xTGlzdGVuZXJzLmZpbHRlciA9PT0gdm9pZCAwIHx8IGtlZXBDbG9zZWQgIT09IHRydWUgJiYgdGhpcy5mb2N1c2VkICE9PSB0cnVlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0aGlzLmlubmVyTG9hZGluZyA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMuJGVtaXQoJ2ZpbHRlci1hYm9ydCcpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaW5uZXJMb2FkaW5nID0gdHJ1ZTsKICAgICAgICB0aGlzLmlubmVyTG9hZGluZ0luZGljYXRvciA9IHRydWU7CiAgICAgIH0KICAgICAgaWYgKHZhbCAhPT0gJycgJiYgdGhpcy5tdWx0aXBsZSAhPT0gdHJ1ZSAmJiB0aGlzLmlubmVyVmFsdWUubGVuZ3RoID4gMCAmJiB0aGlzLnVzZXJJbnB1dFZhbHVlICE9PSB0cnVlICYmIHZhbCA9PT0gdGhpcy5nZXRPcHRpb25MYWJlbCh0aGlzLmlubmVyVmFsdWVbMF0pKSB7CiAgICAgICAgdmFsID0gJyc7CiAgICAgIH0KICAgICAgY29uc3QgZmlsdGVySWQgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLm1lbnUgPT09IHRydWUgJiYgKHRoaXMubWVudSA9IGZhbHNlKTsKICAgICAgfSwgMTApOwogICAgICBjbGVhclRpbWVvdXQodGhpcy5maWx0ZXJJZCk7CiAgICAgIHRoaXMuZmlsdGVySWQgPSBmaWx0ZXJJZDsKICAgICAgdGhpcy4kZW1pdCgnZmlsdGVyJywgdmFsLCAoZm4sIGFmdGVyRm4pID0+IHsKICAgICAgICBpZiAoKGtlZXBDbG9zZWQgPT09IHRydWUgfHwgdGhpcy5mb2N1c2VkID09PSB0cnVlKSAmJiB0aGlzLmZpbHRlcklkID09PSBmaWx0ZXJJZCkgewogICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZmlsdGVySWQpOwogICAgICAgICAgdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nICYmIGZuKCk7CgogICAgICAgICAgLy8gaGlkZSBpbmRpY2F0b3IgdG8gYWxsb3cgYXJyb3cgdG8gYW5pbWF0ZQogICAgICAgICAgdGhpcy5pbm5lckxvYWRpbmdJbmRpY2F0b3IgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5pbm5lckxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgaWYgKHRoaXMuZWRpdGFibGUgPT09IHRydWUpIHsKICAgICAgICAgICAgICBpZiAoa2VlcENsb3NlZCA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgdGhpcy5tZW51ID09PSB0cnVlICYmIHRoaXMuaGlkZVBvcHVwKCk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm1lbnUgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgIHRoaXMuX191cGRhdGVNZW51KHRydWUpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLm1lbnUgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5oYXNEaWFsb2cgPT09IHRydWUgJiYgKHRoaXMuZGlhbG9nID0gdHJ1ZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHR5cGVvZiBhZnRlckZuID09PSAnZnVuY3Rpb24nICYmIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgICBhZnRlckZuKHRoaXMpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdHlwZW9mIGFmdGVyVXBkYXRlRm4gPT09ICdmdW5jdGlvbicgJiYgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICAgIGFmdGVyVXBkYXRlRm4odGhpcyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LCAoKSA9PiB7CiAgICAgICAgaWYgKHRoaXMuZm9jdXNlZCA9PT0gdHJ1ZSAmJiB0aGlzLmZpbHRlcklkID09PSBmaWx0ZXJJZCkgewogICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZmlsdGVySWQpOwogICAgICAgICAgdGhpcy5pbm5lckxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuaW5uZXJMb2FkaW5nSW5kaWNhdG9yID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHRoaXMubWVudSA9PT0gdHJ1ZSAmJiAodGhpcy5tZW51ID0gZmFsc2UpOwogICAgICB9KTsKICAgIH0sCiAgICBfX2dldENvbnRyb2xFdmVudHMoKSB7CiAgICAgIGNvbnN0IGZvY3Vzb3V0ID0gZSA9PiB7CiAgICAgICAgdGhpcy5fX29uQ29udHJvbEZvY3Vzb3V0KGUsICgpID0+IHsKICAgICAgICAgIHRoaXMuX19yZXNldElucHV0VmFsdWUoKTsKICAgICAgICAgIHRoaXMuX19jbG9zZU1lbnUoKTsKICAgICAgICB9KTsKICAgICAgfTsKICAgICAgcmV0dXJuIHsKICAgICAgICBmb2N1c2luOiB0aGlzLl9fb25Db250cm9sRm9jdXNpbiwKICAgICAgICBmb2N1c291dCwKICAgICAgICAncG9wdXAtc2hvdyc6IHRoaXMuX19vbkNvbnRyb2xQb3B1cFNob3csCiAgICAgICAgJ3BvcHVwLWhpZGUnOiBlID0+IHsKICAgICAgICAgIGUgIT09IHZvaWQgMCAmJiBzdG9wKGUpOwogICAgICAgICAgdGhpcy4kZW1pdCgncG9wdXAtaGlkZScsIGUpOwogICAgICAgICAgdGhpcy5oYXNQb3B1cE9wZW4gPSBmYWxzZTsKICAgICAgICAgIGZvY3Vzb3V0KGUpOwogICAgICAgIH0sCiAgICAgICAgY2xpY2s6IGUgPT4gewogICAgICAgICAgLy8gbGFiZWwgZnJvbSBRRmllbGQgd2lsbCBwcm9wYWdhdGUgY2xpY2sgb24gdGhlIGlucHV0IChleGNlcHQgSUUpCiAgICAgICAgICBwcmV2ZW50KGUpOwogICAgICAgICAgaWYgKHRoaXMuaGFzRGlhbG9nICE9PSB0cnVlICYmIHRoaXMubWVudSA9PT0gdHJ1ZSkgewogICAgICAgICAgICB0aGlzLl9fY2xvc2VNZW51KCk7CiAgICAgICAgICAgIHRoaXMuJHJlZnMudGFyZ2V0ICE9PSB2b2lkIDAgJiYgdGhpcy4kcmVmcy50YXJnZXQuZm9jdXMoKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5zaG93UG9wdXAoZSk7CiAgICAgICAgfQogICAgICB9OwogICAgfSwKICAgIF9fZ2V0Q29udHJvbENoaWxkKGgpIHsKICAgICAgaWYgKHRoaXMuZWRpdGFibGUgIT09IGZhbHNlICYmICh0aGlzLmRpYWxvZyA9PT0gdHJ1ZSB8fAogICAgICAvLyBkaWFsb2cgYWx3YXlzIGhhcyBtZW51IGRpc3BsYXllZCwgc28gbmVlZCB0byByZW5kZXIgaXQKICAgICAgdGhpcy5ub09wdGlvbnMgIT09IHRydWUgfHwgdGhpcy4kc2NvcGVkU2xvdHNbJ25vLW9wdGlvbiddICE9PSB2b2lkIDApKSB7CiAgICAgICAgcmV0dXJuIHRoaXNbYF9fZ2V0JHt0aGlzLmhhc0RpYWxvZyA9PT0gdHJ1ZSA/ICdEaWFsb2cnIDogJ01lbnUnfWBdKGgpOwogICAgICB9CiAgICB9LAogICAgX19nZXRNZW51KGgpIHsKICAgICAgcmV0dXJuIGgoUU1lbnUsIHsKICAgICAgICBrZXk6ICdtZW51JywKICAgICAgICByZWY6ICdtZW51JywKICAgICAgICBwcm9wczogewogICAgICAgICAgdmFsdWU6IHRoaXMubWVudSwKICAgICAgICAgIGZpdDogdGhpcy5tZW51U2hyaW5rICE9PSB0cnVlLAogICAgICAgICAgY292ZXI6IHRoaXMub3B0aW9uc0NvdmVyID09PSB0cnVlICYmIHRoaXMubm9PcHRpb25zICE9PSB0cnVlICYmIHRoaXMudXNlSW5wdXQgIT09IHRydWUsCiAgICAgICAgICBhbmNob3I6IHRoaXMubWVudUFuY2hvciwKICAgICAgICAgIHNlbGY6IHRoaXMubWVudVNlbGYsCiAgICAgICAgICBvZmZzZXQ6IHRoaXMubWVudU9mZnNldCwKICAgICAgICAgIGNvbnRlbnRDbGFzczogdGhpcy5tZW51Q29udGVudENsYXNzLAogICAgICAgICAgY29udGVudFN0eWxlOiB0aGlzLnBvcHVwQ29udGVudFN0eWxlLAogICAgICAgICAgZGFyazogdGhpcy5pc09wdGlvbnNEYXJrLAogICAgICAgICAgbm9QYXJlbnRFdmVudDogdHJ1ZSwKICAgICAgICAgIG5vUmVmb2N1czogdHJ1ZSwKICAgICAgICAgIG5vRm9jdXM6IHRydWUsCiAgICAgICAgICBzcXVhcmU6IHRoaXMuc3F1YXJlZE1lbnUsCiAgICAgICAgICB0cmFuc2l0aW9uU2hvdzogdGhpcy50cmFuc2l0aW9uU2hvdywKICAgICAgICAgIHRyYW5zaXRpb25IaWRlOiB0aGlzLnRyYW5zaXRpb25IaWRlLAogICAgICAgICAgc2VwYXJhdGVDbG9zZVBvcHVwOiB0cnVlCiAgICAgICAgfSwKICAgICAgICBhdHRyczogdGhpcy5saXN0Ym94QXR0cnMsCiAgICAgICAgb246IGNhY2hlKHRoaXMsICdtZW51JywgewogICAgICAgICAgJyZzY3JvbGwnOiB0aGlzLl9fb25WaXJ0dWFsU2Nyb2xsRXZ0LAogICAgICAgICAgJ2JlZm9yZS1oaWRlJzogdGhpcy5fX2Nsb3NlTWVudSwKICAgICAgICAgIHNob3c6IHRoaXMuX19vbk1lbnVTaG93CiAgICAgICAgfSkKICAgICAgfSwgdGhpcy5fX2dldE9wdGlvbnMoaCkpOwogICAgfSwKICAgIF9fb25NZW51U2hvdygpIHsKICAgICAgdGhpcy5fX3NldFZpcnR1YWxTY3JvbGxTaXplKCk7CiAgICB9LAogICAgX19vbkRpYWxvZ0ZpZWxkRm9jdXMoZSkgewogICAgICBzdG9wKGUpOwogICAgICB0aGlzLiRyZWZzLnRhcmdldCAhPT0gdm9pZCAwICYmIHRoaXMuJHJlZnMudGFyZ2V0LmZvY3VzKCk7CiAgICAgIHRoaXMuZGlhbG9nRmllbGRGb2N1c2VkID0gdHJ1ZTsKICAgICAgd2luZG93LnNjcm9sbFRvKHdpbmRvdy5wYWdlWE9mZnNldCB8fCB3aW5kb3cuc2Nyb2xsWCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQgfHwgMCwgMCk7CiAgICB9LAogICAgX19vbkRpYWxvZ0ZpZWxkQmx1cihlKSB7CiAgICAgIHN0b3AoZSk7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLmRpYWxvZ0ZpZWxkRm9jdXNlZCA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBfX2dldERpYWxvZyhoKSB7CiAgICAgIGNvbnN0IGNvbnRlbnQgPSBbaChRRmllbGQsIHsKICAgICAgICBzdGF0aWNDbGFzczogYGNvbC1hdXRvICR7dGhpcy5maWVsZENsYXNzfWAsCiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgIC4uLnRoaXMuJHByb3BzLAogICAgICAgICAgZm9yOiB0aGlzLnRhcmdldFVpZCwKICAgICAgICAgIGRhcms6IHRoaXMuaXNPcHRpb25zRGFyaywKICAgICAgICAgIHNxdWFyZTogdHJ1ZSwKICAgICAgICAgIGZpbGxlZDogdHJ1ZSwKICAgICAgICAgIGl0ZW1BbGlnbmVkOiBmYWxzZSwKICAgICAgICAgIGxvYWRpbmc6IHRoaXMuaW5uZXJMb2FkaW5nSW5kaWNhdG9yLAogICAgICAgICAgc3RhY2tMYWJlbDogdGhpcy5pbnB1dFZhbHVlLmxlbmd0aCA+IDAKICAgICAgICB9LAogICAgICAgIG9uOiB7CiAgICAgICAgICAuLi50aGlzLnFMaXN0ZW5lcnMsCiAgICAgICAgICBmb2N1czogdGhpcy5fX29uRGlhbG9nRmllbGRGb2N1cywKICAgICAgICAgIGJsdXI6IHRoaXMuX19vbkRpYWxvZ0ZpZWxkQmx1cgogICAgICAgIH0sCiAgICAgICAgc2NvcGVkU2xvdHM6IHsKICAgICAgICAgIC4uLnRoaXMuJHNjb3BlZFNsb3RzLAogICAgICAgICAgcmF3Q29udHJvbDogKCkgPT4gdGhpcy5fX2dldENvbnRyb2woaCwgdHJ1ZSksCiAgICAgICAgICBiZWZvcmU6IHZvaWQgMCwKICAgICAgICAgIGFmdGVyOiB2b2lkIDAKICAgICAgICB9CiAgICAgIH0pXTsKICAgICAgdGhpcy5tZW51ID09PSB0cnVlICYmIGNvbnRlbnQucHVzaChoKCdkaXYnLCB7CiAgICAgICAga2V5OiAndmlydE1lbnUnLAogICAgICAgIHJlZjogJ21lbnVDb250ZW50JywKICAgICAgICBzdGF0aWNDbGFzczogJ2NvbCBzY3JvbGwnLAogICAgICAgIGNsYXNzOiB0aGlzLm1lbnVDb250ZW50Q2xhc3MsCiAgICAgICAgc3R5bGU6IHRoaXMucG9wdXBDb250ZW50U3R5bGUsCiAgICAgICAgYXR0cnM6IHRoaXMubGlzdGJveEF0dHJzLAogICAgICAgIG9uOiBjYWNoZSh0aGlzLCAndmlydE1lbnUnLCB7CiAgICAgICAgICBjbGljazogcHJldmVudCwKICAgICAgICAgICcmc2Nyb2xsJzogdGhpcy5fX29uVmlydHVhbFNjcm9sbEV2dAogICAgICAgIH0pCiAgICAgIH0sIHRoaXMuX19nZXRPcHRpb25zKGgpKSk7CiAgICAgIHJldHVybiBoKFFEaWFsb2csIHsKICAgICAgICBrZXk6ICdkaWFsb2cnLAogICAgICAgIHJlZjogJ2RpYWxvZycsCiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgIHZhbHVlOiB0aGlzLmRpYWxvZywKICAgICAgICAgIGRhcms6IHRoaXMuaXNPcHRpb25zRGFyaywKICAgICAgICAgIHBvc2l0aW9uOiB0aGlzLnVzZUlucHV0ID09PSB0cnVlID8gJ3RvcCcgOiB2b2lkIDAsCiAgICAgICAgICB0cmFuc2l0aW9uU2hvdzogdGhpcy50cmFuc2l0aW9uU2hvd0NvbXB1dGVkLAogICAgICAgICAgdHJhbnNpdGlvbkhpZGU6IHRoaXMudHJhbnNpdGlvbkhpZGUKICAgICAgICB9LAogICAgICAgIG9uOiBjYWNoZSh0aGlzLCAnZGlhbG9nJywgewogICAgICAgICAgJ2JlZm9yZS1oaWRlJzogdGhpcy5fX29uRGlhbG9nQmVmb3JlSGlkZSwKICAgICAgICAgIGhpZGU6IHRoaXMuX19vbkRpYWxvZ0hpZGUsCiAgICAgICAgICBzaG93OiB0aGlzLl9fb25EaWFsb2dTaG93CiAgICAgICAgfSkKICAgICAgfSwgW2goJ2RpdicsIHsKICAgICAgICBzdGF0aWNDbGFzczogJ3Etc2VsZWN0X19kaWFsb2cnICsgKHRoaXMuaXNPcHRpb25zRGFyayA9PT0gdHJ1ZSA/ICcgcS1zZWxlY3RfX2RpYWxvZy0tZGFyayBxLWRhcmsnIDogJycpICsgKHRoaXMuZGlhbG9nRmllbGRGb2N1c2VkID09PSB0cnVlID8gJyBxLXNlbGVjdF9fZGlhbG9nLS1mb2N1c2VkJyA6ICcnKQogICAgICB9LCBjb250ZW50KV0pOwogICAgfSwKICAgIF9fb25EaWFsb2dCZWZvcmVIaWRlKCkgewogICAgICBpZiAodGhpcy51c2VJbnB1dCAhPT0gdHJ1ZSB8fCB0aGlzLiRxLnBsYXRmb3JtLmlzLmRlc2t0b3AgPT09IHRydWUpIHsKICAgICAgICB0aGlzLiRyZWZzLmRpYWxvZy5fX3JlZm9jdXNUYXJnZXQgPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcucS1maWVsZF9fbmF0aXZlID4gW3RhYmluZGV4XTpsYXN0LWNoaWxkJyk7CiAgICAgIH0KICAgICAgdGhpcy5mb2N1c2VkID0gZmFsc2U7CiAgICAgIHRoaXMuZGlhbG9nRmllbGRGb2N1c2VkID0gZmFsc2U7CiAgICB9LAogICAgX19vbkRpYWxvZ0hpZGUoZSkgewogICAgICBpZiAodGhpcy4kcS5wbGF0Zm9ybS5pcy5kZXNrdG9wICE9PSB0cnVlKSB7CiAgICAgICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCk7CiAgICAgIH0KICAgICAgdGhpcy5oaWRlUG9wdXAoKTsKICAgICAgdGhpcy5mb2N1c2VkID09PSBmYWxzZSAmJiB0aGlzLiRlbWl0KCdibHVyJywgZSk7CiAgICAgIHRoaXMuX19yZXNldElucHV0VmFsdWUoKTsKICAgIH0sCiAgICBfX29uRGlhbG9nU2hvdygpIHsKICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50OwogICAgICAvLyBJRSBjYW4gaGF2ZSBudWxsIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQKICAgICAgaWYgKChlbCA9PT0gbnVsbCB8fCBlbC5pZCAhPT0gdGhpcy50YXJnZXRVaWQpICYmIHRoaXMuJHJlZnMudGFyZ2V0ICE9PSBlbCAmJiB0aGlzLiRyZWZzLnRhcmdldCAhPT0gdm9pZCAwKSB7CiAgICAgICAgdGhpcy4kcmVmcy50YXJnZXQuZm9jdXMoKTsKICAgICAgfQogICAgICB0aGlzLl9fc2V0VmlydHVhbFNjcm9sbFNpemUoKTsKICAgIH0sCiAgICBfX2Nsb3NlTWVudSgpIHsKICAgICAgaWYgKHRoaXMuX19vcHRpb25TY29wZUNhY2hlICE9PSB2b2lkIDApIHsKICAgICAgICB0aGlzLl9fb3B0aW9uU2NvcGVDYWNoZS5vcHRpb25FbHMgPSBbXTsKICAgICAgfQogICAgICBpZiAodGhpcy5kaWFsb2cgPT09IHRydWUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5vcHRpb25JbmRleCA9IC0xOwogICAgICBpZiAodGhpcy5tZW51ID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy5tZW51ID0gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuZm9jdXNlZCA9PT0gZmFsc2UpIHsKICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5maWx0ZXJJZCk7CiAgICAgICAgdGhpcy5maWx0ZXJJZCA9IHZvaWQgMDsKICAgICAgICBpZiAodGhpcy5pbm5lckxvYWRpbmcgPT09IHRydWUpIHsKICAgICAgICAgIHRoaXMuJGVtaXQoJ2ZpbHRlci1hYm9ydCcpOwogICAgICAgICAgdGhpcy5pbm5lckxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuaW5uZXJMb2FkaW5nSW5kaWNhdG9yID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgc2hvd1BvcHVwKGUpIHsKICAgICAgaWYgKHRoaXMuZWRpdGFibGUgIT09IHRydWUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuaGFzRGlhbG9nID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy5fX29uQ29udHJvbEZvY3VzaW4oZSk7CiAgICAgICAgdGhpcy5kaWFsb2cgPSB0cnVlOwogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIHRoaXMuX19mb2N1cygpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuX19mb2N1cygpOwogICAgICB9CiAgICAgIGlmICh0aGlzLnFMaXN0ZW5lcnMuZmlsdGVyICE9PSB2b2lkIDApIHsKICAgICAgICB0aGlzLmZpbHRlcih0aGlzLmlucHV0VmFsdWUpOwogICAgICB9IGVsc2UgaWYgKHRoaXMubm9PcHRpb25zICE9PSB0cnVlIHx8IHRoaXMuJHNjb3BlZFNsb3RzWyduby1vcHRpb24nXSAhPT0gdm9pZCAwKSB7CiAgICAgICAgdGhpcy5tZW51ID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIGhpZGVQb3B1cCgpIHsKICAgICAgdGhpcy5kaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5fX2Nsb3NlTWVudSgpOwogICAgfSwKICAgIF9fcmVzZXRJbnB1dFZhbHVlKCkgewogICAgICB0aGlzLnVzZUlucHV0ID09PSB0cnVlICYmIHRoaXMudXBkYXRlSW5wdXRWYWx1ZSh0aGlzLm11bHRpcGxlICE9PSB0cnVlICYmIHRoaXMuZmlsbElucHV0ID09PSB0cnVlICYmIHRoaXMuaW5uZXJWYWx1ZS5sZW5ndGggPiAwID8gdGhpcy5nZXRPcHRpb25MYWJlbCh0aGlzLmlubmVyVmFsdWVbMF0pIHx8ICcnIDogJycsIHRydWUsIHRydWUpOwogICAgfSwKICAgIF9fdXBkYXRlTWVudShzaG93KSB7CiAgICAgIGxldCBvcHRpb25JbmRleCA9IC0xOwogICAgICBpZiAoc2hvdyA9PT0gdHJ1ZSkgewogICAgICAgIGlmICh0aGlzLmlubmVyVmFsdWUubGVuZ3RoID4gMCkgewogICAgICAgICAgY29uc3QgdmFsID0gdGhpcy5nZXRPcHRpb25WYWx1ZSh0aGlzLmlubmVyVmFsdWVbMF0pOwogICAgICAgICAgb3B0aW9uSW5kZXggPSB0aGlzLm9wdGlvbnMuZmluZEluZGV4KHYgPT4gaXNEZWVwRXF1YWwodGhpcy5nZXRPcHRpb25WYWx1ZSh2KSwgdmFsKSk7CiAgICAgICAgfQogICAgICAgIHRoaXMuX19yZXNldFZpcnR1YWxTY3JvbGwob3B0aW9uSW5kZXgpOwogICAgICB9CiAgICAgIHRoaXMuc2V0T3B0aW9uSW5kZXgob3B0aW9uSW5kZXgpOwogICAgfSwKICAgIF9fb25QcmVSZW5kZXIoKSB7CiAgICAgIHRoaXMuaGFzRGlhbG9nID0gdGhpcy4kcS5wbGF0Zm9ybS5pcy5tb2JpbGUgIT09IHRydWUgJiYgdGhpcy5iZWhhdmlvciAhPT0gJ2RpYWxvZycgPyBmYWxzZSA6IHRoaXMuYmVoYXZpb3IgIT09ICdtZW51JyAmJiAodGhpcy51c2VJbnB1dCA9PT0gdHJ1ZSA/IHRoaXMuJHNjb3BlZFNsb3RzWyduby1vcHRpb24nXSAhPT0gdm9pZCAwIHx8IHRoaXMucUxpc3RlbmVycy5maWx0ZXIgIT09IHZvaWQgMCB8fCB0aGlzLm5vT3B0aW9ucyA9PT0gZmFsc2UgOiB0cnVlKTsKICAgICAgdGhpcy50cmFuc2l0aW9uU2hvd0NvbXB1dGVkID0gdGhpcy5oYXNEaWFsb2cgPT09IHRydWUgJiYgdGhpcy51c2VJbnB1dCA9PT0gdHJ1ZSAmJiB0aGlzLiRxLnBsYXRmb3JtLmlzLmlvcyA9PT0gdHJ1ZSA/ICdmYWRlJyA6IHRoaXMudHJhbnNpdGlvblNob3c7CiAgICB9LAogICAgX19vblBvc3RSZW5kZXIoKSB7CiAgICAgIGlmICh0aGlzLmRpYWxvZyA9PT0gZmFsc2UgJiYgdGhpcy4kcmVmcy5tZW51ICE9PSB2b2lkIDApIHsKICAgICAgICB0aGlzLiRyZWZzLm1lbnUudXBkYXRlUG9zaXRpb24oKTsKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZU1lbnVQb3NpdGlvbigpIHsKICAgICAgdGhpcy5fX29uUG9zdFJlbmRlcigpOwogICAgfQogIH0sCiAgYmVmb3JlTW91bnQoKSB7CiAgICB0aGlzLl9fb3B0aW9uU2NvcGVDYWNoZSA9IHsKICAgICAgb3B0aW9uU2xvdDogdGhpcy4kc2NvcGVkU2xvdHMub3B0aW9uLAogICAgICBvcHRpb25zOiBbXSwKICAgICAgb3B0aW9uRWxzOiBbXQogICAgfTsKICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLl9fb3B0aW9uU2NvcGVDYWNoZSA9IHZvaWQgMDsKICAgIGNsZWFyVGltZW91dCh0aGlzLmlucHV0VGltZXIpOwogIH0KfSk7"},{"version":3,"names":["Vue","QField","QIcon","QChip","QItem","QItemSection","QItemLabel","QMenu","QDialog","isDeepEqual","stop","prevent","stopAndPrevent","normalizeToInterval","shouldIgnoreKey","isKeyCode","mergeSlot","cache","FormFieldMixin","VirtualScroll","CompositionMixin","ListenersMixin","validateNewValueMode","v","includes","reEscapeList","extend","name","mixins","props","value","required","multiple","Boolean","displayValue","String","Number","displayValueSanitize","dropdownIcon","options","type","Array","default","optionValue","Function","optionLabel","optionDisable","hideSelected","hideDropdownIcon","fillInput","maxValues","optionsDense","optionsDark","optionsSelectedClass","optionsSanitize","optionsCover","menuShrink","menuAnchor","menuSelf","menuOffset","popupContentClass","popupContentStyle","Object","useInput","useChips","newValueMode","validator","mapOptions","emitValue","inputDebounce","inputClass","inputStyle","tabindex","autocomplete","transitionShow","transitionHide","behavior","virtualScrollItemSize","data","menu","dialog","optionIndex","inputValue","dialogFieldFocused","watch","innerValue","handler","val","innerValueCache","innerLoading","hasValue","userInputValue","__resetInputValue","filter","immediate","show","__updateMenu","virtualScrollLength","newLength","oldLength","__resetVirtualScroll","$nextTick","computed","isOptionsDark","isDark","isArray","length","fieldClass","computedInputClass","menuContentClass","virtualScrollHorizontal","mapNull","values","map","__getOption","noOptions","selectedString","opt","getOptionLabel","join","ariaCurrentValue","sanitizeFn","sanitize","displayAsText","some","computedTabindex","focused","selectedScope","i","index","selected","removeAtIndex","__removeAtIndexAndFocus","toggleOption","optionScope","from","to","virtualScrollSliceRange","optionEls","__optionScopeCache","slice","disable","isOptionDisabled","itemProps","clickable","active","activeClass","computedOptionsSelectedClass","manualFocus","dense","dark","itemAttrs","role","id","targetUid","isOptionSelected","itemEvents","click","$q","platform","is","desktop","mousemove","setOptionIndex","option","dropdownArrowIcon","iconSet","arrow","dropdown","squaredMenu","outlined","standout","borderless","rounded","color","innerOptionsValue","getOptionValue","__getPropValueFn","fn","args","apply","inputControlEvents","on","input","__onInput","change","__onChange","keydown","__onTargetKeydown","keyup","__onTargetAutocomplete","keypress","__onTargetKeypress","focus","__selectInputText","e","hasDialog","compositionstart","compositionupdate","compositionend","__onComposition","virtualScrollItemSizeComputed","comboboxAttrs","attrs","label","readonly","listboxAttrs","methods","getEmittingOptionValue","model","$emit","splice","__focus","add","unique","updateInputValue","push","keepOpen","editable","optValue","document","activeElement","blur","hidePopup","$refs","target","findIndex","moveOptionSelection","offset","skipInputValue","cancelAnimationFrame","moveAnimationFrame","requestAnimationFrame","scrollTo","__setInputValue","defaultInputValue","find","propName","defaultVal","select","__onTargetKeyup","keyCode","clearTimeout","inputTimer","needle","toLocaleLowerCase","findFn","extractFn","indexOf","fillFn","afterFilter","__clearValue","newValueModeValid","qListeners","tabShouldSelect","shiftKey","__closeMenu","showPopup","virtualScrollSliceSizeComputed","Math","max","min","view","optionsLength","searchBuffer","searchBufferExp","Date","now","key","altKey","ctrlKey","metaKey","char","keyRepeat","searchRe","RegExp","split","l","test","done","mode","__getVirtualScrollEl","menuContent","__portal","$el","__getVirtualScrollTarget","__getSelection","h","$scopedSlots","scope","concat","removable","textColor","remove","staticClass","domProps","__getControl","fromDialog","child","isTarget","__getInput","ref","autofocus","nameProp","opts","qAttrs","__getOptions","optionSlot","__padVirtualScroll","__getInnerAppend","loading","innerLoadingIndicator","style","class","maxlength","disabled","qComposing","setTimeout","noFiltering","internal","keepClosed","afterUpdateFn","filterId","afterFn","__getControlEvents","focusout","__onControlFocusout","focusin","__onControlFocusin","__onControlPopupShow","hasPopupOpen","__getControlChild","__getMenu","fit","cover","anchor","self","contentClass","contentStyle","noParentEvent","noRefocus","noFocus","square","separateClosePopup","__onVirtualScrollEvt","__onMenuShow","__setVirtualScrollSize","__onDialogFieldFocus","window","pageXOffset","scrollX","body","scrollLeft","__onDialogFieldBlur","__getDialog","content","$props","for","filled","itemAligned","stackLabel","scopedSlots","rawControl","before","after","position","transitionShowComputed","__onDialogBeforeHide","hide","__onDialogHide","__onDialogShow","__refocusTarget","querySelector","el","__onPreRender","mobile","ios","__onPostRender","updatePosition","updateMenuPosition","beforeMount","beforeDestroy"],"sources":["/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/quasar/src/components/select/QSelect.js"],"sourcesContent":["import Vue from 'vue'\n\nimport QField from '../field/QField.js'\nimport QIcon from '../icon/QIcon.js'\nimport QChip from '../chip/QChip.js'\n\nimport QItem from '../item/QItem.js'\nimport QItemSection from '../item/QItemSection.js'\nimport QItemLabel from '../item/QItemLabel.js'\n\nimport QMenu from '../menu/QMenu.js'\nimport QDialog from '../dialog/QDialog.js'\n\nimport { isDeepEqual } from '../../utils/is.js'\nimport { stop, prevent, stopAndPrevent } from '../../utils/event.js'\nimport { normalizeToInterval } from '../../utils/format.js'\nimport { shouldIgnoreKey, isKeyCode } from '../../utils/private/key-composition.js'\nimport { mergeSlot } from '../../utils/private/slot.js'\nimport cache from '../../utils/private/cache.js'\n\nimport { FormFieldMixin } from '../../mixins/form.js'\nimport VirtualScroll from '../../mixins/virtual-scroll.js'\nimport CompositionMixin from '../../mixins/composition.js'\nimport ListenersMixin from '../../mixins/listeners.js'\n\nconst validateNewValueMode = v => ['add', 'add-unique', 'toggle'].includes(v)\nconst reEscapeList = '.*+?^${}()|[]\\\\'\n\nexport default Vue.extend({\n  name: 'QSelect',\n\n  mixins: [\n    QField,\n    VirtualScroll,\n    CompositionMixin,\n    FormFieldMixin,\n    ListenersMixin\n  ],\n\n  props: {\n    value: {\n      required: true\n    },\n\n    multiple: Boolean,\n\n    displayValue: [String, Number],\n    displayValueSanitize: Boolean,\n    dropdownIcon: String,\n\n    options: {\n      type: Array,\n      default: () => []\n    },\n\n    optionValue: [Function, String],\n    optionLabel: [Function, String],\n    optionDisable: [Function, String],\n\n    hideSelected: Boolean,\n    hideDropdownIcon: Boolean,\n    fillInput: Boolean,\n\n    maxValues: [Number, String],\n\n    optionsDense: Boolean,\n    optionsDark: {\n      type: Boolean,\n      default: null\n    },\n    optionsSelectedClass: String,\n    optionsSanitize: Boolean,\n\n    optionsCover: Boolean,\n\n    menuShrink: Boolean,\n    menuAnchor: String,\n    menuSelf: String,\n    menuOffset: Array,\n\n    popupContentClass: String,\n    popupContentStyle: [String, Array, Object],\n\n    useInput: Boolean,\n    useChips: Boolean,\n\n    newValueMode: {\n      type: String,\n      validator: validateNewValueMode\n    },\n\n    mapOptions: Boolean,\n    emitValue: Boolean,\n\n    inputDebounce: {\n      type: [Number, String],\n      default: 500\n    },\n\n    inputClass: [Array, String, Object],\n    inputStyle: [Array, String, Object],\n\n    tabindex: {\n      type: [String, Number],\n      default: 0\n    },\n\n    autocomplete: String,\n\n    transitionShow: String,\n    transitionHide: String,\n\n    behavior: {\n      type: String,\n      validator: v => ['default', 'menu', 'dialog'].includes(v),\n      default: 'default'\n    },\n\n    virtualScrollItemSize: {\n      type: [ Number, String ],\n      default: void 0\n    }\n  },\n\n  data () {\n    return {\n      menu: false,\n      dialog: false,\n      optionIndex: -1,\n      inputValue: '',\n      dialogFieldFocused: false\n    }\n  },\n\n  watch: {\n    innerValue: {\n      handler (val) {\n        this.innerValueCache = val\n\n        if (\n          this.useInput === true &&\n          this.fillInput === true &&\n          this.multiple !== true &&\n          // Prevent re-entering in filter while filtering\n          // Also prevent clearing inputValue while filtering\n          this.innerLoading !== true &&\n          ((this.dialog !== true && this.menu !== true) || this.hasValue !== true)\n        ) {\n          this.userInputValue !== true && this.__resetInputValue()\n          if (this.dialog === true || this.menu === true) {\n            this.filter('')\n          }\n        }\n      },\n      immediate: true\n    },\n\n    fillInput () {\n      this.__resetInputValue()\n    },\n\n    menu (show) {\n      this.__updateMenu(show)\n    },\n\n    virtualScrollLength (newLength, oldLength) {\n      if (this.menu === true && this.innerLoading === false) {\n        this.__resetVirtualScroll(-1, true)\n\n        this.$nextTick(() => {\n          if (this.menu === true && this.innerLoading === false) {\n            if (newLength > oldLength) {\n              this.__resetVirtualScroll()\n            }\n            else {\n              this.__updateMenu(true)\n            }\n          }\n        })\n      }\n    }\n  },\n\n  computed: {\n    isOptionsDark () {\n      return this.optionsDark === null\n        ? this.isDark\n        : this.optionsDark\n    },\n\n    virtualScrollLength () {\n      return Array.isArray(this.options)\n        ? this.options.length\n        : 0\n    },\n\n    fieldClass () {\n      return `q-select q-field--auto-height q-select--with${this.useInput !== true ? 'out' : ''}-input` +\n        ` q-select--with${this.useChips !== true ? 'out' : ''}-chips` +\n        ` q-select--${this.multiple === true ? 'multiple' : 'single'}`\n    },\n\n    computedInputClass () {\n      if (this.hideSelected === true || this.innerValue.length === 0) {\n        return this.inputClass\n      }\n\n      return this.inputClass === void 0\n        ? 'q-field__input--padding'\n        : [this.inputClass, 'q-field__input--padding']\n    },\n\n    menuContentClass () {\n      return (this.virtualScrollHorizontal === true ? 'q-virtual-scroll--horizontal' : '') +\n        (this.popupContentClass ? ' ' + this.popupContentClass : '')\n    },\n\n    innerValue () {\n      const\n        mapNull = this.mapOptions === true && this.multiple !== true,\n        val = this.value !== void 0 && (this.value !== null || mapNull === true)\n          ? (this.multiple === true && Array.isArray(this.value) ? this.value : [ this.value ])\n          : []\n\n      if (this.mapOptions === true && Array.isArray(this.options) === true) {\n        const cache = this.mapOptions === true && this.innerValueCache !== void 0\n          ? this.innerValueCache\n          : []\n        const values = val.map(v => this.__getOption(v, cache))\n\n        return this.value === null && mapNull === true\n          ? values.filter(v => v !== null)\n          : values\n      }\n\n      return val\n    },\n\n    noOptions () {\n      return this.virtualScrollLength === 0\n    },\n\n    selectedString () {\n      return this.innerValue\n        .map(opt => this.getOptionLabel(opt))\n        .join(', ')\n    },\n\n    ariaCurrentValue () {\n      return this.displayValue !== void 0\n        ? this.displayValue\n        : this.selectedString\n    },\n\n    sanitizeFn () {\n      return this.optionsSanitize === true\n        ? () => true\n        : opt => opt !== void 0 && opt !== null && opt.sanitize === true\n    },\n\n    displayAsText () {\n      return this.displayValueSanitize === true || (\n        this.displayValue === void 0 && (\n          this.optionsSanitize === true ||\n          this.innerValue.some(this.sanitizeFn)\n        )\n      )\n    },\n\n    computedTabindex () {\n      return this.focused === true ? this.tabindex : -1\n    },\n\n    selectedScope () {\n      return this.innerValue.map((opt, i) => ({\n        index: i,\n        opt,\n        sanitize: this.sanitizeFn(opt),\n        selected: true,\n        removeAtIndex: this.__removeAtIndexAndFocus,\n        toggleOption: this.toggleOption,\n        tabindex: this.computedTabindex\n      }))\n    },\n\n    optionScope () {\n      if (this.virtualScrollLength === 0) {\n        return []\n      }\n\n      const { from, to } = this.virtualScrollSliceRange\n      const { options, optionEls } = this.__optionScopeCache\n\n      return this.options.slice(from, to).map((opt, i) => {\n        const disable = this.isOptionDisabled(opt)\n        const index = from + i\n\n        const itemProps = {\n          clickable: true,\n          active: false,\n          activeClass: this.computedOptionsSelectedClass,\n          manualFocus: true,\n          focused: false,\n          disable,\n          tabindex: -1,\n          dense: this.optionsDense,\n          dark: this.isOptionsDark\n        }\n\n        const itemAttrs = {\n          role: 'option',\n          id: `${this.targetUid}_${index}`\n        }\n\n        if (disable !== true) {\n          this.isOptionSelected(opt) === true && (itemProps.active = true)\n          itemAttrs['aria-selected'] = itemProps.active === true ? 'true' : 'false'\n\n          this.optionIndex === index && (itemProps.focused = true)\n        }\n\n        const itemEvents = {\n          click: () => { this.toggleOption(opt) }\n        }\n\n        if (this.$q.platform.is.desktop === true) {\n          itemEvents.mousemove = () => { this.menu === true && this.setOptionIndex(index) }\n        }\n\n        const option = {\n          index,\n          opt,\n          sanitize: this.sanitizeFn(opt),\n          selected: itemProps.active,\n          focused: itemProps.focused,\n          toggleOption: this.toggleOption,\n          setOptionIndex: this.setOptionIndex,\n          itemProps,\n          itemAttrs\n        }\n\n        if (options[i] === void 0 || isDeepEqual(option, options[i]) !== true) {\n          options[i] = option\n          optionEls[i] = void 0\n        }\n\n        return {\n          ...option,\n          itemEvents\n        }\n      })\n    },\n\n    dropdownArrowIcon () {\n      return this.dropdownIcon !== void 0\n        ? this.dropdownIcon\n        : this.$q.iconSet.arrow.dropdown\n    },\n\n    squaredMenu () {\n      return this.optionsCover === false &&\n        this.outlined !== true &&\n        this.standout !== true &&\n        this.borderless !== true &&\n        this.rounded !== true\n    },\n\n    computedOptionsSelectedClass () {\n      return this.optionsSelectedClass !== void 0\n        ? this.optionsSelectedClass\n        : (this.color !== void 0 ? `text-${this.color}` : '')\n    },\n\n    innerOptionsValue () {\n      return this.innerValue.map(opt => this.getOptionValue(opt))\n    },\n\n    // returns method to get value of an option;\n    // takes into account 'option-value' prop\n    getOptionValue () {\n      return this.__getPropValueFn('optionValue', 'value')\n    },\n\n    // returns method to get label of an option;\n    // takes into account 'option-label' prop\n    getOptionLabel () {\n      return this.__getPropValueFn('optionLabel', 'label')\n    },\n\n    // returns method to tell if an option is disabled;\n    // takes into account 'option-disable' prop\n    isOptionDisabled () {\n      const fn = this.__getPropValueFn('optionDisable', 'disable')\n      return (...args) => fn.apply(null, args) === true\n    },\n\n    inputControlEvents () {\n      const on = {\n        input: this.__onInput,\n        // Safari < 10.2 & UIWebView doesn't fire compositionend when\n        // switching focus before confirming composition choice\n        // this also fixes the issue where some browsers e.g. iOS Chrome\n        // fires \"change\" instead of \"input\" on autocomplete.\n        change: this.__onChange,\n        keydown: this.__onTargetKeydown,\n        keyup: this.__onTargetAutocomplete,\n        keypress: this.__onTargetKeypress,\n        focus: this.__selectInputText,\n        click: e => {\n          this.hasDialog === true && stop(e)\n        }\n      }\n\n      on.compositionstart = on.compositionupdate = on.compositionend = this.__onComposition\n\n      return on\n    },\n\n    virtualScrollItemSizeComputed () {\n      return this.virtualScrollItemSize === void 0\n        ? (this.optionsDense === true ? 24 : 48)\n        : this.virtualScrollItemSize\n    },\n\n    comboboxAttrs () {\n      const attrs = {\n        tabindex: this.tabindex,\n        role: 'combobox',\n        'aria-label': this.label,\n        'aria-readonly': this.readonly === true ? 'true' : 'false',\n        'aria-autocomplete': this.useInput === true ? 'list' : 'none',\n        'aria-expanded': this.menu === true ? 'true' : 'false',\n        'aria-controls': `${this.targetUid}_lb`\n      }\n\n      if (this.optionIndex >= 0) {\n        attrs['aria-activedescendant'] = `${this.targetUid}_${this.optionIndex}`\n      }\n\n      return attrs\n    },\n\n    listboxAttrs () {\n      return {\n        id: `${this.targetUid}_lb`,\n        role: 'listbox',\n        'aria-multiselectable': this.multiple === true ? 'true' : 'false'\n      }\n    }\n  },\n\n  methods: {\n    getEmittingOptionValue (opt) {\n      return this.emitValue === true\n        ? this.getOptionValue(opt)\n        : opt\n    },\n\n    removeAtIndex (index) {\n      if (index > -1 && index < this.innerValue.length) {\n        if (this.multiple === true) {\n          const model = this.value.slice()\n          this.$emit('remove', { index, value: model.splice(index, 1)[0] })\n          this.$emit('input', model)\n        }\n        else {\n          this.$emit('input', null)\n        }\n      }\n    },\n\n    __removeAtIndexAndFocus (index) {\n      this.removeAtIndex(index)\n      this.__focus()\n    },\n\n    add (opt, unique) {\n      const val = this.getEmittingOptionValue(opt)\n\n      if (this.multiple !== true) {\n        this.fillInput === true && this.updateInputValue(\n          this.getOptionLabel(opt),\n          true,\n          true\n        )\n\n        this.$emit('input', val)\n        return\n      }\n\n      if (this.innerValue.length === 0) {\n        this.$emit('add', { index: 0, value: val })\n        this.$emit('input', this.multiple === true ? [ val ] : val)\n        return\n      }\n\n      if (unique === true && this.isOptionSelected(opt) === true) {\n        return\n      }\n\n      if (this.maxValues !== void 0 && this.value.length >= this.maxValues) {\n        return\n      }\n\n      const model = this.value.slice()\n\n      this.$emit('add', { index: model.length, value: val })\n      model.push(val)\n      this.$emit('input', model)\n    },\n\n    toggleOption (opt, keepOpen) {\n      if (this.editable !== true || opt === void 0 || this.isOptionDisabled(opt) === true) {\n        return\n      }\n\n      const optValue = this.getOptionValue(opt)\n\n      if (this.multiple !== true) {\n        if (keepOpen !== true) {\n          this.updateInputValue(\n            this.fillInput === true ? this.getOptionLabel(opt) : '',\n            true,\n            true\n          )\n\n          this.dialogFieldFocused = false\n          document.activeElement.blur()\n\n          this.hidePopup()\n        }\n\n        this.$refs.target !== void 0 && this.$refs.target.focus()\n\n        if (\n          this.innerValue.length === 0 ||\n          isDeepEqual(this.getOptionValue(this.innerValue[0]), optValue) !== true\n        ) {\n          this.$emit('input', this.emitValue === true ? optValue : opt)\n        }\n        return\n      }\n\n      (this.hasDialog !== true || this.dialogFieldFocused === true) && this.__focus()\n\n      this.__selectInputText()\n\n      if (this.innerValue.length === 0) {\n        const val = this.emitValue === true ? optValue : opt\n        this.$emit('add', { index: 0, value: val })\n        this.$emit('input', this.multiple === true ? [ val ] : val)\n        return\n      }\n\n      const\n        model = this.value.slice(),\n        index = this.innerOptionsValue.findIndex(v => isDeepEqual(v, optValue))\n\n      if (index > -1) {\n        this.$emit('remove', { index, value: model.splice(index, 1)[0] })\n      }\n      else {\n        if (this.maxValues !== void 0 && model.length >= this.maxValues) {\n          return\n        }\n\n        const val = this.emitValue === true ? optValue : opt\n\n        this.$emit('add', { index: model.length, value: val })\n        model.push(val)\n      }\n\n      this.$emit('input', model)\n    },\n\n    setOptionIndex (index) {\n      if (this.$q.platform.is.desktop !== true) { return }\n\n      const val = index > -1 && index < this.virtualScrollLength\n        ? index\n        : -1\n\n      if (this.optionIndex !== val) {\n        this.optionIndex = val\n      }\n    },\n\n    moveOptionSelection (offset = 1, skipInputValue) {\n      if (this.menu === true) {\n        let index = this.optionIndex\n        do {\n          index = normalizeToInterval(\n            index + offset,\n            -1,\n            this.virtualScrollLength - 1\n          )\n        }\n        while (index !== -1 && index !== this.optionIndex && this.isOptionDisabled(this.options[index]) === true)\n\n        if (this.optionIndex !== index) {\n          cancelAnimationFrame(this.moveAnimationFrame)\n          this.moveAnimationFrame = requestAnimationFrame(() => {\n            this.setOptionIndex(index)\n            this.scrollTo(index)\n\n            if (skipInputValue !== true && this.useInput === true && this.fillInput === true) {\n              this.__setInputValue(index >= 0\n                ? this.getOptionLabel(this.options[index])\n                : this.defaultInputValue\n              )\n            }\n          })\n        }\n      }\n    },\n\n    __getOption (value, innerValueCache) {\n      const fn = opt => isDeepEqual(this.getOptionValue(opt), value)\n      return this.options.find(fn) || innerValueCache.find(fn) || value\n    },\n\n    __getPropValueFn (propName, defaultVal) {\n      const val = this[propName] !== void 0\n        ? this[propName]\n        : defaultVal\n\n      return typeof val === 'function'\n        ? val\n        : opt => (opt !== null && typeof opt === 'object' && val in opt ? opt[ val ] : opt)\n    },\n\n    isOptionSelected (opt) {\n      const val = this.getOptionValue(opt)\n      return this.innerOptionsValue.find(v => isDeepEqual(v, val)) !== void 0\n    },\n\n    __selectInputText (e) {\n      if (\n        this.useInput === true &&\n        this.$refs.target !== void 0 &&\n        (e === void 0 || (this.$refs.target === e.target && e.target.value === this.selectedString))\n      ) {\n        this.$refs.target.select()\n      }\n    },\n\n    __onTargetKeyup (e) {\n      // if ESC and we have an opened menu\n      // then stop propagation (might be caught by a QDialog\n      // and so it will also close the QDialog, which is wrong)\n      if (isKeyCode(e, 27) === true && this.menu === true) {\n        stop(e)\n        // on ESC we need to close the dialog also\n        this.hidePopup()\n        this.__resetInputValue()\n      }\n\n      this.$emit('keyup', e)\n    },\n\n    __onTargetAutocomplete (e) {\n      const { value } = e.target\n\n      if (e.keyCode !== void 0) {\n        this.__onTargetKeyup(e)\n        return\n      }\n\n      e.target.value = ''\n      clearTimeout(this.inputTimer)\n      this.__resetInputValue()\n\n      if (typeof value === 'string' && value.length > 0) {\n        const needle = value.toLocaleLowerCase()\n        const findFn = extractFn => {\n          const option = this.options.find(opt => extractFn(opt).toLocaleLowerCase() === needle)\n\n          if (option === void 0) {\n            return false\n          }\n\n          if (this.innerValue.indexOf(option) === -1) {\n            this.toggleOption(option)\n          }\n          else {\n            this.hidePopup()\n          }\n\n          return true\n        }\n        const fillFn = afterFilter => {\n          if (findFn(this.getOptionValue) === true) {\n            return\n          }\n          if (findFn(this.getOptionLabel) === true || afterFilter === true) {\n            return\n          }\n\n          this.filter(value, true, () => fillFn(true))\n        }\n\n        fillFn()\n      }\n      else {\n        this.__clearValue(e)\n      }\n    },\n\n    __onTargetKeypress (e) {\n      this.$emit('keypress', e)\n    },\n\n    __onTargetKeydown (e) {\n      this.$emit('keydown', e)\n\n      if (shouldIgnoreKey(e) === true) {\n        return\n      }\n\n      const newValueModeValid = this.inputValue.length > 0 &&\n        (this.newValueMode !== void 0 || this.qListeners['new-value'] !== void 0)\n      const tabShouldSelect = e.shiftKey !== true &&\n        this.multiple !== true &&\n        (this.optionIndex > -1 || newValueModeValid === true)\n\n      // escape\n      if (e.keyCode === 27) {\n        prevent(e) // prevent clearing the inputValue\n        return\n      }\n\n      // tab\n      if (e.keyCode === 9 && tabShouldSelect === false) {\n        this.__closeMenu()\n        return\n      }\n\n      if (e.target === void 0 || e.target.id !== this.targetUid) { return }\n\n      // down\n      if (\n        e.keyCode === 40 &&\n        this.innerLoading !== true &&\n        this.menu === false\n      ) {\n        stopAndPrevent(e)\n        this.showPopup()\n        return\n      }\n\n      // backspace\n      if (\n        e.keyCode === 8 &&\n        this.hideSelected !== true &&\n        this.inputValue.length === 0\n      ) {\n        if (this.multiple === true && Array.isArray(this.value)) {\n          this.removeAtIndex(this.value.length - 1)\n        }\n        else if (this.multiple !== true && this.value !== null) {\n          this.$emit('input', null)\n        }\n        return\n      }\n\n      // home, end - 36, 35\n      if (\n        (e.keyCode === 35 || e.keyCode === 36) &&\n        (typeof this.inputValue !== 'string' || this.inputValue.length === 0)\n      ) {\n        stopAndPrevent(e)\n        this.optionIndex = -1\n        this.moveOptionSelection(e.keyCode === 36 ? 1 : -1, this.multiple)\n      }\n\n      // pg up, pg down - 33, 34\n      if (\n        (e.keyCode === 33 || e.keyCode === 34) &&\n        this.virtualScrollSliceSizeComputed !== void 0\n      ) {\n        stopAndPrevent(e)\n        this.optionIndex = Math.max(\n          -1,\n          Math.min(\n            this.virtualScrollLength,\n            this.optionIndex + (e.keyCode === 33 ? -1 : 1) * this.virtualScrollSliceSizeComputed.view\n          )\n        )\n        this.moveOptionSelection(e.keyCode === 33 ? 1 : -1, this.multiple)\n      }\n\n      // up, down\n      if (e.keyCode === 38 || e.keyCode === 40) {\n        stopAndPrevent(e)\n        this.moveOptionSelection(e.keyCode === 38 ? -1 : 1, this.multiple)\n      }\n\n      const optionsLength = this.virtualScrollLength\n\n      // clear search buffer if expired\n      if (this.searchBuffer === void 0 || this.searchBufferExp < Date.now()) {\n        this.searchBuffer = ''\n      }\n\n      // keyboard search when not having use-input\n      if (\n        optionsLength > 0 &&\n        this.useInput !== true &&\n        e.key !== void 0 &&\n        e.key.length === 1 && // printable char\n        e.altKey === false && // not kbd shortcut\n        e.ctrlKey === false && // not kbd shortcut\n        e.metaKey === false && // not kbd shortcut, especially on macOS with Command key\n        (e.keyCode !== 32 || this.searchBuffer.length > 0) // space in middle of search\n      ) {\n        this.menu !== true && this.showPopup(e)\n\n        const\n          char = e.key.toLocaleLowerCase(),\n          keyRepeat = this.searchBuffer.length === 1 && this.searchBuffer[0] === char\n\n        this.searchBufferExp = Date.now() + 1500\n        if (keyRepeat === false) {\n          stopAndPrevent(e)\n          this.searchBuffer += char\n        }\n\n        const searchRe = new RegExp('^' + this.searchBuffer.split('').map(l => reEscapeList.indexOf(l) > -1 ? '\\\\' + l : l).join('.*'), 'i')\n\n        let index = this.optionIndex\n\n        if (keyRepeat === true || index < 0 || searchRe.test(this.getOptionLabel(this.options[index])) !== true) {\n          do {\n            index = normalizeToInterval(index + 1, -1, optionsLength - 1)\n          }\n          while (index !== this.optionIndex && (\n            this.isOptionDisabled(this.options[index]) === true ||\n            searchRe.test(this.getOptionLabel(this.options[index])) !== true\n          ))\n        }\n\n        if (this.optionIndex !== index) {\n          this.$nextTick(() => {\n            this.setOptionIndex(index)\n            this.scrollTo(index)\n\n            if (index >= 0 && this.useInput === true && this.fillInput === true) {\n              this.__setInputValue(this.getOptionLabel(this.options[index]))\n            }\n          })\n        }\n\n        return\n      }\n\n      // enter, space (when not using use-input and not in search), or tab (when not using multiple and option selected)\n      // same target is checked above\n      if (\n        e.keyCode !== 13 &&\n        (e.keyCode !== 32 || this.useInput === true || this.searchBuffer !== '') &&\n        (e.keyCode !== 9 || tabShouldSelect === false)\n      ) { return }\n\n      e.keyCode !== 9 && stopAndPrevent(e)\n\n      if (this.optionIndex > -1 && this.optionIndex < optionsLength) {\n        this.toggleOption(this.options[this.optionIndex])\n        return\n      }\n\n      if (newValueModeValid === true) {\n        const done = (val, mode) => {\n          if (mode) {\n            if (validateNewValueMode(mode) !== true) {\n              return\n            }\n          }\n          else {\n            mode = this.newValueMode\n          }\n\n          if (val === void 0 || val === null) {\n            return\n          }\n\n          this.updateInputValue('', this.multiple !== true, true)\n\n          this[mode === 'toggle' ? 'toggleOption' : 'add'](\n            val,\n            mode === 'add-unique'\n          )\n\n          if (this.multiple !== true) {\n            this.$refs.target !== void 0 && this.$refs.target.focus()\n            this.hidePopup()\n          }\n        }\n\n        if (this.qListeners['new-value'] !== void 0) {\n          this.$emit('new-value', this.inputValue, done)\n        }\n        else {\n          done(this.inputValue)\n        }\n\n        if (this.multiple !== true) {\n          return\n        }\n      }\n\n      if (this.menu === true) {\n        this.__closeMenu()\n      }\n      else if (this.innerLoading !== true) {\n        this.showPopup()\n      }\n    },\n\n    __getVirtualScrollEl () {\n      return this.hasDialog === true\n        ? this.$refs.menuContent\n        : (\n          this.$refs.menu !== void 0 && this.$refs.menu.__portal !== void 0\n            ? this.$refs.menu.__portal.$el\n            : void 0\n        )\n    },\n\n    __getVirtualScrollTarget () {\n      return this.__getVirtualScrollEl()\n    },\n\n    __getSelection (h) {\n      if (this.hideSelected === true) {\n        return []\n      }\n\n      if (this.$scopedSlots['selected-item'] !== void 0) {\n        return this.selectedScope.map(scope => this.$scopedSlots['selected-item'](scope)).slice()\n      }\n\n      if (this.$scopedSlots.selected !== void 0) {\n        return [].concat(this.$scopedSlots.selected())\n      }\n\n      if (this.useChips === true) {\n        return this.selectedScope.map((scope, i) => h(QChip, {\n          key: 'rem#' + i,\n          props: {\n            removable: this.editable === true && this.isOptionDisabled(scope.opt) !== true,\n            dense: true,\n            textColor: this.color,\n            tabindex: this.computedTabindex\n          },\n          on: cache(this, 'rem#' + i, {\n            remove () { scope.removeAtIndex(i) }\n          })\n        }, [\n          h('span', {\n            staticClass: 'ellipsis',\n            domProps: {\n              [scope.sanitize === true ? 'textContent' : 'innerHTML']: this.getOptionLabel(scope.opt)\n            }\n          })\n        ]))\n      }\n\n      return [\n        h('span', {\n          domProps: {\n            [this.displayAsText ? 'textContent' : 'innerHTML']: this.ariaCurrentValue\n          }\n        })\n      ]\n    },\n\n    __getControl (h, fromDialog) {\n      const child = this.__getSelection(h)\n      const isTarget = fromDialog === true || this.dialog !== true || this.hasDialog !== true\n\n      if (this.useInput === true) {\n        child.push(this.__getInput(h, fromDialog, isTarget))\n      }\n      // there can be only one (when dialog is opened the control in dialog should be target)\n      else if (this.editable === true) {\n        const attrs = isTarget === true ? this.comboboxAttrs : void 0\n\n        child.push(\n          h('input', {\n            ref: isTarget === true ? 'target' : void 0,\n            key: 'd_t',\n            staticClass: 'q-select__focus-target',\n            attrs: {\n              id: isTarget === true ? this.targetUid : void 0,\n              readonly: true,\n              'data-autofocus': (fromDialog === true ? isTarget === true : this.autofocus) || void 0,\n              ...attrs\n            },\n            on: cache(this, 'f-tget', {\n              keydown: this.__onTargetKeydown,\n              keyup: this.__onTargetKeyup,\n              keypress: this.__onTargetKeypress\n            })\n          })\n        )\n\n        if (isTarget === true && typeof this.autocomplete === 'string' && this.autocomplete.length > 0) {\n          child.push(\n            h('input', {\n              key: 'autoinp',\n              staticClass: 'q-select__autocomplete-input',\n              domProps: { value: this.ariaCurrentValue },\n              attrs: { autocomplete: this.autocomplete, tabindex: -1 },\n              on: cache(this, 'autoinp', {\n                keyup: this.__onTargetAutocomplete\n              })\n            })\n          )\n        }\n      }\n\n      if (this.nameProp !== void 0 && this.disable !== true && this.innerOptionsValue.length > 0) {\n        const opts = this.innerOptionsValue.map(value => h('option', {\n          attrs: { value, selected: true }\n        }))\n\n        child.push(\n          h('select', {\n            staticClass: 'hidden',\n            attrs: {\n              name: this.nameProp,\n              multiple: this.multiple\n            }\n          }, opts)\n        )\n      }\n\n      const attrs = this.useInput === true || isTarget !== true ? void 0 : this.qAttrs\n\n      return h('div', { staticClass: 'q-field__native row items-center', attrs }, child)\n    },\n\n    __getOptions (h) {\n      if (this.menu !== true) {\n        return void 0\n      }\n\n      if (this.noOptions === true) {\n        return this.$scopedSlots['no-option'] !== void 0\n          ? this.$scopedSlots['no-option']({ inputValue: this.inputValue })\n          : void 0\n      }\n\n      if (\n        this.$scopedSlots.option !== void 0 &&\n        this.__optionScopeCache.optionSlot !== this.$scopedSlots.option\n      ) {\n        this.__optionScopeCache.optionSlot = this.$scopedSlots.option\n        this.__optionScopeCache.optionEls = []\n      }\n\n      const fn = this.$scopedSlots.option !== void 0\n        ? this.$scopedSlots.option\n        : scope => h(QItem, {\n          key: scope.index,\n          props: scope.itemProps,\n          attrs: scope.itemAttrs,\n          on: scope.itemEvents\n        }, [\n          h(QItemSection, [\n            h(QItemLabel, {\n              domProps: {\n                [scope.sanitize === true ? 'textContent' : 'innerHTML']: this.getOptionLabel(scope.opt)\n              }\n            })\n          ])\n        ])\n\n      const { optionEls } = this.__optionScopeCache\n\n      let options = this.__padVirtualScroll(h, 'div', this.optionScope.map((scope, i) => {\n        if (optionEls[i] === void 0) {\n          optionEls[i] = fn(scope)\n        }\n\n        return optionEls[i]\n      }))\n\n      if (this.$scopedSlots['before-options'] !== void 0) {\n        options = this.$scopedSlots['before-options']().concat(options)\n      }\n\n      return mergeSlot(options, this, 'after-options')\n    },\n\n    __getInnerAppend (h) {\n      return this.loading !== true && this.innerLoadingIndicator !== true && this.hideDropdownIcon !== true\n        ? [\n          h(QIcon, {\n            staticClass: 'q-select__dropdown-icon' + (this.menu === true ? ' rotate-180' : ''),\n            props: { name: this.dropdownArrowIcon }\n          })\n        ]\n        : null\n    },\n\n    __getInput (h, fromDialog, isTarget) {\n      const attrs = isTarget === true ? { ...this.comboboxAttrs, ...this.qAttrs } : void 0\n\n      const options = {\n        ref: isTarget === true ? 'target' : void 0,\n        key: 'i_t',\n        staticClass: 'q-field__input q-placeholder col',\n        style: this.inputStyle,\n        class: this.computedInputClass,\n        domProps: { value: this.inputValue !== void 0 ? this.inputValue : '' },\n        attrs: {\n          // required for Android in order to show ENTER key when in form\n          type: 'search',\n          ...attrs,\n          id: isTarget === true ? this.targetUid : void 0,\n          maxlength: this.maxlength, // this is converted to prop by QField\n          autocomplete: this.autocomplete,\n          'data-autofocus': (fromDialog === true ? isTarget === true : this.autofocus) || void 0,\n          disabled: this.disable === true,\n          readonly: this.readonly === true\n        },\n        on: this.inputControlEvents\n      }\n\n      if (fromDialog !== true && this.hasDialog === true) {\n        options.staticClass += ' no-pointer-events'\n      }\n\n      return h('input', options)\n    },\n\n    __onChange (e) {\n      this.__onComposition(e)\n    },\n\n    __onInput (e) {\n      clearTimeout(this.inputTimer)\n\n      if (e && e.target && e.target.qComposing === true) {\n        return\n      }\n\n      this.__setInputValue(e.target.value || '')\n      // mark it here as user input so that if updateInputValue is called\n      // before filter is called the indicator is reset\n      this.userInputValue = true\n      this.defaultInputValue = this.inputValue\n\n      if (\n        this.focused !== true &&\n        (this.hasDialog !== true || this.dialogFieldFocused === true)\n      ) {\n        this.__focus()\n      }\n\n      if (this.qListeners.filter !== void 0) {\n        this.inputTimer = setTimeout(() => {\n          this.filter(this.inputValue)\n        }, this.inputDebounce)\n      }\n    },\n\n    __setInputValue (inputValue) {\n      if (this.inputValue !== inputValue) {\n        this.inputValue = inputValue\n        this.$emit('input-value', inputValue)\n      }\n    },\n\n    updateInputValue (val, noFiltering, internal) {\n      this.userInputValue = internal !== true\n\n      if (this.useInput === true) {\n        this.__setInputValue(val)\n\n        if (noFiltering === true || internal !== true) {\n          this.defaultInputValue = val\n        }\n\n        noFiltering !== true && this.filter(val)\n      }\n    },\n\n    filter (val, keepClosed, afterUpdateFn) {\n      if (this.qListeners.filter === void 0 || (keepClosed !== true && this.focused !== true)) {\n        return\n      }\n\n      if (this.innerLoading === true) {\n        this.$emit('filter-abort')\n      }\n      else {\n        this.innerLoading = true\n        this.innerLoadingIndicator = true\n      }\n\n      if (\n        val !== '' &&\n        this.multiple !== true &&\n        this.innerValue.length > 0 &&\n        this.userInputValue !== true &&\n        val === this.getOptionLabel(this.innerValue[0])\n      ) {\n        val = ''\n      }\n\n      const filterId = setTimeout(() => {\n        this.menu === true && (this.menu = false)\n      }, 10)\n      clearTimeout(this.filterId)\n      this.filterId = filterId\n\n      this.$emit(\n        'filter',\n        val,\n        (fn, afterFn) => {\n          if ((keepClosed === true || this.focused === true) && this.filterId === filterId) {\n            clearTimeout(this.filterId)\n\n            typeof fn === 'function' && fn()\n\n            // hide indicator to allow arrow to animate\n            this.innerLoadingIndicator = false\n\n            this.$nextTick(() => {\n              this.innerLoading = false\n\n              if (this.editable === true) {\n                if (keepClosed === true) {\n                  this.menu === true && this.hidePopup()\n                }\n                else if (this.menu === true) {\n                  this.__updateMenu(true)\n                }\n                else {\n                  this.menu = true\n                  this.hasDialog === true && (this.dialog = true)\n                }\n              }\n\n              typeof afterFn === 'function' && this.$nextTick(() => { afterFn(this) })\n              typeof afterUpdateFn === 'function' && this.$nextTick(() => { afterUpdateFn(this) })\n            })\n          }\n        },\n        () => {\n          if (this.focused === true && this.filterId === filterId) {\n            clearTimeout(this.filterId)\n            this.innerLoading = false\n            this.innerLoadingIndicator = false\n          }\n          this.menu === true && (this.menu = false)\n        }\n      )\n    },\n\n    __getControlEvents () {\n      const focusout = e => {\n        this.__onControlFocusout(e, () => {\n          this.__resetInputValue()\n          this.__closeMenu()\n        })\n      }\n\n      return {\n        focusin: this.__onControlFocusin,\n        focusout,\n        'popup-show': this.__onControlPopupShow,\n        'popup-hide': e => {\n          e !== void 0 && stop(e)\n          this.$emit('popup-hide', e)\n          this.hasPopupOpen = false\n          focusout(e)\n        },\n        click: e => {\n          // label from QField will propagate click on the input (except IE)\n          prevent(e)\n\n          if (this.hasDialog !== true && this.menu === true) {\n            this.__closeMenu()\n            this.$refs.target !== void 0 && this.$refs.target.focus()\n            return\n          }\n\n          this.showPopup(e)\n        }\n      }\n    },\n\n    __getControlChild (h) {\n      if (\n        this.editable !== false && (\n          this.dialog === true || // dialog always has menu displayed, so need to render it\n          this.noOptions !== true ||\n          this.$scopedSlots['no-option'] !== void 0\n        )\n      ) {\n        return this[`__get${this.hasDialog === true ? 'Dialog' : 'Menu'}`](h)\n      }\n    },\n\n    __getMenu (h) {\n      return h(QMenu, {\n        key: 'menu',\n        ref: 'menu',\n        props: {\n          value: this.menu,\n          fit: this.menuShrink !== true,\n          cover: this.optionsCover === true && this.noOptions !== true && this.useInput !== true,\n          anchor: this.menuAnchor,\n          self: this.menuSelf,\n          offset: this.menuOffset,\n          contentClass: this.menuContentClass,\n          contentStyle: this.popupContentStyle,\n          dark: this.isOptionsDark,\n          noParentEvent: true,\n          noRefocus: true,\n          noFocus: true,\n          square: this.squaredMenu,\n          transitionShow: this.transitionShow,\n          transitionHide: this.transitionHide,\n          separateClosePopup: true\n        },\n        attrs: this.listboxAttrs,\n        on: cache(this, 'menu', {\n          '&scroll': this.__onVirtualScrollEvt,\n          'before-hide': this.__closeMenu,\n          show: this.__onMenuShow\n        })\n      }, this.__getOptions(h))\n    },\n\n    __onMenuShow () {\n      this.__setVirtualScrollSize()\n    },\n\n    __onDialogFieldFocus (e) {\n      stop(e)\n      this.$refs.target !== void 0 && this.$refs.target.focus()\n      this.dialogFieldFocused = true\n      window.scrollTo(window.pageXOffset || window.scrollX || document.body.scrollLeft || 0, 0)\n    },\n\n    __onDialogFieldBlur (e) {\n      stop(e)\n      this.$nextTick(() => {\n        this.dialogFieldFocused = false\n      })\n    },\n\n    __getDialog (h) {\n      const content = [\n        h(QField, {\n          staticClass: `col-auto ${this.fieldClass}`,\n          props: {\n            ...this.$props,\n            for: this.targetUid,\n            dark: this.isOptionsDark,\n            square: true,\n            filled: true,\n            itemAligned: false,\n            loading: this.innerLoadingIndicator,\n            stackLabel: this.inputValue.length > 0\n          },\n          on: {\n            ...this.qListeners,\n            focus: this.__onDialogFieldFocus,\n            blur: this.__onDialogFieldBlur\n          },\n          scopedSlots: {\n            ...this.$scopedSlots,\n            rawControl: () => this.__getControl(h, true),\n            before: void 0,\n            after: void 0\n          }\n        })\n      ]\n\n      this.menu === true && content.push(\n        h('div', {\n          key: 'virtMenu',\n          ref: 'menuContent',\n          staticClass: 'col scroll',\n          class: this.menuContentClass,\n          style: this.popupContentStyle,\n          attrs: this.listboxAttrs,\n          on: cache(this, 'virtMenu', {\n            click: prevent,\n            '&scroll': this.__onVirtualScrollEvt\n          })\n        }, this.__getOptions(h))\n      )\n\n      return h(QDialog, {\n        key: 'dialog',\n        ref: 'dialog',\n        props: {\n          value: this.dialog,\n          dark: this.isOptionsDark,\n          position: this.useInput === true ? 'top' : void 0,\n          transitionShow: this.transitionShowComputed,\n          transitionHide: this.transitionHide\n        },\n        on: cache(this, 'dialog', {\n          'before-hide': this.__onDialogBeforeHide,\n          hide: this.__onDialogHide,\n          show: this.__onDialogShow\n        })\n      }, [\n        h('div', {\n          staticClass: 'q-select__dialog' +\n            (this.isOptionsDark === true ? ' q-select__dialog--dark q-dark' : '') +\n            (this.dialogFieldFocused === true ? ' q-select__dialog--focused' : '')\n        }, content)\n      ])\n    },\n\n    __onDialogBeforeHide () {\n      if (this.useInput !== true || this.$q.platform.is.desktop === true) {\n        this.$refs.dialog.__refocusTarget = this.$el.querySelector('.q-field__native > [tabindex]:last-child')\n      }\n      this.focused = false\n      this.dialogFieldFocused = false\n    },\n\n    __onDialogHide (e) {\n      if (this.$q.platform.is.desktop !== true) {\n        document.activeElement.blur()\n      }\n      this.hidePopup()\n      this.focused === false && this.$emit('blur', e)\n      this.__resetInputValue()\n    },\n\n    __onDialogShow () {\n      const el = document.activeElement\n      // IE can have null document.activeElement\n      if (\n        (el === null || el.id !== this.targetUid) &&\n        this.$refs.target !== el &&\n        this.$refs.target !== void 0\n      ) {\n        this.$refs.target.focus()\n      }\n\n      this.__setVirtualScrollSize()\n    },\n\n    __closeMenu () {\n      if (this.__optionScopeCache !== void 0) {\n        this.__optionScopeCache.optionEls = []\n      }\n\n      if (this.dialog === true) {\n        return\n      }\n\n      this.optionIndex = -1\n\n      if (this.menu === true) {\n        this.menu = false\n      }\n\n      if (this.focused === false) {\n        clearTimeout(this.filterId)\n        this.filterId = void 0\n\n        if (this.innerLoading === true) {\n          this.$emit('filter-abort')\n          this.innerLoading = false\n          this.innerLoadingIndicator = false\n        }\n      }\n    },\n\n    showPopup (e) {\n      if (this.editable !== true) {\n        return\n      }\n\n      if (this.hasDialog === true) {\n        this.__onControlFocusin(e)\n        this.dialog = true\n        this.$nextTick(() => {\n          this.__focus()\n        })\n      }\n      else {\n        this.__focus()\n      }\n\n      if (this.qListeners.filter !== void 0) {\n        this.filter(this.inputValue)\n      }\n      else if (this.noOptions !== true || this.$scopedSlots['no-option'] !== void 0) {\n        this.menu = true\n      }\n    },\n\n    hidePopup () {\n      this.dialog = false\n      this.__closeMenu()\n    },\n\n    __resetInputValue () {\n      this.useInput === true && this.updateInputValue(\n        this.multiple !== true && this.fillInput === true && this.innerValue.length > 0\n          ? this.getOptionLabel(this.innerValue[0]) || ''\n          : '',\n        true,\n        true\n      )\n    },\n\n    __updateMenu (show) {\n      let optionIndex = -1\n\n      if (show === true) {\n        if (this.innerValue.length > 0) {\n          const val = this.getOptionValue(this.innerValue[0])\n          optionIndex = this.options.findIndex(v => isDeepEqual(this.getOptionValue(v), val))\n        }\n\n        this.__resetVirtualScroll(optionIndex)\n      }\n\n      this.setOptionIndex(optionIndex)\n    },\n\n    __onPreRender () {\n      this.hasDialog = this.$q.platform.is.mobile !== true && this.behavior !== 'dialog'\n        ? false\n        : this.behavior !== 'menu' && (\n          this.useInput === true\n            ? this.$scopedSlots['no-option'] !== void 0 || this.qListeners.filter !== void 0 || this.noOptions === false\n            : true\n        )\n\n      this.transitionShowComputed = this.hasDialog === true && this.useInput === true && this.$q.platform.is.ios === true\n        ? 'fade'\n        : this.transitionShow\n    },\n\n    __onPostRender () {\n      if (this.dialog === false && this.$refs.menu !== void 0) {\n        this.$refs.menu.updatePosition()\n      }\n    },\n\n    updateMenuPosition () {\n      this.__onPostRender()\n    }\n  },\n\n  beforeMount () {\n    this.__optionScopeCache = {\n      optionSlot: this.$scopedSlots.option,\n      options: [],\n      optionEls: []\n    }\n  },\n\n  beforeDestroy () {\n    this.__optionScopeCache = void 0\n    clearTimeout(this.inputTimer)\n  }\n})\n"],"mappings":"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"}]}