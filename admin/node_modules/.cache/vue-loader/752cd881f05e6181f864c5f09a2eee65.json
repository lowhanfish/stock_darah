{"remainingRequest":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/simplephi/Documents/riswan/stock_darah/admin/src/views/1kegiatancsr/list_pengajuan.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/src/views/1kegiatancsr/list_pengajuan.vue","mtime":1757384711862},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/cache-loader/dist/cjs.js","mtime":1758930418112},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/babel-loader/lib/index.js","mtime":1758930419036},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js","mtime":1758930412679},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/cache-loader/dist/cjs.js","mtime":1758930418112},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/vue-loader/lib/index.js","mtime":1758930412640}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgppbXBvcnQgVU1VTSBmcm9tICIuLi8uLi9saWJyYXJ5L3VtdW0uanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CgogICAgICAgICAgICBVTVVNOiBVTVVNLAoKICAgICAgICAgICAgbGlzdF9kYXRhOiBbXSwKCiAgICAgICAgICAgIHN0YXR1czogNCwKICAgICAgICAgICAgbWRsX2FkZDogZmFsc2UsCiAgICAgICAgICAgIG1kbF9lZGl0OiBmYWxzZSwKICAgICAgICAgICAgbWRsX2RlbGV0ZTogZmFsc2UsCiAgICAgICAgICAgIG1kbF9rZW1iYWxpa2FuOiBmYWxzZSwKICAgICAgICAgICAgbWRsX2tldGVyYW5nYW46IGZhbHNlLAogICAgICAgICAgICBtZGxfbGloYXQ6IGZhbHNlLAogICAgICAgICAgICBtZGxfY2F0YXRhbl9hZG1pbjogZmFsc2UsCiAgICAgICAgICAgIGFsZXJ0OiBmYWxzZSwKICAgICAgICAgICAgc2ltcGFuMTogZmFsc2UsCiAgICAgICAgICAgIHNlbGVjdGVkSXRlbToge30sCiAgICAgICAgICAgIGNhcmlfdmFsdWU6ICIiLAogICAgICAgICAgICBwYWdlX2ZpcnN0OiAxLAogICAgICAgICAgICBwYWdlX2xhc3Q6IDEsCiAgICAgICAgICAgIHBhZ2VfbGltaXQ6IDgsCiAgICAgICAgICAgIHRvdGFsOiAwLAogICAgICAgICAgICBtZGxBbWJpbDogZmFsc2UsCiAgICAgICAgICAgIHNlbGVjdGVkUHJvZ3JhbToge30sCiAgICAgICAgICAgIGp1bWxhaEFtYmlsOiAwLAogICAgICAgICAgICBtaXRyYToge30sCiAgICAgICAgICAgIGFtYmlsU2VtdWE6IGZhbHNlLAogICAgICAgICAgICBjYXRhdGFuQW1iaWw6ICcnLAoKICAgICAgICAgICAgdGlwZTogbnVsbCwgLy8gc2ltcGFuIHRpcGUgdXNlcgoKCiAgICAgICAgICAgIGZvcm06IHsKICAgICAgICAgICAgICAgIGJpZGFuZ19jc3JfaWQ6IG51bGwsCiAgICAgICAgICAgICAgICBiaWRhbmdfc3ViX2Nzcl9pZDogbnVsbCwKICAgICAgICAgICAgICAgIG5hbWFfY3NyOiAiIiwKICAgICAgICAgICAgICAgIGRlc2tyaXBzaTogIiIsCiAgICAgICAgICAgICAgICBqdW1sYWg6IG51bGwsCiAgICAgICAgICAgICAgICBzYXR1YW46ICIiLAogICAgICAgICAgICAgICAgbmlsYWk6IG51bGwsCiAgICAgICAgICAgICAgICB0YW5nZ2FsX211bGFpOiAiIiwKICAgICAgICAgICAgICAgIHRhbmdnYWxfc2VsZXNhaTogIiIsCiAgICAgICAgICAgICAgICBrZWNhbWF0YW5faWQ6IG51bGwsCiAgICAgICAgICAgICAgICBkZXNhX2lkOiBudWxsLAogICAgICAgICAgICAgICAgYWxhbWF0OiAiIiwKICAgICAgICAgICAgICAgIGZpbGVfbmFtZTogbnVsbCAgLy8g8J+UuSB1bnR1ayBmaWxlIHVwbG9hZAogICAgICAgICAgICB9LAoKICAgICAgICAgICAgbWl0cmE6IHsKICAgICAgICAgICAgICAgIG5hbWFfcGVydXNhaGFhbjogJycsCiAgICAgICAgICAgICAgICBlbWFpbF9wZXJ1c2FoYWFuOiAnJywKICAgICAgICAgICAgICAgIHRlbHBfcGVydXNhaGFhbjogJycsCiAgICAgICAgICAgICAgICBhbGFtYXRfcGVydXNhaGFhbjogJycsCiAgICAgICAgICAgICAgICBuYW1hX3BqOiAnJywKICAgICAgICAgICAgICAgIGphYmF0YW46ICcnLAogICAgICAgICAgICAgICAgZW1haWxfcGo6ICcnLAogICAgICAgICAgICAgICAgaHBfcGo6ICcnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGxpc3RfYmlkYW5nOiBbXSwKICAgICAgICAgICAgbGlzdF9zdWJfYmlkYW5nOiBbXSwKICAgICAgICAgICAgbGlzdF9rZWNhbWF0YW46IFtdLAogICAgICAgICAgICBsaXN0X2tlY2FtYXRhbl9tYXN0ZXI6IFtdLCAvLyBzaW1wYW4gZGF0YSBhc2xpCiAgICAgICAgICAgIGxpc3RfZGVzYTogW10sCiAgICAgICAgICAgIGxpc3RfZGVzYV9tYXN0ZXI6IFtdLAogICAgICAgICAgICBmaWxlX3BhdGg6IHRoaXMuJHN0b3JlLnN0YXRlLnVybC5VUkxfQVBQICsgInVwbG9hZHMvIiwKCgogICAgICAgICAgICBmaWx0ZXJrdTogewogICAgICAgICAgICAgICAgYmlkYW5nX3VzYWhhX2lkOiAiIiwKICAgICAgICAgICAgICAgIHBlcnVzYWhhYW5faWQ6ICIiLAogICAgICAgICAgICAgICAgYmlkYW5nX2Nzcl9pZDogIiIsCiAgICAgICAgICAgICAgICBiaWRhbmdfc3ViX2Nzcl9pZDogIiIsCiAgICAgICAgICAgICAgICBzdGF0dXNfcGVuZ2FqdWFuOiAiIgogICAgICAgICAgICB9LAoKCiAgICAgICAgICAgIGxpc3RfYmlkYW5nX2ZpbHRlcjogW10sCiAgICAgICAgICAgIGxpc3Rfc3ViX2JpZGFuZ19maWx0ZXI6IFtdLAoKICAgICAgICAgICAgLy8gaGFzaWwgZGF0YSB5YW5nIGRpZmlsdGVyCiAgICAgICAgICAgIGRhdGFWaWV3OiBbXSwKCiAgICAgICAgICAgIGxpc3Rfa2VjYW1hdGFuX2ZpbHRlcjogW10sCiAgICAgICAgICAgIGxpc3RfZGVzYV9maWx0ZXI6IFtdLAoKICAgICAgICAgICAgc3RhdHVzT3B0aW9uczogWwogICAgICAgICAgICAgICAgeyBsYWJlbDogJ1NlbXVhIFN0YXR1cycsIHZhbHVlOiAnJyB9LAogICAgICAgICAgICAgICAgeyBsYWJlbDogJ0RpcHJvc2VzJywgdmFsdWU6IDEgfSwKICAgICAgICAgICAgICAgIHsgbGFiZWw6ICdEaXRlcmltYScsIHZhbHVlOiAyIH0sCiAgICAgICAgICAgICAgICB7IGxhYmVsOiAnRGl0b2xhaycsIHZhbHVlOiAzIH0sCiAgICAgICAgICAgIF0sCgogICAgICAgICAgICBsaXN0X3BlcnVzYWhhYW5fZmlsdGVyOiBbXSwKICAgICAgICAgICAgYmlkYW5nT3B0aW9uczogW10sIC8vIDwtIHViYWggZGFyaSBjb21wdXRlZCBrZSBkYXRhCiAgICAgICAgICAgIGJpZGFuZ1VzYWhhT3B0aW9uczogW10sIC8vIDwtIHViYWggZGFyaSBjb21wdXRlZCBrZSBkYXRhCgogICAgICAgICAgICBtZGxfdXBsb2FkX2V2aWRlbjogZmFsc2UsCiAgICAgICAgICAgIHVwbG9hZERhdGE6IHsKICAgICAgICAgICAgICAgIGlkOiBudWxsLCAgICAgICAgLy8gc2ltcGFuIGlkIHByb2dyYW0KICAgICAgICAgICAgICAgIGtldGVyYW5nYW46ICcnLAogICAgICAgICAgICAgICAgZmlsZTogbnVsbAogICAgICAgICAgICB9LAogICAgICAgICAgICBsaXN0X2RhdGFfYnVrdGk6IFtdLAoKICAgICAgICAgICAgY29sdW1uc19idWt0aTogWwogICAgICAgICAgICAgICAgeyBuYW1lOiAnZm90bycsIGxhYmVsOiAnRm90bycsIGZpZWxkOiAnZmlsZV9uYW1lJyB9LAogICAgICAgICAgICAgICAgeyBuYW1lOiAna2V0ZXJhbmdhbicsIGxhYmVsOiAnS2V0ZXJhbmdhbicsIGZpZWxkOiAna2V0ZXJhbmdhbicgfSwKICAgICAgICAgICAgICAgIHsgbmFtZTogJ2Frc2knLCBsYWJlbDogJ0Frc2knLCBmaWVsZDogJ2Frc2knIH0KICAgICAgICAgICAgXSwKCiAgICAgICAgICAgIG1kbF9saWhhdF9ldmlkZW46IGZhbHNlLAogICAgICAgICAgICBzZWxlY3RlZERhdGE6IG51bGwsIC8vIOKchSB0YW1iYWhrYW4gaW5pCiAgICAgICAgICAgIHNlbGVjdGVkSXRlbUV2aWRlbjogewogICAgICAgICAgICAgICAga2V0ZXJhbmdhbjogJycsCiAgICAgICAgICAgICAgICBmaWxlczogW10KICAgICAgICAgICAgfQoKICAgICAgICB9CgoKICAgIH0sCgoKICAgIG1ldGhvZHM6IHsKCiAgICAgICAgYXN5bmMgbGloYXRFdmlkZW4oaXRlbSkgewogICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh0aGlzLiRzdG9yZS5zdGF0ZS51cmwuTElTVF9QRU5HQUpVQU4gKyAnZ2V0RXZpZGVuP2lkPScgKyBpdGVtLmlkLCB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IGF1dGhvcml6YXRpb246ICJraWtlbnNiYXRhcmEgIiArIGxvY2FsU3RvcmFnZS50b2tlbiB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLmxpc3RfZGF0YV9idWt0aSA9IGF3YWl0IHJlcy5qc29uKCk7CiAgICAgICAgICAgIHRoaXMubWRsX2xpaGF0X2V2aWRlbiA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRhID0gaXRlbTsgLy8g4pyFIHNpbXBhbiBkYXRhIHlnIGRpcGlsaWgKICAgICAgICB9LAoKICAgICAgICBvcGVuVXBsb2FkTW9kYWwoaXRlbSkgewogICAgICAgICAgICB0aGlzLnVwbG9hZERhdGEuaWQgPSBpdGVtLmlkCiAgICAgICAgICAgIHRoaXMudXBsb2FkRGF0YS5rZXRlcmFuZ2FuID0gJycKICAgICAgICAgICAgdGhpcy51cGxvYWREYXRhLmZpbGUgPSBudWxsCiAgICAgICAgICAgIHRoaXMubWRsX3VwbG9hZF9ldmlkZW4gPSB0cnVlCiAgICAgICAgICAgIHRoaXMuZ2V0TGlzdEJ1a3RpKCkKICAgICAgICB9LAoKICAgICAgICBhc3luYyBnZXRMaXN0QnVrdGkoKSB7CiAgICAgICAgICAgIGlmICghdGhpcy51cGxvYWREYXRhLmlkKSByZXR1cm4KICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS51cmwuTElTVF9QRU5HQUpVQU4gKyAnZ2V0RXZpZGVuP2lkPScgKyB0aGlzLnVwbG9hZERhdGEuaWQsCiAgICAgICAgICAgICAgICB7IGhlYWRlcnM6IHsgYXV0aG9yaXphdGlvbjogJ2tpa2Vuc2JhdGFyYSAnICsgbG9jYWxTdG9yYWdlLnRva2VuIH0gfQogICAgICAgICAgICApCiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpCiAgICAgICAgICAgIHRoaXMubGlzdF9kYXRhX2J1a3RpID0gZGF0YQogICAgICAgIH0sCgogICAgICAgIGFzeW5jIGhhcHVzQnVrdGkoaWQpIHsKICAgICAgICAgICAgaWYgKCFjb25maXJtKCJZYWtpbiBoYXB1cyBidWt0aSBpbmk/IikpIHJldHVybgogICAgICAgICAgICBhd2FpdCBmZXRjaCh0aGlzLiRzdG9yZS5zdGF0ZS51cmwuTElTVF9QRU5HQUpVQU4gKyAnZGVsZXRlRXZpZGVuP2lkPScgKyBpZCwgeyBtZXRob2Q6ICdERUxFVEUnIH0pCiAgICAgICAgICAgIHRoaXMuZ2V0TGlzdEJ1a3RpKCkKICAgICAgICB9LAoKICAgICAgICByZXNldFVwbG9hZE1vZGFsKCkgewogICAgICAgICAgICB0aGlzLnVwbG9hZERhdGEua2V0ZXJhbmdhbiA9ICcnCiAgICAgICAgICAgIHRoaXMudXBsb2FkRGF0YS5maWxlID0gbnVsbAogICAgICAgIH0sCgogICAgICAgIGFzeW5jIHN1Ym1pdFVwbG9hZEV2aWRlbigpIHsKICAgICAgICAgICAgaWYgKCF0aGlzLnVwbG9hZERhdGEua2V0ZXJhbmdhbikgewogICAgICAgICAgICAgICAgdGhpcy5Ob3RpZnkoJ0tldGVyYW5nYW4gaGFydXMgZGlpc2knLCAnbmVnYXRpdmUnLCAnd2FybmluZycpCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCF0aGlzLnVwbG9hZERhdGEuZmlsZSkgewogICAgICAgICAgICAgICAgdGhpcy5Ob3RpZnkoJ1BpbGloIDEgZm90byB0ZXJsZWJpaCBkYWh1bHUnLCAnbmVnYXRpdmUnLCAnd2FybmluZycpCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKQogICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2lkJywgdGhpcy51cGxvYWREYXRhLmlkKQogICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2tldGVyYW5nYW4nLCB0aGlzLnVwbG9hZERhdGEua2V0ZXJhbmdhbikKICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgdGhpcy51cGxvYWREYXRhLmZpbGUpICAvLyDwn5SlIGhhcnVzICJmaWxlIgoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHRoaXMuJHN0b3JlLnN0YXRlLnVybC5MSVNUX1BFTkdBSlVBTiArICd1cGxvYWRFdmlkZW4nLCB7CiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiAna2lrZW5zYmF0YXJhICcgKyBsb2NhbFN0b3JhZ2UudG9rZW4KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGJvZHk6IGZvcm1EYXRhCiAgICAgICAgICAgICAgICB9KQoKICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5Ob3RpZnkoJ0J1a3RpIGJlcmhhc2lsIGRpdXBsb2FkJywgJ3Bvc2l0aXZlJywgJ2NoZWNrX2NpcmNsZV9vdXRsaW5lJykKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0VXBsb2FkTW9kYWwoKQogICAgICAgICAgICAgICAgICAgIHRoaXMubWRsX3VwbG9hZF9ldmlkZW4gPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VmlldygpIC8vIHJlZnJlc2ggbGlzdAogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLk5vdGlmeShkYXRhLm1lc3NhZ2UsICduZWdhdGl2ZScsICdlcnJvcl9vdXRsaW5lJykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycikKICAgICAgICAgICAgICAgIHRoaXMuTm90aWZ5KCdUZXJqYWRpIGtlc2FsYWhhbiBzZXJ2ZXInLCAnbmVnYXRpdmUnLCAnZXJyb3Jfb3V0bGluZScpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHByZXZpZXdGaWxlKHJvdykgewogICAgICAgICAgICB3aW5kb3cub3Blbih0aGlzLmZpbGVCYXNlVXJsICsgcm93LmZpbGVfbmFtZSwgJ19ibGFuaycpCiAgICAgICAgfSwKCgoKICAgICAgICBoYXB1c0J1a3RpKGlkKSB7CiAgICAgICAgICAgIGlmICghY29uZmlybSgiWWFraW4gaGFwdXMgYnVrdGkgaW5pPyIpKSByZXR1cm47CgogICAgICAgICAgICBmZXRjaCh0aGlzLiRzdG9yZS5zdGF0ZS51cmwuTElTVF9QRU5HQUpVQU4gKyAicmVtb3ZlRXZpZGVuIiwgewogICAgICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiAia2lrZW5zYmF0YXJhICIgKyBsb2NhbFN0b3JhZ2UudG9rZW4KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGlkIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSkKICAgICAgICAgICAgICAgIC50aGVuKHJlc19kYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAocmVzX2RhdGEuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLk5vdGlmeSgiQnVrdGkgYmVyaGFzaWwgZGloYXB1cyIsICJwb3NpdGl2ZSIsICJjaGVja19jaXJjbGVfb3V0bGluZSIpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldExpc3RCdWt0aSgpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuTm90aWZ5KHJlc19kYXRhLm1lc3NhZ2UgfHwgIkdhZ2FsIGhhcHVzIGJ1a3RpIiwgIm5lZ2F0aXZlIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuTm90aWZ5KCJFcnJvcjogIiArIGVyci5tZXNzYWdlLCAid2FybmluZyIsICJlcnJvciIpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBzZWxlc2Fpa2FuUHJvZ3JhbTogYXN5bmMgZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAvLyBrb25maXJtYXNpIGR1bHUKICAgICAgICAgICAgICAgIHRoaXMubWRsX2xpaGF0X2V2aWRlbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgYXdhaXQgVU1VTS5ub3RpZkFwcHJvdmUoKTsKCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh0aGlzLiRzdG9yZS5zdGF0ZS51cmwuTElTVF9QRU5HQUpVQU4gKyAic2VsZXNhaWthblByb2dyYW0iLCB7CiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgICAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiAia2lrZW5zYmF0YXJhICIgKyBsb2NhbFN0b3JhZ2UudG9rZW4KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgaWQgfSkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlcy5qc29uKCk7CiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLk5vdGlmeSgiUHJvZ3JhbSBiZXJoYXNpbCBkaXNlbGVzYWlrYW4iLCAicG9zaXRpdmUiLCAiY2hlY2tfY2lyY2xlX291dGxpbmUiKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1kbF9saWhhdF9ldmlkZW4gPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFZpZXcoKTsgLy8gcmVmcmVzaCB0YWJlbCB1dGFtYQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLk5vdGlmeShyZXN1bHQubWVzc2FnZSB8fCAiR2FnYWwgbWVueWVsZXNhaWthbiBwcm9ncmFtIiwgIm5lZ2F0aXZlIiwgImVycm9yX291dGxpbmUiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAvLyBrYWxhdSB1c2VyIGJhdGFsIGRpIG5vdGlmQXBwcm92ZSwgZGlhIGp1Z2EgYmFrYWwgbWFzdWsga2Ugc2luaQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOwogICAgICAgICAgICAgICAgdGhpcy5Ob3RpZnkoIkVycm9yOiAiICsgZXJyLm1lc3NhZ2UsICJuZWdhdGl2ZSIsICJlcnJvciIpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgZG93bmxvYWRGaWxlKGZpbGVOYW1lKSB7CiAgICAgICAgICAgIGlmIChmaWxlTmFtZSkgewogICAgICAgICAgICAgICAgd2luZG93Lm9wZW4odGhpcy5maWxlX3BhdGggKyBmaWxlTmFtZSwgIl9ibGFuayIpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgbGloYXRLZXRlcmFuZ2FuOiBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IHsgLi4uaXRlbSB9OwogICAgICAgICAgICB0aGlzLm1kbF9rZXRlcmFuZ2FuID0gdHJ1ZTsgLy8gYnVrYSBtb2RhbCBrZXRlcmFuZ2FuCiAgICAgICAgfSwKCiAgICAgICAgdG9sYWtQZW5nYWp1YW46IGFzeW5jIGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgICAvLyBDYXJpIGRhdGEgc2VzdWFpIGlkIGRhbiBzaW1wYW4gZGkgc2VsZWN0ZWRJdGVtCiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmxpc3RfZGF0YS5maW5kKGQgPT4gZC5pZCA9PT0gaWQpOwogICAgICAgICAgICBpZiAoIWl0ZW0pIHJldHVybjsKCiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtID0geyAuLi5pdGVtLCBjYXRhdGFuX2FkbWluOiAnJyB9OwogICAgICAgICAgICB0aGlzLm1kbF9jYXRhdGFuX2FkbWluID0gdHJ1ZTsgLy8gYnVrYSBtb2RhbAogICAgICAgIH0sCgoKICAgICAgICAvLyBUb21ib2wgRXZhbHVhc2kgZGkgbW9kYWwKICAgICAgICBzdWJtaXRUb2xhazogYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRJdGVtLmNhdGF0YW5fYWRtaW4pIHsKICAgICAgICAgICAgICAgIHRoaXMuTm90aWZ5KCdDYXRhdGFuIGhhcnVzIGRpaXNpJywgJ25lZ2F0aXZlJywgJ3dhcm5pbmcnKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHRoaXMuJHN0b3JlLnN0YXRlLnVybC5MSVNUX1BFTkdBSlVBTiArICJ0b2xha1BlbmdhanVhbiIsIHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246ICJraWtlbnNiYXRhcmEgIiArIGxvY2FsU3RvcmFnZS50b2tlbgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5zZWxlY3RlZEl0ZW0uaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGF0YW5fYWRtaW46IHRoaXMuc2VsZWN0ZWRJdGVtLmNhdGF0YW5fYWRtaW4KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7CgogICAgICAgICAgICAgICAgaWYgKGRhdGEuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuTm90aWZ5KCdQZW5nYWp1YW4gZGl0b2xhaycsICduZWdhdGl2ZScsICdjYW5jZWwnKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFZpZXcoKTsgLy8gcmVmcmVzaCBsaXN0CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZGxfY2F0YXRhbl9hZG1pbiA9IGZhbHNlOyAvLyB0dXR1cCBtb2RhbAogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLk5vdGlmeShkYXRhLm1lc3NhZ2UsICduZWdhdGl2ZScsICdlcnJvcl9vdXRsaW5lJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgICAgICAgICAgICAgIHRoaXMuTm90aWZ5KCdUZXJqYWRpIGtlc2FsYWhhbiBzZXJ2ZXInLCAnbmVnYXRpdmUnLCAnZXJyb3Jfb3V0bGluZScpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgc2VsZWN0RGF0YShpdGVtKSB7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtID0gaXRlbTsKICAgICAgICAgICAgdGhpcy5tZGxfbGloYXQgPSB0cnVlOyAvLyBidWthIG1vZGFsCiAgICAgICAgfSwKCgogICAgICAgIG9uU3RhdHVzQ2hhbmdlKHZhbCkgewogICAgICAgICAgICB0aGlzLmdldFZpZXcoKQogICAgICAgIH0sCgoKICAgICAgICBvbkNoYW5nZUJpZGFuZyh2YWwpIHsKICAgICAgICAgICAgdGhpcy5maWx0ZXJrdS5iaWRhbmdfc3ViX2Nzcl9pZCA9ICIiOyAvLyByZXNldCBzdWItYmlkYW5nCiAgICAgICAgICAgIHRoaXMuZ2V0U3ViQmlkYW5nRmlsdGVyKHZhbCk7CiAgICAgICAgICAgIHRoaXMuZ2V0VmlldygpOyAvLyByZWZyZXNoIGRhdGEKICAgICAgICB9LAoKICAgICAgICBmb3JtYXRSdXBpYWgodmFsdWUpIHsKICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiAiLSI7CiAgICAgICAgICAgIHJldHVybiBuZXcgSW50bC5OdW1iZXJGb3JtYXQoJ2lkLUlEJywgewogICAgICAgICAgICAgICAgc3R5bGU6ICdjdXJyZW5jeScsCiAgICAgICAgICAgICAgICBjdXJyZW5jeTogJ0lEUicsCiAgICAgICAgICAgICAgICBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDAsCiAgICAgICAgICAgICAgICBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDAKICAgICAgICAgICAgfSkuZm9ybWF0KHZhbHVlKTsKICAgICAgICB9LAoKCiAgICAgICAgZ2V0QmlkYW5nKCkgewogICAgICAgICAgICBmZXRjaCh0aGlzLiRzdG9yZS5zdGF0ZS51cmwuVVJMX0RNX0JJRCArICJiaWRhbmciLCB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogImtpa2Vuc2JhdGFyYSAiICsgbG9jYWxTdG9yYWdlLnRva2VuCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSkKICAgICAgICAgICAgICAgIC50aGVuKHJlc19kYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RfYmlkYW5nID0gcmVzX2RhdGEKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBnZXRNaXRyYSh1c2VySWQpIHsKICAgICAgICAgICAgZmV0Y2godGhpcy4kc3RvcmUuc3RhdGUudXJsLktFR0lBVEFOX0NTUiArICJtaXRyYS8iICsgdXNlcklkLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246ICJraWtlbnNiYXRhcmEgIiArIGxvY2FsU3RvcmFnZS50b2tlbgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpCiAgICAgICAgICAgICAgICAudGhlbihyZXNfZGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc19kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5taXRyYSA9IHJlc19kYXRhLmRhdGEKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLk5vdGlmeSgiR2FnYWwgbWVuZ2FtYmlsIGRhdGEgbWl0cmEiLCAibmVnYXRpdmUiLCAiZXJyb3Jfb3V0bGluZSIpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIuKdjCBFcnJvcjoiLCBlcnIpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5Ob3RpZnkoIlRlcmphZGkga2VzYWxhaGFuIHNlcnZlciIsICJuZWdhdGl2ZSIsICJlcnJvcl9vdXRsaW5lIikKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgfSwKCgogICAgICAgIGdldFN1YkJpZGFuZygpIHsKICAgICAgICAgICAgLy8gcmVzZXQgc3ViIGJpZGFuZyBkdWx1IGJpYXIgdGlkYWsgbmVtcGVsCiAgICAgICAgICAgIHRoaXMuZm9ybS5iaWRhbmdfc3ViX2Nzcl9pZCA9IG51bGwKICAgICAgICAgICAgdGhpcy5saXN0X3N1Yl9iaWRhbmcgPSBbXQoKICAgICAgICAgICAgaWYgKCF0aGlzLmZvcm0uYmlkYW5nX2Nzcl9pZCkgewogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZldGNoKHRoaXMuJHN0b3JlLnN0YXRlLnVybC5VUkxfRE1fQklEICsgInN1Yl9iaWRhbmciLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246ICJraWtlbnNiYXRhcmEgIiArIGxvY2FsU3RvcmFnZS50b2tlbgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICBiaWRhbmdfY3NyX2lkOiB0aGlzLmZvcm0uYmlkYW5nX2Nzcl9pZAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKQogICAgICAgICAgICAgICAgLnRoZW4ocmVzX2RhdGEgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdF9zdWJfYmlkYW5nID0gcmVzX2RhdGEKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgfSwKCgoKICAgICAgICAvLyBhbWJpbCBkYXRhIHV0YW1hCiAgICAgICAgZ2V0VmlldygpIHsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzaG9XTG9hZGluZyIpOwogICAgICAgICAgICBmZXRjaCh0aGlzLiRzdG9yZS5zdGF0ZS51cmwuTElTVF9QRU5HQUpVQU4gKyAidmlldyIsIHsKICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogImtpa2Vuc2JhdGFyYSAiICsgbG9jYWxTdG9yYWdlLnRva2VuCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICAgIHN0YXR1c19wZW5nYWp1YW46IHRoaXMuZmlsdGVya3Uuc3RhdHVzX3BlbmdhanVhbiwKICAgICAgICAgICAgICAgICAgICBiaWRhbmdfdXNhaGFfaWQ6IHRoaXMuZmlsdGVya3UuYmlkYW5nX3VzYWhhX2lkLCAgIC8vIPCflI4gZmlsdGVyIHBlcnVzYWhhYW4KICAgICAgICAgICAgICAgICAgICBwZXJ1c2FoYWFuX2lkOiB0aGlzLmZpbHRlcmt1LnBlcnVzYWhhYW5faWQsICAgLy8g8J+UjiBmaWx0ZXIgcGVydXNhaGFhbgogICAgICAgICAgICAgICAgICAgIGJpZGFuZ19jc3JfaWQ6IHRoaXMuZmlsdGVya3UuYmlkYW5nX2Nzcl9pZCwgICAgICAgLy8g8J+UjiBmaWx0ZXIgYmlkYW5nIENTUgogICAgICAgICAgICAgICAgICAgIGJpZGFuZ19zdWJfY3NyX2lkOiB0aGlzLmZpbHRlcmt1LmJpZGFuZ19zdWJfY3NyX2lkLCAvLyDwn5SOIGZpbHRlciBzdWIgYmlkYW5nIENTUgogICAgICAgICAgICAgICAgICAgIGNhcmlfdmFsdWU6IHRoaXMuY2FyaV92YWx1ZSwKICAgICAgICAgICAgICAgICAgICBkYXRhX2tlOiB0aGlzLnBhZ2VfZmlyc3QsCiAgICAgICAgICAgICAgICAgICAgcGFnZV9saW1pdDogdGhpcy5wYWdlX2xpbWl0LAogICAgICAgICAgICAgICAgICAgIHRpcGU6IHRoaXMudGlwZQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKQogICAgICAgICAgICAgICAgLnRoZW4ocmVzX2RhdGEgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChyZXNfZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdF9kYXRhID0gcmVzX2RhdGEuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b3RhbCA9IHJlc19kYXRhLnRvdGFsIHx8IHJlc19kYXRhLmRhdGEubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VfbGFzdCA9IE1hdGguY2VpbCh0aGlzLnRvdGFsIC8gdGhpcy5wYWdlX2xpbWl0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJoaWRlTG9hZGluZyIpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIuKdjCBFcnJvciBnZXRWaWV3OiIsIGVycik7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJoaWRlTG9hZGluZyIpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKCgogICAgICAgIGFwcHJvdmVQZW5nYWp1YW46IGFzeW5jIGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgICBhd2FpdCBVTVVNLm5vdGlmQXBwcm92ZSgpOwogICAgICAgICAgICBmZXRjaCh0aGlzLiRzdG9yZS5zdGF0ZS51cmwuTElTVF9QRU5HQUpVQU4gKyAiYXBwcm92ZVBlbmdhanVhbiIsIHsKICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogImtpa2Vuc2JhdGFyYSAiICsgbG9jYWxTdG9yYWdlLnRva2VuCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBpZCB9KSAvLyBraXJpbSBpZCBzYWphCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSkKICAgICAgICAgICAgICAgIC50aGVuKHJlc19kYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAocmVzX2RhdGEuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLk5vdGlmeSgnUGVuZ2FqdWFuIGRpc2V0dWp1aScsICdwb3NpdGl2ZScsICdjaGVja19jaXJjbGVfb3V0bGluZScpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFZpZXcoKTsgLy8gcmVmcmVzaCBsaXN0CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5Ob3RpZnkocmVzX2RhdGEubWVzc2FnZSwgJ25lZ2F0aXZlJywgJ2Vycm9yX291dGxpbmUnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmVycm9yKGVycikpOwogICAgICAgIH0sCgoKCiAgICAgICAgZ2V0QmlkYW5nRmlsdGVyKCkgewogICAgICAgICAgICBmZXRjaCh0aGlzLiRzdG9yZS5zdGF0ZS51cmwuVVJMX0RNX0JJRCArICJiaWRhbmciLCB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogImtpa2Vuc2JhdGFyYSAiICsgbG9jYWxTdG9yYWdlLnRva2VuCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSkKICAgICAgICAgICAgICAgIC50aGVuKHJlc19kYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmJpZGFuZ09wdGlvbnMgPSBbCiAgICAgICAgICAgICAgICAgICAgICAgIHsgaWQ6ICIiLCB1cmFpYW46ICItLSBTRU1VQSBCSURBTkcgLS0iIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlc19kYXRhLm1hcChiID0+ICh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGIuaWQudG9TdHJpbmcoKSAgLy8gcGFzdGlrYW4gdGlwZSBzYW1hIGRlbmdhbiB2LW1vZGVsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgIF07CiAgICAgICAgICAgICAgICB9KQogICAgICAgIH0sCgogICAgICAgIGdldFN1YkJpZGFuZ0ZpbHRlcigpIHsKICAgICAgICAgICAgdGhpcy5maWx0ZXJrdS5iaWRhbmdfc3ViX2Nzcl9pZCA9IG51bGwKICAgICAgICAgICAgdGhpcy5saXN0X3N1Yl9iaWRhbmdfZmlsdGVyID0gW10KCiAgICAgICAgICAgIGlmICghdGhpcy5maWx0ZXJrdS5iaWRhbmdfY3NyX2lkKSByZXR1cm4KCiAgICAgICAgICAgIGZldGNoKHRoaXMuJHN0b3JlLnN0YXRlLnVybC5VUkxfRE1fQklEICsgInN1Yl9iaWRhbmciLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246ICJraWtlbnNiYXRhcmEgIiArIGxvY2FsU3RvcmFnZS50b2tlbgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICBiaWRhbmdfY3NyX2lkOiB0aGlzLmZpbHRlcmt1LmJpZGFuZ19jc3JfaWQKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSkKICAgICAgICAgICAgICAgIC50aGVuKHJlc19kYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3Rfc3ViX2JpZGFuZ19maWx0ZXIgPSByZXNfZGF0YQogICAgICAgICAgICAgICAgfSkKICAgICAgICB9LAoKCiAgICAgICAgLy8gICA9PT09PT09PT09PT09PT09IEZJTFRFUiBCSURBTkcgVVNBSEEgREFOIFBFUlVTQUhBQU4gPT09PT09PT09PT09PT09PT09CiAgICAgICAgZ2V0QmlkYW5nVXNhaGFGaWx0ZXIoKSB7CiAgICAgICAgICAgIGZldGNoKHRoaXMuJHN0b3JlLnN0YXRlLnVybC5EQVRBX01JVFJBICsgImJpZGFuZyIsIHsKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgYXV0aG9yaXphdGlvbjogImtpa2Vuc2JhdGFyYSAiICsgbG9jYWxTdG9yYWdlLnRva2VuIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKQogICAgICAgICAgICAgICAgLnRoZW4ocmVzX2RhdGEgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuYmlkYW5nVXNhaGFPcHRpb25zID0gWwogICAgICAgICAgICAgICAgICAgICAgICB7IGlkOiAiIiwgdXJhaWFuOiAiLS0gU0VNVUEgQklEQU5HIFVTQUhBIC0tIiB9LAogICAgICAgICAgICAgICAgICAgICAgICAuLi5yZXNfZGF0YQogICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUuZXJyb3IoIuKdjCBFcnJvciBmZXRjaCBiaWRhbmc6IiwgZXJyKSkKICAgICAgICB9LAoKICAgICAgICBvbkNoYW5nZUJpZGFuZ1VzYWhhRmlsdGVyKHZhbCkgewogICAgICAgICAgICB0aGlzLmZpbHRlcmt1LmJpZGFuZ191c2FoYV9pZCA9IHZhbAogICAgICAgICAgICB0aGlzLmZpbHRlcmt1LnBlcnVzYWhhYW5faWQgPSAiIgogICAgICAgICAgICB0aGlzLmdldFBlcnVzYWhhYW5GaWx0ZXIoKQogICAgICAgICAgICB0aGlzLmdldFZpZXcoKQogICAgICAgIH0sCgogICAgICAgIGdldFBlcnVzYWhhYW5GaWx0ZXIoKSB7CiAgICAgICAgICAgIGlmICghdGhpcy5maWx0ZXJrdS5iaWRhbmdfdXNhaGFfaWQpIHsKICAgICAgICAgICAgICAgIHRoaXMubGlzdF9wZXJ1c2FoYWFuX2ZpbHRlciA9IFtdCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZmV0Y2godGhpcy4kc3RvcmUuc3RhdGUudXJsLkRBVEFfTUlUUkEgKyAiYnlCaWRhbmciLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246ICJraWtlbnNiYXRhcmEgIiArIGxvY2FsU3RvcmFnZS50b2tlbgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICBiaWRhbmdfdXNhaGFfaWQ6IHRoaXMuZmlsdGVya3UuYmlkYW5nX3VzYWhhX2lkCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpCiAgICAgICAgICAgICAgICAudGhlbihyZXNfZGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0X3BlcnVzYWhhYW5fZmlsdGVyID0gcmVzX2RhdGEKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCLinYwgRXJyb3IgZmV0Y2ggcGVydXNhaGFhbjoiLCBlcnIpCiAgICAgICAgICAgICAgICB9KQogICAgICAgIH0sCgogICAgICAgIG9uQ2hhbmdlUGVydXNhaGFhbkZpbHRlcih2YWwpIHsKICAgICAgICAgICAgdGhpcy5maWx0ZXJrdS5wZXJ1c2FoYWFuX2lkID0gdmFsCiAgICAgICAgICAgIHRoaXMuZ2V0VmlldygpCiAgICAgICAgfSwKCiAgICAgICAgLy8gICA9PT09PT09PT09PT09PT09IEZJTFRFUiBCSURBTkcgVVNBSEEgREFOIFBFUlVTQUhBQU4gPT09PT09PT09PT09PT09PT09CgoKCiAgICAgICAgc2ltdWxhdGVQcm9ncmVzcyhudW1iZXIpIHsKICAgICAgICAgICAgLy8gd2Ugc2V0IGxvYWRpbmcgc3RhdGUKICAgICAgICAgICAgdGhpc1tgc2ltcGFuJHtudW1iZXJ9YF0gPSB0cnVlCiAgICAgICAgICAgIC8vIHNpbXVsYXRlIGEgZGVsYXkKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyB3ZSdyZSBkb25lLCB3ZSByZXNldCBsb2FkaW5nIHN0YXRlCiAgICAgICAgICAgICAgICB0aGlzW2BzaW1wYW4ke251bWJlcn1gXSA9IGZhbHNlCiAgICAgICAgICAgIH0sIDMwMDApCiAgICAgICAgfSwKCiAgICAgICAgTm90aWZ5OiBmdW5jdGlvbiAobWVzc2FnZSwgcG9zaXRpdmUsIGljb24pIHsKICAgICAgICAgICAgdGhpcy4kcS5ub3RpZnkoewogICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSwKICAgICAgICAgICAgICAgIGNvbG9yOiBwb3NpdGl2ZSwKICAgICAgICAgICAgICAgIGljb246IGljb24sCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcCcsCiAgICAgICAgICAgICAgICB0aW1lb3V0OiA1MDAsCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKCgogICAgICAgIGJ0bl9wcmV2KCkgewogICAgICAgICAgICBpZiAodGhpcy5wYWdlX2ZpcnN0ID4gMSkgdGhpcy5wYWdlX2ZpcnN0LS07CiAgICAgICAgICAgIHRoaXMuZ2V0VmlldygpOwogICAgICAgIH0sCgogICAgICAgIGJ0bl9uZXh0KCkgewogICAgICAgICAgICBpZiAodGhpcy5wYWdlX2ZpcnN0IDwgdGhpcy5wYWdlX2xhc3QpIHRoaXMucGFnZV9maXJzdCsrOwogICAgICAgICAgICB0aGlzLmdldFZpZXcoKTsKICAgICAgICB9LAoKICAgICAgICBjYXJpX2RhdGEoKSB7CiAgICAgICAgICAgIHRoaXMucGFnZV9maXJzdCA9IDE7CiAgICAgICAgICAgIHRoaXMuZ2V0VmlldygpOwogICAgICAgIH0sCgogICAgICAgIGluZGV4aW5nKGluZGV4KSB7CiAgICAgICAgICAgIHJldHVybiAoKHRoaXMucGFnZV9maXJzdCAtIDEpICogdGhpcy5wYWdlX2xpbWl0KSArIGluZGV4OwogICAgICAgIH0sCgogICAgICAgIG9wZW5FZGl0TW9kYWwoaXRlbSkgewogICAgICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IGl0ZW07CgogICAgICAgICAgICAvLyBzZXQgZm9ybQogICAgICAgICAgICB0aGlzLmZvcm0gPSB7IC4uLml0ZW0gfTsKCiAgICAgICAgICAgIC8vIGlzaSBzdWItYmlkYW5nIHNlc3VhaSBiaWRhbmcKICAgICAgICAgICAgaWYgKHRoaXMuZm9ybS5iaWRhbmdfY3NyX2lkKSB7CiAgICAgICAgICAgICAgICB0aGlzLmdldFN1YkJpZGFuZyh0aGlzLmZvcm0uYmlkYW5nX2Nzcl9pZCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIGJ1a2EgbW9kYWwKICAgICAgICAgICAgdGhpcy5tZGxfZWRpdCA9IHRydWU7CiAgICAgICAgfQoKCgogICAgfSwKICAgIG1vdW50ZWQoKSB7CgogICAgICAgIGNvbnN0IGdldF9wcm9maWxlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UucHJvZmlsZSk7CiAgICAgICAgdGhpcy50aXBlID0gTnVtYmVyKGdldF9wcm9maWxlLnByb2ZpbGUuZGJfY3Nya29uc2VsKTsgLy8gYW1iaWwgZGJfY3Nya29uc2VsCgoKICAgICAgICAvLyBzaW1wYW4gZGF0YSBtaXRyYSAoa2FsYXUgeWFuZyBsb2dpbiBtZW1hbmcgbWl0cmEpCiAgICAgICAgdGhpcy5taXRyYSA9IHsKICAgICAgICAgICAgaWQ6IGdldF9wcm9maWxlLl9pZCwKICAgICAgICAgICAgbmFtYTogZ2V0X3Byb2ZpbGUucHJvZmlsZS5uYW1hLAogICAgICAgICAgICB1c2VybmFtZTogZ2V0X3Byb2ZpbGUudXNlcm5hbWUKICAgICAgICB9CgoKICAgICAgICAvLyBqYWxhbmthbiBrZXRpa2EgaGFsYW1hbiBwZXJ0YW1hIGthbGkgZGlidWthCiAgICAgICAgdGhpcy5nZXRWaWV3KCk7CiAgICAgICAgLy8gdGhpcy5nZXREZXNhRmlsdGVyKCk7CiAgICAgICAgdGhpcy5nZXRCaWRhbmcoKTsKICAgICAgICB0aGlzLmdldFN1YkJpZGFuZygpOwogICAgICAgIHRoaXMuZ2V0QmlkYW5nRmlsdGVyKCk7CiAgICAgICAgdGhpcy5nZXRCaWRhbmdVc2FoYUZpbHRlcigpOwogICAgICAgIC8vIHRoaXMuZ2V0U3ViQmlkYW5nRmlsdGVyKCk7CiAgICB9Cn0K"},{"version":3,"sources":["list_pengajuan.vue"],"names":[],"mappings":";;AAsfA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list_pengajuan.vue","sourceRoot":"src/views/1kegiatancsr","sourcesContent":["<template>\n    <div class=\"about \" style=\"padding:15px\">\n        <q-card bordered class=\"my-card\">\n            <q-card-section class=\"main2 text-white\">\n                <div class=\"row items-center q-col-gutter-md\">\n                    <div class=\"col-12 col-md-6\">\n                        <div class=\"text-h6 h_titleHead\">Pengajuan Program Kegiatan CSR</div>\n                    </div>\n\n                    <!-- Filter Status -->\n                    <div class=\"col-12 col-md-2\">\n                        <q-select v-model=\"filterku.status_pengajuan\" :options=\"statusOptions\" outlined dense square\n                            emit-value map-options class=\"bg-white\" @input=\"onStatusChange\" />\n                    </div>\n\n                    <!-- Cari -->\n                    <div class=\"col-12 col-md-4\">\n                        <div class=\"row\">\n                            <q-input v-model=\"cari_value\" @keyup=\"cari_data()\" outlined square dense\n                                class=\"bg-white col q-mr-sm\" />\n\n                        </div>\n                    </div>\n                </div>\n\n            </q-card-section>\n\n        </q-card>\n\n\n        <hr class=\"hrpagin2\">\n\n\n\n\n\n        <div class=\"row q-col-gutter-md\">\n            <!-- Filter Bidang Usaha -->\n            <div class=\"col-12 col-md-6\" v-if=\"tipe === 1 || tipe === 5\">\n                <span class=\"h_lable\">Bidang Usaha</span>\n                <q-select v-model=\"filterku.bidang_usaha_id\" :options=\"bidangUsahaOptions\" option-label=\"uraian\"\n                    option-value=\"id\" emit-value map-options outlined dense class=\"bg-white\"\n                    @input=\"onChangeBidangUsahaFilter\" />\n            </div>\n\n            <!-- Filter Perusahaan -->\n            <div class=\"col-12 col-md-6\" v-if=\"tipe === 1 || tipe === 5\">\n                <span class=\"h_lable\">Perusahaan</span>\n                <q-select v-model=\"filterku.perusahaan_id\" :options=\"list_perusahaan_filter\" option-label=\"nama\"\n                    option-value=\"users_id\" label=\"-- SEMUA PERUSAHAAN --\" emit-value map-options outlined dense\n                    class=\"bg-white\" @input=\"onChangePerusahaanFilter\" />\n            </div>\n\n\n            <!-- Filter Bidang -->\n            <div class=\"col-12 col-md-6\">\n                <span class=\"h_lable\">Bidang CSR</span>\n                <q-select v-model=\"filterku.bidang_csr_id\" :options=\"bidangOptions\" option-label=\"uraian\"\n                    option-value=\"id\" emit-value map-options outlined dense class=\"bg-white\" @input=\"onChangeBidang\" />\n            </div>\n\n            <!-- Filter Sub-Bidang -->\n            <div class=\"col-12 col-md-6\">\n                <span class=\"h_lable\">Sub-Bidang CSR</span>\n                <q-select v-model=\"filterku.bidang_sub_csr_id\" :options=\"list_sub_bidang_filter\" option-label=\"uraian\"\n                    option-value=\"id\" label=\"-- SEMUA SUB-BIDANG --\" emit-value map-options outlined dense\n                    class=\"bg-white\" @input=\"getView\" />\n            </div>\n\n\n        </div>\n        <hr class=\"hrpagin2\">\n\n        <div class=\"tbl_responsive\">\n            <!-- =================================================== KONTENT =========================================================== -->\n            <table width=\"100%\">\n                <tr class=\"h_table_head main1 text-white \">\n                    <th width=\"5%\" class=\"text-center\">No</th>\n                    <th width=\"5%\">Status</th>\n                    <th width=\"20%\">Nama Program</th>\n                    <th width=\"10%\">Kecamatan</th>\n                    <th width=\"5%\">Tanggal Pengajuan</th>\n                    <th width=\"15%\">Mitra/Perusahaan</th>\n                    <th width=\"5%\">Jumlah Pengambilan</th>\n                    <th width=\"5%\">Tersedia</th>\n                    <th width=\"30%\" class=\"text-center\">Act</th>\n                    <!-- <th width=\"30%\">Keterangan</th> -->\n                    <!-- <th width=\"10%\"></th> -->\n                </tr>\n                <tr class=\"h_table_body\" v-for=\"(data, index) in list_data\" :key=\"data.id + '-' + index\"\n                    :class=\"{ 'row-selesai': data.status === 4 && data.status_pengajuan === 2 }\">\n                    <td class=\"text-center\">{{ indexing(index + 1) }}.</td>\n                    <td class=\"text-center\">\n                        <a href=\"javascript:void(0)\" class=\"removeTextDecoration\" @click=\"lihatKeterangan(data)\">\n                            <q-btn v-if=\"data.status_pengajuan == 1\" round glossy size=\"xs\" color=\"orange\"\n                                icon=\"hourglass_empty\" />\n                            <q-btn v-if=\"data.status_pengajuan == 2\" round size=\"xs\" glossy color=\"green\" icon=\"done\" />\n                            <q-btn v-if=\"data.status_pengajuan == 3\" round glossy size=\"xs\" color=\"red\" icon=\"close\" />\n                        </a>\n                    </td>\n                    <td>\n                        <div>\n                            {{ data.nama_kegiatan }}\n                        </div>\n                        <div class=\"text-blue text-bold\" style=\"font-size: 12px;\">\n                            {{ data.uraian_bidang_csr }}, {{ data.uraian_bidang_sub_csr }}\n                        </div>\n                    </td>\n\n                    <td>\n                        <div>{{ data.nama_kecamatan }}</div>\n                        <div class=\"text-blue text-bold\" style=\"font-size: 12px;\">\n                            {{ data.nama_desa }}\n                        </div>\n                    </td>\n\n\n                    <td>{{ UMUM.tglConvert(data.tgl_pengajuan) }} </td>\n                    <td>\n                        <div>{{ data.nama_perusahaan }}</div>\n                        <div class=\"text-blue text-bold\" style=\"font-size: 12px;\">\n                            {{ data.bidang_perusahaan }}\n                        </div>\n                    </td>\n                    <td>{{ data.jumlah_ambil }} {{ data.satuan }}</td>\n                    <td :style=\"{ backgroundColor: data.jumlah_sisa === 0 ? '#ffcccc' : 'transparent' }\">\n                        {{ data.jumlah_sisa }} {{ data.satuan }}\n                    </td>\n                    <td class=\"text-center q-gutter-sm\">\n                        <!-- Tombol Lihat Detil -->\n                        <q-btn glossy color=\"blue\" label=\"Lihat Detil\" size=\"sm\"\n                            @click=\"selectData(data); mdl_lihat = true\">\n                            <q-tooltip content-class=\"bg-blue-9\" content-style=\"font-size: 13px\">\n                                Lihat Detil\n                            </q-tooltip>\n                        </q-btn>\n\n                        <!-- Tombol Setujui -->\n                        <q-btn v-if=\"tipe === 1 || tipe === 5\" glossy color=\"green\" label=\"Setujui\" size=\"sm\"\n                            :disable=\"data.status_pengajuan == 2 || data.status_pengajuan == 3 || data.jumlah_sisa === 0\"\n                            @click=\"approvePengajuan(data.id)\">\n                            <q-tooltip content-class=\"bg-green-9\" content-style=\"font-size: 13px\">\n                                Setujui Pengajuan\n                            </q-tooltip>\n                        </q-btn>\n\n                        <!-- Tombol Tolak -->\n                        <q-btn v-if=\"tipe === 1 || tipe === 5\" glossy color=\"red\" label=\"Tolak\" size=\"sm\"\n                            :disable=\"data.status_pengajuan == 2 || data.status_pengajuan == 3\"\n                            @click=\"tolakPengajuan(data.id)\">\n                            <q-tooltip content-class=\"bg-red-9\" content-style=\"font-size: 13px\">\n                                Tolak Pengajuan\n                            </q-tooltip>\n                        </q-btn>\n\n                        <!-- Tombol upload bukti -->\n                        <q-btn v-if=\"tipe === 4 && data.status_pengajuan == 2\" glossy color=\"purple\"\n                            label=\"Upload Eviden\" size=\"sm\" @click=\"openUploadModal(data)\">\n                            <q-tooltip content-class=\"bg-purple-9\" content-style=\"font-size: 13px\">\n                                Upload Bukti Program\n                            </q-tooltip>\n                        </q-btn>\n\n                        <q-btn v-if=\"tipe === 1 || tipe === 5 && data.status_pengajuan == 2 && data.jml_eviden > 0\"\n                            glossy color=\"purple\" label=\"Lihat Eviden\" size=\"sm\" @click=\"lihatEviden(data)\">\n                            <q-tooltip content-class=\"bg-blue-9\" content-style=\"font-size: 13px\">\n                                Lihat Bukti Program\n                            </q-tooltip>\n                        </q-btn>\n\n                    </td>\n\n                </tr>\n\n            </table>\n\n            <!-- =================================================== KONTENT =========================================================== -->\n        </div>\n\n        <hr class=\"hrpagin\">\n        <br>\n        <div class=\"flex flex-center\">\n            <q-pagination v-model=\"page_first\" :max=\"page_last\" :max-pages=\"4\" color=\"grey-6\" :direction-links=\"true\"\n                :boundary-links=\"true\" icon-first=\"skip_previous\" icon-last=\"skip_next\" icon-prev=\"fast_rewind\"\n                icon-next=\"fast_forward\" @input=\"getView\" />\n        </div>\n\n\n        <!-- ===================== MODAL TOLAK ===================== -->\n\n        <q-dialog v-model=\"mdl_catatan_admin\" persistent>\n            <q-card class=\"mdl-md\">\n                <q-card-section class=\"bg-orange text-white\">\n                    <div class=\"text-h6\">Evaluasi Pengajuan</div>\n                </q-card-section>\n\n                <q-card-section>\n                    <span class=\"h_lable\">Hasil Evaluasi</span>\n                    <!-- v-model langsung ke selectedItem.catatan_admin -->\n                    <q-input v-model=\"selectedItem.catatan_admin\" outlined square dense type=\"textarea\"\n                        class=\"bg-white q-mt-sm\" />\n                </q-card-section>\n\n                <q-card-actions align=\"right\" class=\"bg-grey-4\">\n                    <q-btn color=\"warning\" label=\"Evaluasi\" @click=\"submitTolak()\" />\n                    <q-btn color=\"negative\" label=\"Batal\" v-close-popup />\n                </q-card-actions>\n            </q-card>\n        </q-dialog>\n\n\n\n\n        <!-- ===================== MODAL TOLAK ===================== -->\n\n        <!-- ========================== KETERANGAN ================================ -->\n        <q-dialog v-model=\"mdl_keterangan\" persistent>\n            <q-card class=\"mdl-md\">\n                <q-card-section class=\"bg-orange\">\n                    <div class=\"text-h6 h_modalhead\">KETERANGAN</div>\n                </q-card-section>\n\n                <q-card-section class=\"q-pt-none\">\n                    <br>\n                    <span style=\"margin-top:100px\">{{ selectedItem.catatan_admin }}</span>\n\n                </q-card-section>\n\n                <q-card-actions class=\"bg-grey-4 mdl-footer\" align=\"right\">\n\n                    <q-btn label=\"Close\" color=\"negative\" v-close-popup />\n\n                </q-card-actions>\n            </q-card>\n        </q-dialog>\n\n\n        <!-- ========================== KETERANGAN ================================ -->\n\n        <!-- MODAL DETAIL PENGAJUAN -->\n        <q-dialog v-model=\"mdl_lihat\" persistent>\n            <q-card class=\"mdl-md\">\n\n                <!-- Header -->\n                <q-card-section class=\"bg-primary text-white flex items-center\">\n                    <q-icon name=\"description\" size=\"md\" class=\"q-mr-sm\" />\n                    <div class=\"text-h6\">Detail Pengajuan Program CSR</div>\n                </q-card-section>\n\n                <q-separator />\n\n                <!-- Konten -->\n                <q-card-section class=\"q-gutter-md\">\n\n                    <!-- Lampiran File -->\n                    <div>\n                        <div class=\"text-subtitle1 text-bold q-mb-sm\">ðŸ“‚ Lampiran File</div>\n                        <div v-if=\"selectedItem.file_name\">\n                            <q-img :src=\"file_path + selectedItem.file_name\" spinner-color=\"primary\"\n                                style=\"max-height: 400px; cursor: pointer; border: 1px solid #ddd; border-radius: 6px;\"\n                                @click=\"downloadFile(selectedItem.file_name)\" />\n                        </div>\n                        <div v-else>\n                            <span class=\"text-grey\">Tidak ada file</span>\n                        </div>\n                    </div>\n\n                    <!-- Info Program -->\n                    <div>\n                        <div class=\"text-subtitle1 text-bold q-mb-sm\">ðŸ“Œ Informasi Program</div>\n                        <q-list dense bordered separator class=\"rounded-borders\">\n                            <q-item>\n                                <q-item-section class=\"col-3 text-weight-medium\"><b>Nama Program</b></q-item-section>\n                                <q-item-section class=\"col-9\">{{ selectedItem.nama_kegiatan }}</q-item-section>\n                            </q-item>\n                            <q-item>\n                                <q-item-section class=\"col-3 text-weight-medium\"><b>Bidang</b></q-item-section>\n                                <q-item-section class=\"col-9\">{{ selectedItem.uraian_bidang_csr || '-'\n                                    }}</q-item-section>\n                            </q-item>\n                            <q-item v-if=\"selectedItem.uraian_bidang_sub_csr\">\n                                <q-item-section class=\"col-3 text-weight-medium\"><b>Sub Bidang</b></q-item-section>\n                                <q-item-section class=\"col-9\">{{ selectedItem.uraian_bidang_sub_csr }}</q-item-section>\n                            </q-item>\n                            <q-item>\n                                <q-item-section class=\"col-3 text-weight-medium\"><b>Jumlah Tersedia</b></q-item-section>\n                                <q-item-section>\n                                    <q-badge color=\"amber\" text-color=\"black\"\n                                        :label=\"selectedItem.jumlah_sisa + ' ' + selectedItem.satuan\" />\n                                </q-item-section>\n                            </q-item>\n                            <q-item>\n                                <q-item-section class=\"col-3 text-weight-medium\"><b>Jumlah Total</b></q-item-section>\n                                <q-item-section class=\"col-9\">{{ selectedItem.jumlah }} {{ selectedItem.satuan\n                                    }}</q-item-section>\n                            </q-item>\n                            <q-item>\n                                <q-item-section class=\"col-3 text-weight-medium\"><b>Nilai Program</b></q-item-section>\n                                <q-item-section class=\"col-9\">Rp {{ Number(selectedItem.nilai).toLocaleString('id-ID')\n                                    }} / {{ selectedItem.satuan }}</q-item-section>\n                            </q-item>\n                            <q-item>\n                                <q-item-section class=\"col-3 text-weight-medium\"><b>Tanggal Mulai</b></q-item-section>\n                                <q-item-section class=\"col-9\">{{ UMUM.tglConvert(selectedItem.tanggal_mulai)\n                                    }}</q-item-section>\n                            </q-item>\n                            <q-item>\n                                <q-item-section class=\"col-3 text-weight-medium\"><b>Tanggal Selesai</b></q-item-section>\n                                <q-item-section class=\"col-9\">{{ UMUM.tglConvert(selectedItem.tanggal_selesai)\n                                    }}</q-item-section>\n                            </q-item>\n                            <q-item>\n                                <q-item-section class=\"col-3 text-weight-medium\"><b>Alamat</b></q-item-section>\n                                <q-item-section class=\"col-9\">{{ selectedItem.alamat }}</q-item-section>\n                            </q-item>\n                            <q-item>\n                                <q-item-section class=\"col-3 text-weight-medium\"><b>Kecamatan</b></q-item-section>\n                                <q-item-section class=\"col-9\">{{ selectedItem.nama_kecamatan }}</q-item-section>\n                            </q-item>\n                            <q-item>\n                                <q-item-section class=\"col-3 text-weight-medium\"><b>Desa</b></q-item-section>\n                                <q-item-section class=\"col-9\">{{ selectedItem.nama_desa }}</q-item-section>\n                            </q-item>\n                        </q-list>\n                    </div>\n\n                    <!-- Info Perusahaan -->\n                    <div class=\"q-mt-md\">\n                        <div class=\"text-subtitle1 text-bold q-mb-sm\">ðŸ¢ Informasi Perusahaan</div>\n                        <q-list dense bordered separator class=\"rounded-borders\">\n                            <q-item>\n                                <q-item-section class=\"col-3 text-weight-medium\"><b>Nama Perusahaan</b></q-item-section>\n                                <q-item-section class=\"col-9\">{{ selectedItem.nama_perusahaan }}</q-item-section>\n                            </q-item>\n                            <q-item>\n                                <q-item-section class=\"col-3 text-weight-medium\"><b>Email\n                                        Perusahaan</b></q-item-section>\n                                <q-item-section class=\"col-9\">{{ selectedItem.email_perusahaan || '-'\n                                    }}</q-item-section>\n                            </q-item>\n                            <q-item>\n                                <q-item-section class=\"col-3 text-weight-medium\"><b>Telp Perusahaan</b></q-item-section>\n                                <q-item-section class=\"col-9\">{{ selectedItem.telp_perusahaan || '-' }}</q-item-section>\n                            </q-item>\n                            <q-item>\n                                <q-item-section class=\"col-3 text-weight-medium\"><b>Alamat\n                                        Perusahaan</b></q-item-section>\n                                <q-item-section class=\"col-9\">{{ selectedItem.alamat_perusahaan || '-'\n                                    }}</q-item-section>\n                            </q-item>\n                        </q-list>\n\n                        <q-separator spaced />\n\n                        <!-- Penanggung Jawab -->\n                        <div class=\"text-subtitle2 text-bold q-mb-sm\">ðŸ‘¤ Penanggung Jawab</div>\n                        <q-list dense bordered separator class=\"rounded-borders\">\n                            <q-item>\n                                <q-item-section class=\"col-3 text-weight-medium\"><b>Nama</b></q-item-section>\n                                <q-item-section class=\"col-9\">{{ selectedItem.nama_pj }}</q-item-section>\n                            </q-item>\n                            <q-item>\n                                <q-item-section class=\"col-3 text-weight-medium\"><b>Jabatan</b></q-item-section>\n                                <q-item-section class=\"col-9\">{{ selectedItem.jabatan_pj }}</q-item-section>\n                            </q-item>\n                            <q-item>\n                                <q-item-section class=\"col-3 text-weight-medium\"><b>Email</b></q-item-section>\n                                <q-item-section class=\"col-9\">{{ selectedItem.email_pj }}</q-item-section>\n                            </q-item>\n                            <q-item>\n                                <q-item-section class=\"col-3 text-weight-medium\"><b>No Hp</b></q-item-section>\n                                <q-item-section class=\"col-9\">{{ selectedItem.hp_pj }}</q-item-section>\n                            </q-item>\n                        </q-list>\n                    </div>\n\n                </q-card-section>\n\n                <q-separator />\n\n                <!-- Actions -->\n                <q-card-actions align=\"right\" class=\"q-pa-md\">\n                    <q-btn label=\"Batal\" color=\"negative\" v-close-popup />\n                </q-card-actions>\n\n            </q-card>\n        </q-dialog>\n\n        <!-- ===================== MODAL UPLOAD ===================== -->\n        <!-- ===================== MODAL UPLOAD ===================== -->\n        <q-dialog v-model=\"mdl_upload_eviden\" persistent>\n            <q-card class=\"mdl-md\">\n                <q-card-section class=\"bg-purple text-white\">\n                    <div class=\"text-h6\">Upload Bukti Program CSR</div>\n                </q-card-section>\n\n                <q-card-section>\n                    <q-input v-model=\"uploadData.keterangan\" outlined dense label=\"Keterangan\" type=\"textarea\"\n                        class=\"q-mb-md bg-white\" />\n\n                    <!-- Q-FILE (lebih simpel dari Q-Uploader) -->\n                    <q-file v-model=\"uploadData.file\" label=\"Pilih Foto\" accept=\"image/*\" outlined dense use-chips>\n                        <template v-slot:append>\n                            <q-icon name=\"attach_file\" />\n                        </template>\n                    </q-file>\n\n                    <!-- ðŸ”¹ Pembatas -->\n                    <hr class=\"hrpagin2\" />\n\n                    <!-- LIST DATA BUKTI -->\n                    <table width=\"100%\">\n                        <tr class=\"h_table_head bg-purple text-white\">\n                            <th width=\"5%\" class=\"text-center\">No</th>\n                            <th width=\"20%\">Foto</th>\n                            <th width=\"55%\">Keterangan</th>\n                            <th width=\"20%\" class=\"text-center\">Aksi</th>\n                        </tr>\n                        <tr class=\"h_table_body\" v-for=\"(row, index) in list_data_bukti\" :key=\"row.id + '-' + index\">\n                            <td class=\"text-center\">{{ index + 1 }}</td>\n                            <td>\n                                <a :href=\"file_path + row.file_name\" target=\"_blank\" class=\"text-blue\">\n                                    <img :src=\"file_path + row.file_name\" alt=\"foto\"\n                                        style=\"width:60px; height:auto; border-radius:4px;\" />\n                                </a>\n                            </td>\n                            <td>{{ row.keterangan }}</td>\n                            <td class=\"text-center q-gutter-sm\">\n\n                                <!-- Hapus -->\n                                <q-btn dense round color=\"red\" icon=\"delete\" @click=\"hapusBukti(row.id)\">\n                                    <q-tooltip>Hapus</q-tooltip>\n                                </q-btn>\n                            </td>\n                        </tr>\n                        <tr v-if=\"list_data_bukti.length === 0\">\n                            <td colspan=\"4\" class=\"text-center text-grey\">\n                                Belum ada bukti diunggah\n                            </td>\n                        </tr>\n                    </table>\n                </q-card-section>\n\n                <q-card-actions align=\"right\" class=\"bg-grey-4\">\n                    <q-btn label=\"Upload\" class=\"bg-purple text-white\" @click=\"submitUploadEviden\" />\n                    <q-btn label=\"Batal\" color=\"negative\" v-close-popup @click=\"resetUploadModal\" />\n                </q-card-actions>\n            </q-card>\n        </q-dialog>\n\n        <!-- ===================== MODAL UPLOAD ===================== -->\n\n        <!-- ===================== MODAL LIHAT UPLOAD DARI PERUSAHAAN ===================== -->\n        <q-dialog v-model=\"mdl_lihat_eviden\" persistent>\n            <q-card class=\"mdl-md\">\n                <q-card-section class=\"bg-purple text-white\">\n                    <div class=\"text-h6\">Daftar Bukti Program CSR</div>\n                </q-card-section>\n\n                <q-card-section>\n                    <table width=\"100%\">\n                        <tr class=\"h_table_head bg-purple text-white\">\n                            <th width=\"10%\">No</th>\n                            <th width=\"30%\">Foto</th>\n                            <th width=\"50%\">Keterangan</th>\n                        </tr>\n                        <tr class=\"h_table_body\" v-for=\"(row, idx) in list_data_bukti\" :key=\"row.id\">\n                            <td class=\"text-center\">{{ idx + 1 }}</td>\n                            <td>\n                                <a :href=\"$store.state.url.URL_APP + 'uploads/' + row.file_name\" target=\"_blank\">\n                                    <img :src=\"$store.state.url.URL_APP + 'uploads/' + row.file_name\" alt=\"bukti\"\n                                        width=\"80\" />\n                                </a>\n                            </td>\n                            <td>{{ row.keterangan }}</td>\n                        </tr>\n                    </table>\n                </q-card-section>\n\n                <q-card-actions align=\"right\">\n                    <q-btn label=\"Tutup\" color=\"red\" v-close-popup />\n                    <q-btn glossy color=\"green\" label=\"Selesaikan Program\"\n                        :disable=\"selectedData && selectedData.status == 4\"\n                        @click=\"selesaikanProgram(selectedData.id)\" />\n                </q-card-actions>\n            </q-card>\n        </q-dialog>\n\n\n        <!-- ===================== MODAL LIHAT UPLOAD DARI PERUSAHAAN ===================== -->\n\n\n\n\n\n\n    </div>\n</template>\n\n\n<script>\n\nimport UMUM from \"../../library/umum.js\";\nexport default {\n    data() {\n        return {\n\n            UMUM: UMUM,\n\n            list_data: [],\n\n            status: 4,\n            mdl_add: false,\n            mdl_edit: false,\n            mdl_delete: false,\n            mdl_kembalikan: false,\n            mdl_keterangan: false,\n            mdl_lihat: false,\n            mdl_catatan_admin: false,\n            alert: false,\n            simpan1: false,\n            selectedItem: {},\n            cari_value: \"\",\n            page_first: 1,\n            page_last: 1,\n            page_limit: 8,\n            total: 0,\n            mdlAmbil: false,\n            selectedProgram: {},\n            jumlahAmbil: 0,\n            mitra: {},\n            ambilSemua: false,\n            catatanAmbil: '',\n\n            tipe: null, // simpan tipe user\n\n\n            form: {\n                bidang_csr_id: null,\n                bidang_sub_csr_id: null,\n                nama_csr: \"\",\n                deskripsi: \"\",\n                jumlah: null,\n                satuan: \"\",\n                nilai: null,\n                tanggal_mulai: \"\",\n                tanggal_selesai: \"\",\n                kecamatan_id: null,\n                desa_id: null,\n                alamat: \"\",\n                file_name: null  // ðŸ”¹ untuk file upload\n            },\n\n            mitra: {\n                nama_perusahaan: '',\n                email_perusahaan: '',\n                telp_perusahaan: '',\n                alamat_perusahaan: '',\n                nama_pj: '',\n                jabatan: '',\n                email_pj: '',\n                hp_pj: ''\n            },\n            list_bidang: [],\n            list_sub_bidang: [],\n            list_kecamatan: [],\n            list_kecamatan_master: [], // simpan data asli\n            list_desa: [],\n            list_desa_master: [],\n            file_path: this.$store.state.url.URL_APP + \"uploads/\",\n\n\n            filterku: {\n                bidang_usaha_id: \"\",\n                perusahaan_id: \"\",\n                bidang_csr_id: \"\",\n                bidang_sub_csr_id: \"\",\n                status_pengajuan: \"\"\n            },\n\n\n            list_bidang_filter: [],\n            list_sub_bidang_filter: [],\n\n            // hasil data yang difilter\n            dataView: [],\n\n            list_kecamatan_filter: [],\n            list_desa_filter: [],\n\n            statusOptions: [\n                { label: 'Semua Status', value: '' },\n                { label: 'Diproses', value: 1 },\n                { label: 'Diterima', value: 2 },\n                { label: 'Ditolak', value: 3 },\n            ],\n\n            list_perusahaan_filter: [],\n            bidangOptions: [], // <- ubah dari computed ke data\n            bidangUsahaOptions: [], // <- ubah dari computed ke data\n\n            mdl_upload_eviden: false,\n            uploadData: {\n                id: null,        // simpan id program\n                keterangan: '',\n                file: null\n            },\n            list_data_bukti: [],\n\n            columns_bukti: [\n                { name: 'foto', label: 'Foto', field: 'file_name' },\n                { name: 'keterangan', label: 'Keterangan', field: 'keterangan' },\n                { name: 'aksi', label: 'Aksi', field: 'aksi' }\n            ],\n\n            mdl_lihat_eviden: false,\n            selectedData: null, // âœ… tambahkan ini\n            selectedItemEviden: {\n                keterangan: '',\n                files: []\n            }\n\n        }\n\n\n    },\n\n\n    methods: {\n\n        async lihatEviden(item) {\n            const res = await fetch(this.$store.state.url.LIST_PENGAJUAN + 'getEviden?id=' + item.id, {\n                headers: { authorization: \"kikensbatara \" + localStorage.token }\n            });\n            this.list_data_bukti = await res.json();\n            this.mdl_lihat_eviden = true;\n            this.selectedData = item; // âœ… simpan data yg dipilih\n        },\n\n        openUploadModal(item) {\n            this.uploadData.id = item.id\n            this.uploadData.keterangan = ''\n            this.uploadData.file = null\n            this.mdl_upload_eviden = true\n            this.getListBukti()\n        },\n\n        async getListBukti() {\n            if (!this.uploadData.id) return\n            const res = await fetch(\n                this.$store.state.url.LIST_PENGAJUAN + 'getEviden?id=' + this.uploadData.id,\n                { headers: { authorization: 'kikensbatara ' + localStorage.token } }\n            )\n            const data = await res.json()\n            this.list_data_bukti = data\n        },\n\n        async hapusBukti(id) {\n            if (!confirm(\"Yakin hapus bukti ini?\")) return\n            await fetch(this.$store.state.url.LIST_PENGAJUAN + 'deleteEviden?id=' + id, { method: 'DELETE' })\n            this.getListBukti()\n        },\n\n        resetUploadModal() {\n            this.uploadData.keterangan = ''\n            this.uploadData.file = null\n        },\n\n        async submitUploadEviden() {\n            if (!this.uploadData.keterangan) {\n                this.Notify('Keterangan harus diisi', 'negative', 'warning')\n                return\n            }\n\n            if (!this.uploadData.file) {\n                this.Notify('Pilih 1 foto terlebih dahulu', 'negative', 'warning')\n                return\n            }\n\n            const formData = new FormData()\n            formData.append('id', this.uploadData.id)\n            formData.append('keterangan', this.uploadData.keterangan)\n            formData.append('file', this.uploadData.file)  // ðŸ”¥ harus \"file\"\n\n            try {\n                const res = await fetch(this.$store.state.url.LIST_PENGAJUAN + 'uploadEviden', {\n                    method: 'POST',\n                    headers: {\n                        authorization: 'kikensbatara ' + localStorage.token\n                    },\n                    body: formData\n                })\n\n                const data = await res.json()\n                if (data.success) {\n                    this.Notify('Bukti berhasil diupload', 'positive', 'check_circle_outline')\n                    this.resetUploadModal()\n                    this.mdl_upload_eviden = false\n                    this.getView() // refresh list\n                } else {\n                    this.Notify(data.message, 'negative', 'error_outline')\n                }\n            } catch (err) {\n                console.error(err)\n                this.Notify('Terjadi kesalahan server', 'negative', 'error_outline')\n            }\n        },\n        previewFile(row) {\n            window.open(this.fileBaseUrl + row.file_name, '_blank')\n        },\n\n\n\n        hapusBukti(id) {\n            if (!confirm(\"Yakin hapus bukti ini?\")) return;\n\n            fetch(this.$store.state.url.LIST_PENGAJUAN + \"removeEviden\", {\n                method: \"POST\",\n                headers: {\n                    \"content-type\": \"application/json\",\n                    authorization: \"kikensbatara \" + localStorage.token\n                },\n                body: JSON.stringify({ id })\n            })\n                .then(res => res.json())\n                .then(res_data => {\n                    if (res_data.success) {\n                        this.Notify(\"Bukti berhasil dihapus\", \"positive\", \"check_circle_outline\");\n                        this.getListBukti();\n                    } else {\n                        this.Notify(res_data.message || \"Gagal hapus bukti\", \"negative\", \"error\");\n                    }\n                })\n                .catch(err => {\n                    this.Notify(\"Error: \" + err.message, \"warning\", \"error\");\n                });\n        },\n        selesaikanProgram: async function (id) {\n            try {\n                // konfirmasi dulu\n                this.mdl_lihat_eviden = false;\n                await UMUM.notifApprove();\n\n                const res = await fetch(this.$store.state.url.LIST_PENGAJUAN + \"selesaikanProgram\", {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\",\n                        authorization: \"kikensbatara \" + localStorage.token\n                    },\n                    body: JSON.stringify({ id })\n                });\n\n                const result = await res.json();\n                if (result.success) {\n                    this.Notify(\"Program berhasil diselesaikan\", \"positive\", \"check_circle_outline\");\n                    this.mdl_lihat_eviden = false;\n                    this.getView(); // refresh tabel utama\n                } else {\n                    this.Notify(result.message || \"Gagal menyelesaikan program\", \"negative\", \"error_outline\");\n                }\n            } catch (err) {\n                // kalau user batal di notifApprove, dia juga bakal masuk ke sini\n                console.error(err);\n                this.Notify(\"Error: \" + err.message, \"negative\", \"error\");\n            }\n        },\n\n        downloadFile(fileName) {\n            if (fileName) {\n                window.open(this.file_path + fileName, \"_blank\");\n            }\n        },\n\n        lihatKeterangan: function (item) {\n            this.selectedItem = { ...item };\n            this.mdl_keterangan = true; // buka modal keterangan\n        },\n\n        tolakPengajuan: async function (id) {\n            // Cari data sesuai id dan simpan di selectedItem\n            const item = this.list_data.find(d => d.id === id);\n            if (!item) return;\n\n            this.selectedItem = { ...item, catatan_admin: '' };\n            this.mdl_catatan_admin = true; // buka modal\n        },\n\n\n        // Tombol Evaluasi di modal\n        submitTolak: async function () {\n            if (!this.selectedItem.catatan_admin) {\n                this.Notify('Catatan harus diisi', 'negative', 'warning');\n                return;\n            }\n\n            try {\n                const res = await fetch(this.$store.state.url.LIST_PENGAJUAN + \"tolakPengajuan\", {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\",\n                        authorization: \"kikensbatara \" + localStorage.token\n                    },\n                    body: JSON.stringify({\n                        id: this.selectedItem.id,\n                        catatan_admin: this.selectedItem.catatan_admin\n                    })\n                });\n\n                const data = await res.json();\n\n                if (data.success) {\n                    this.Notify('Pengajuan ditolak', 'negative', 'cancel');\n                    this.getView(); // refresh list\n                    this.mdl_catatan_admin = false; // tutup modal\n                } else {\n                    this.Notify(data.message, 'negative', 'error_outline');\n                }\n\n            } catch (err) {\n                console.error(err);\n                this.Notify('Terjadi kesalahan server', 'negative', 'error_outline');\n            }\n        },\n\n        selectData(item) {\n            this.selectedItem = item;\n            this.mdl_lihat = true; // buka modal\n        },\n\n\n        onStatusChange(val) {\n            this.getView()\n        },\n\n\n        onChangeBidang(val) {\n            this.filterku.bidang_sub_csr_id = \"\"; // reset sub-bidang\n            this.getSubBidangFilter(val);\n            this.getView(); // refresh data\n        },\n\n        formatRupiah(value) {\n            if (value == null) return \"-\";\n            return new Intl.NumberFormat('id-ID', {\n                style: 'currency',\n                currency: 'IDR',\n                minimumFractionDigits: 0,\n                maximumFractionDigits: 0\n            }).format(value);\n        },\n\n\n        getBidang() {\n            fetch(this.$store.state.url.URL_DM_BID + \"bidang\", {\n                headers: {\n                    authorization: \"kikensbatara \" + localStorage.token\n                }\n            })\n                .then(res => res.json())\n                .then(res_data => {\n                    this.list_bidang = res_data\n                })\n        },\n        getMitra(userId) {\n            fetch(this.$store.state.url.KEGIATAN_CSR + \"mitra/\" + userId, {\n                method: \"GET\",\n                headers: {\n                    authorization: \"kikensbatara \" + localStorage.token\n                }\n            })\n                .then(res => res.json())\n                .then(res_data => {\n                    if (res_data.success) {\n                        this.mitra = res_data.data\n                    } else {\n                        this.Notify(\"Gagal mengambil data mitra\", \"negative\", \"error_outline\")\n                    }\n                })\n                .catch(err => {\n                    console.error(\"âŒ Error:\", err)\n                    this.Notify(\"Terjadi kesalahan server\", \"negative\", \"error_outline\")\n                })\n        },\n\n\n        getSubBidang() {\n            // reset sub bidang dulu biar tidak nempel\n            this.form.bidang_sub_csr_id = null\n            this.list_sub_bidang = []\n\n            if (!this.form.bidang_csr_id) {\n                return\n            }\n\n            fetch(this.$store.state.url.URL_DM_BID + \"sub_bidang\", {\n                method: \"POST\",\n                headers: {\n                    \"content-type\": \"application/json\",\n                    authorization: \"kikensbatara \" + localStorage.token\n                },\n                body: JSON.stringify({\n                    bidang_csr_id: this.form.bidang_csr_id\n                })\n            })\n                .then(res => res.json())\n                .then(res_data => {\n                    this.list_sub_bidang = res_data\n                })\n        },\n\n\n\n        // ambil data utama\n        getView() {\n            this.$store.commit(\"shoWLoading\");\n            fetch(this.$store.state.url.LIST_PENGAJUAN + \"view\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    authorization: \"kikensbatara \" + localStorage.token\n                },\n                body: JSON.stringify({\n                    status_pengajuan: this.filterku.status_pengajuan,\n                    bidang_usaha_id: this.filterku.bidang_usaha_id,   // ðŸ”Ž filter perusahaan\n                    perusahaan_id: this.filterku.perusahaan_id,   // ðŸ”Ž filter perusahaan\n                    bidang_csr_id: this.filterku.bidang_csr_id,       // ðŸ”Ž filter bidang CSR\n                    bidang_sub_csr_id: this.filterku.bidang_sub_csr_id, // ðŸ”Ž filter sub bidang CSR\n                    cari_value: this.cari_value,\n                    data_ke: this.page_first,\n                    page_limit: this.page_limit,\n                    tipe: this.tipe\n                })\n            })\n                .then(res => res.json())\n                .then(res_data => {\n                    if (res_data.success) {\n                        this.list_data = res_data.data;\n                        this.total = res_data.total || res_data.data.length;\n                        this.page_last = Math.ceil(this.total / this.page_limit);\n                    }\n                    this.$store.commit(\"hideLoading\");\n                })\n                .catch(err => {\n                    console.error(\"âŒ Error getView:\", err);\n                    this.$store.commit(\"hideLoading\");\n                });\n        },\n\n\n        approvePengajuan: async function (id) {\n            await UMUM.notifApprove();\n            fetch(this.$store.state.url.LIST_PENGAJUAN + \"approvePengajuan\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    authorization: \"kikensbatara \" + localStorage.token\n                },\n                body: JSON.stringify({ id }) // kirim id saja\n            })\n                .then(res => res.json())\n                .then(res_data => {\n                    if (res_data.success) {\n                        this.Notify('Pengajuan disetujui', 'positive', 'check_circle_outline');\n                        this.getView(); // refresh list\n                    } else {\n                        this.Notify(res_data.message, 'negative', 'error_outline');\n                    }\n                })\n                .catch(err => console.error(err));\n        },\n\n\n\n        getBidangFilter() {\n            fetch(this.$store.state.url.URL_DM_BID + \"bidang\", {\n                headers: {\n                    authorization: \"kikensbatara \" + localStorage.token\n                }\n            })\n                .then(res => res.json())\n                .then(res_data => {\n                    this.bidangOptions = [\n                        { id: \"\", uraian: \"-- SEMUA BIDANG --\" },\n                        ...res_data.map(b => ({\n                            ...b,\n                            id: b.id.toString()  // pastikan tipe sama dengan v-model\n                        }))\n                    ];\n                })\n        },\n\n        getSubBidangFilter() {\n            this.filterku.bidang_sub_csr_id = null\n            this.list_sub_bidang_filter = []\n\n            if (!this.filterku.bidang_csr_id) return\n\n            fetch(this.$store.state.url.URL_DM_BID + \"sub_bidang\", {\n                method: \"POST\",\n                headers: {\n                    \"content-type\": \"application/json\",\n                    authorization: \"kikensbatara \" + localStorage.token\n                },\n                body: JSON.stringify({\n                    bidang_csr_id: this.filterku.bidang_csr_id\n                })\n            })\n                .then(res => res.json())\n                .then(res_data => {\n                    this.list_sub_bidang_filter = res_data\n                })\n        },\n\n\n        //   ================ FILTER BIDANG USAHA DAN PERUSAHAAN ==================\n        getBidangUsahaFilter() {\n            fetch(this.$store.state.url.DATA_MITRA + \"bidang\", {\n                headers: { authorization: \"kikensbatara \" + localStorage.token }\n            })\n                .then(res => res.json())\n                .then(res_data => {\n                    this.bidangUsahaOptions = [\n                        { id: \"\", uraian: \"-- SEMUA BIDANG USAHA --\" },\n                        ...res_data\n                    ]\n                })\n                .catch(err => console.error(\"âŒ Error fetch bidang:\", err))\n        },\n\n        onChangeBidangUsahaFilter(val) {\n            this.filterku.bidang_usaha_id = val\n            this.filterku.perusahaan_id = \"\"\n            this.getPerusahaanFilter()\n            this.getView()\n        },\n\n        getPerusahaanFilter() {\n            if (!this.filterku.bidang_usaha_id) {\n                this.list_perusahaan_filter = []\n                return\n            }\n\n            fetch(this.$store.state.url.DATA_MITRA + \"byBidang\", {\n                method: \"POST\",\n                headers: {\n                    \"content-type\": \"application/json\",\n                    authorization: \"kikensbatara \" + localStorage.token\n                },\n                body: JSON.stringify({\n                    bidang_usaha_id: this.filterku.bidang_usaha_id\n                })\n            })\n                .then(res => res.json())\n                .then(res_data => {\n                    this.list_perusahaan_filter = res_data\n                })\n                .catch(err => {\n                    console.error(\"âŒ Error fetch perusahaan:\", err)\n                })\n        },\n\n        onChangePerusahaanFilter(val) {\n            this.filterku.perusahaan_id = val\n            this.getView()\n        },\n\n        //   ================ FILTER BIDANG USAHA DAN PERUSAHAAN ==================\n\n\n\n        simulateProgress(number) {\n            // we set loading state\n            this[`simpan${number}`] = true\n            // simulate a delay\n            setTimeout(() => {\n                // we're done, we reset loading state\n                this[`simpan${number}`] = false\n            }, 3000)\n        },\n\n        Notify: function (message, positive, icon) {\n            this.$q.notify({\n                message: message,\n                color: positive,\n                icon: icon,\n                position: 'top',\n                timeout: 500,\n            })\n        },\n\n\n        btn_prev() {\n            if (this.page_first > 1) this.page_first--;\n            this.getView();\n        },\n\n        btn_next() {\n            if (this.page_first < this.page_last) this.page_first++;\n            this.getView();\n        },\n\n        cari_data() {\n            this.page_first = 1;\n            this.getView();\n        },\n\n        indexing(index) {\n            return ((this.page_first - 1) * this.page_limit) + index;\n        },\n\n        openEditModal(item) {\n            this.selectedItem = item;\n\n            // set form\n            this.form = { ...item };\n\n            // isi sub-bidang sesuai bidang\n            if (this.form.bidang_csr_id) {\n                this.getSubBidang(this.form.bidang_csr_id);\n            }\n\n            // buka modal\n            this.mdl_edit = true;\n        }\n\n\n\n    },\n    mounted() {\n\n        const get_profile = JSON.parse(localStorage.profile);\n        this.tipe = Number(get_profile.profile.db_csrkonsel); // ambil db_csrkonsel\n\n\n        // simpan data mitra (kalau yang login memang mitra)\n        this.mitra = {\n            id: get_profile._id,\n            nama: get_profile.profile.nama,\n            username: get_profile.username\n        }\n\n\n        // jalankan ketika halaman pertama kali dibuka\n        this.getView();\n        // this.getDesaFilter();\n        this.getBidang();\n        this.getSubBidang();\n        this.getBidangFilter();\n        this.getBidangUsahaFilter();\n        // this.getSubBidangFilter();\n    }\n}\n</script>"]}]}