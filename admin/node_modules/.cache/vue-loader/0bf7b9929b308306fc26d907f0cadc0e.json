{"remainingRequest":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/simplephi/Documents/riswan/stock_darah/admin/src/views/dataMaster/regisPendonor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/src/views/dataMaster/regisPendonor.vue","mtime":1759385013593},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/cache-loader/dist/cjs.js","mtime":1758930418112},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/babel-loader/lib/index.js","mtime":1758930419036},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js","mtime":1758930412679},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/cache-loader/dist/cjs.js","mtime":1758930418112},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/vue-loader/lib/index.js","mtime":1758930412640}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBVTVVNIGZyb20gIi4uLy4uL2xpYnJhcnkvdW11bS5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICAgZGF0YSgpIHsKICAgICAgcmV0dXJuIHsKCiAgICAgICAgIAogICAgICAgICBVTVVNOiBVTVVNLAoKICAgICAgICAgZm9ybTogewogICAgICAgICAgICBpZDogbnVsbCwKICAgICAgICAgICAgdXNlcnNfaWQ6IG51bGwsCiAgICAgICAgICAgIG5hbWFfbGVuZ2thcDogJycsCiAgICAgICAgICAgIHRhbmdnYWxfbGFoaXI6ICcnLAogICAgICAgICAgICBqZW5pc19rZWxhbWluOiAnJywKICAgICAgICAgICAgZ29sb25nYW5fZGFyYWg6ICcnLAogICAgICAgICAgICByaGVzdXM6ICcnLAogICAgICAgICAgICBrYWJ1cGF0ZW5faWQ6IG51bGwsCiAgICAgICAgICAgIGtlY2FtYXRhbl9pZDogbnVsbCwKICAgICAgICAgICAgZGVzX2tlbF9pZDogbnVsbCwKICAgICAgICAgICAgYWxhbWF0OiAnJywKICAgICAgICAgICAgZW1haWw6ICcnLAogICAgICAgICAgICBub19ocDogJycsCiAgICAgICAgICAgIHJpd2F5YXRfcGVueWFraXQ6IG51bGwsCiAgICAgICAgICAgIHRlcmFraGlyX2Rvbm9yOiBudWxsLAogICAgICAgICAgICBmb3RvX3Byb2ZpbDogbnVsbCwKICAgICAgICAgICAgZG9rdW1lbl9wZW5kdWt1bmc6IG51bGwsCiAgICAgICAgICAgIHN0b2tkYXJhaF9rb251dDogNCwgCiAgICAgICAgICAgIGJlcnNlZGlhX2RpcHVibGlrYXNpa2FuOiB0cnVlLAogICAgICAgICB9LAogICAgICAgICBrYWJ1cGF0ZW5PcHRpb25zOiBbXSwKICAgICAgICAga2VjYW1hdGFuT3B0aW9uczogW10sCiAgICAgICAgIGRlc2tlbE9wdGlvbnM6IFtdLAoKICAgICAgICAgbWRsX2FkZDogZmFsc2UsCiAgICAgICAgIG1kbF9lZGl0OiBmYWxzZSwKICAgICAgICAgbWRsX2hhcHVzOiBmYWxzZSwKICAgICAgICAgYnRuX2FkZDogZmFsc2UsCiAgICAgICAgIGJ0bl9lZGl0OiBmYWxzZSwKICAgICAgICAgZmlsZV9wYXRoOiB0aGlzLiRzdG9yZS5zdGF0ZS51cmwuVVJMX0FQUCArICJ1cGxvYWRzLyIsCgogICAgICAgICBsaXN0X2RhdGE6IFtdLAogICAgICAgICBqbWxfZGF0YTogMCwKICAgICAgICAgdG90YWxfZGF0YTogMCwKICAgICAgICAgcGFnZV9maXJzdDogMSwKICAgICAgICAgcGFnZV9sYXN0OiAwLAogICAgICAgICBwYWdlX2xpbWl0OiAxMCwKICAgICAgICAgY2FyaV92YWx1ZTogJycsCgoKCiAgICAgICAgIG1kbF9wYXNzd29yZDogZmFsc2UsCiAgICAgICAgIGRhdGFrdTogewogICAgICAgICAgICB1c2VybmFtZTogJycsCiAgICAgICAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgICAgICAgY29uZmlybVBhc3N3b3JkOiAnJwogICAgICAgICB9LAogICAgICAgICBlcnJvck1lc3NhZ2U6ICcnLAogICAgICB9CiAgIH0sCiAgIHdhdGNoOiB7CiAgICAgIC8vIEtldGlrYSBrYWJ1cGF0ZW5faWQgYmVydWJhaCwgbG9hZCBrZWNhbWF0YW4gdGVya2FpdCBkYW4gcmVzZXQga2VjYW1hdGFuICYgZGVzYQogICAgICAnZm9ybS5rYWJ1cGF0ZW5faWQnKG5ld1ZhbCkgewogICAgICAgICB0aGlzLmZvcm0ua2VjYW1hdGFuX2lkID0gbnVsbDsKICAgICAgICAgdGhpcy5mb3JtLmRlc19rZWxfaWQgPSBudWxsOwogICAgICAgICB0aGlzLmtlY2FtYXRhbk9wdGlvbnMgPSBbXTsKICAgICAgICAgdGhpcy5kZXNrZWxPcHRpb25zID0gW107CiAgICAgICAgIGlmIChuZXdWYWwpIHsKICAgICAgICAgICAgdGhpcy5sb2FkS2VjYW1hdGFuKG5ld1ZhbCk7CiAgICAgICAgIH0KICAgICAgfSwKICAgICAgLy8gS2V0aWthIGtlY2FtYXRhbl9pZCBiZXJ1YmFoLCBsb2FkIGRlc2EgdGVya2FpdCBkYW4gcmVzZXQgZGVzYQogICAgICAnZm9ybS5rZWNhbWF0YW5faWQnKG5ld1ZhbCkgewogICAgICAgICB0aGlzLmZvcm0uZGVzX2tlbF9pZCA9IG51bGw7CiAgICAgICAgIHRoaXMuZGVza2VsT3B0aW9ucyA9IFtdOwogICAgICAgICBpZiAobmV3VmFsKSB7CiAgICAgICAgICAgIHRoaXMubG9hZERlc2tlbChuZXdWYWwpOwogICAgICAgICB9CiAgICAgIH0KICAgfSwKICAgbWV0aG9kczogewogICAgICBsb2FkS2FidXBhdGVuKCkgewogICAgICAgICBmZXRjaCh0aGlzLiRzdG9yZS5zdGF0ZS51cmwuUkVHSVNfRE9OT1IgKyAia2FidXBhdGVuIikKICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpCiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICB0aGlzLmthYnVwYXRlbk9wdGlvbnMgPSByZXMuZGF0YS5tYXAoaXRlbSA9PiAoewogICAgICAgICAgICAgICAgICAgICBsYWJlbDogaXRlbS5sYWJlbCwKICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0uaWQKICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB0aGlzLiRxLm5vdGlmeSh7IHR5cGU6ICduZWdhdGl2ZScsIG1lc3NhZ2U6ICdHYWdhbCBtZW11YXQgZGF0YSBrYWJ1cGF0ZW4nIH0pOwogICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgIHRoaXMuJHEubm90aWZ5KHsgdHlwZTogJ25lZ2F0aXZlJywgbWVzc2FnZTogJ1RlcmphZGkga2VzYWxhaGFuIHNhYXQgbWVtdWF0IGthYnVwYXRlbicgfSk7CiAgICAgICAgICAgIH0pOwogICAgICB9LAogICAgICBsb2FkS2VjYW1hdGFuKGthYnVwYXRlbklkKSB7CiAgICAgICAgIGZldGNoKGAke3RoaXMuJHN0b3JlLnN0YXRlLnVybC5SRUdJU19ET05PUn1rZWNhbWF0YW4/a2FidXBhdGVuX2lkPSR7a2FidXBhdGVuSWR9YCkKICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpCiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICB0aGlzLmtlY2FtYXRhbk9wdGlvbnMgPSByZXMuZGF0YS5tYXAoaXRlbSA9PiAoewogICAgICAgICAgICAgICAgICAgICBsYWJlbDogaXRlbS5sYWJlbCwKICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0uaWQKICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB0aGlzLiRxLm5vdGlmeSh7IHR5cGU6ICduZWdhdGl2ZScsIG1lc3NhZ2U6ICdHYWdhbCBtZW11YXQgZGF0YSBrZWNhbWF0YW4nIH0pOwogICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgIHRoaXMuJHEubm90aWZ5KHsgdHlwZTogJ25lZ2F0aXZlJywgbWVzc2FnZTogJ1RlcmphZGkga2VzYWxhaGFuIHNhYXQgbWVtdWF0IGtlY2FtYXRhbicgfSk7CiAgICAgICAgICAgIH0pOwogICAgICB9LAogICAgICBsb2FkRGVza2VsKGtlY2FtYXRhbklkKSB7CiAgICAgICAgIGZldGNoKGAke3RoaXMuJHN0b3JlLnN0YXRlLnVybC5SRUdJU19ET05PUn1kZXNrZWw/a2VjYW1hdGFuX2lkPSR7a2VjYW1hdGFuSWR9YCkKICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpCiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICB0aGlzLmRlc2tlbE9wdGlvbnMgPSByZXMuZGF0YS5tYXAoaXRlbSA9PiAoewogICAgICAgICAgICAgICAgICAgICBsYWJlbDogaXRlbS5sYWJlbCwKICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0uaWQKICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB0aGlzLiRxLm5vdGlmeSh7IHR5cGU6ICduZWdhdGl2ZScsIG1lc3NhZ2U6ICdHYWdhbCBtZW11YXQgZGF0YSBkZXNhL2tlbHVyYWhhbicgfSk7CiAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICAgdGhpcy4kcS5ub3RpZnkoeyB0eXBlOiAnbmVnYXRpdmUnLCBtZXNzYWdlOiAnVGVyamFkaSBrZXNhbGFoYW4gc2FhdCBtZW11YXQgZGVzYS9rZWx1cmFoYW4nIH0pOwogICAgICAgICAgICB9KTsKICAgICAgfSwKCgogICAgICAvLyA9PT09PT09PT09IEdFVCBWSUVXIERBVEEgPT09PT09PT09PQogICAgICBnZXRWaWV3KCkgewogICAgICAgICBjb25zdCBib2R5ID0gewogICAgICAgICAgICBwYWdlX2xpbWl0OiB0aGlzLnBhZ2VfbGltaXQsCiAgICAgICAgICAgIGRhdGFfa2U6ICh0aGlzLnBhZ2VfZmlyc3QgLSAxKSAqIHRoaXMucGFnZV9saW1pdCwKICAgICAgICAgICAgY2FyaV92YWx1ZTogdGhpcy5jYXJpX3ZhbHVlLAogICAgICAgICB9OwoKICAgICAgICAgZmV0Y2godGhpcy4kc3RvcmUuc3RhdGUudXJsLlJFR0lTX0RPTk9SICsgImdldHZpZXciLCB7CiAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246ICJraWtlbnNiYXRhcmEgIiArIGxvY2FsU3RvcmFnZS50b2tlbgogICAgICAgICAgICB9LAogICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KQogICAgICAgICB9KQogICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSkKICAgICAgICAgICAgLnRoZW4ocmVzX2RhdGEgPT4gewogICAgICAgICAgICAgICBpZiAocmVzX2RhdGEuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICB0aGlzLmxpc3RfZGF0YSA9IHJlc19kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICAgIHRoaXMuam1sX2RhdGEgPSByZXNfZGF0YS5qbWxfZGF0YTsKICAgICAgICAgICAgICAgICAgdGhpcy50b3RhbF9kYXRhID0gcmVzX2RhdGEudG90YWxfZGF0YTsKICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlX2xhc3QgPSBNYXRoLmNlaWwodGhpcy50b3RhbF9kYXRhIC8gdGhpcy5wYWdlX2xpbWl0KTsKICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdGhpcy4kcS5ub3RpZnkoeyB0eXBlOiAibmVnYXRpdmUiLCBtZXNzYWdlOiByZXNfZGF0YS5tZXNzYWdlIHx8ICJHYWdhbCBtZW5nYW1iaWwgZGF0YSIgfSk7CiAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIGZldGNoaW5nIGRhdGE6IiwgZXJyKTsKICAgICAgICAgICAgICAgdGhpcy4kcS5ub3RpZnkoeyB0eXBlOiAibmVnYXRpdmUiLCBtZXNzYWdlOiAiR2FnYWwgbWVuZ2FtYmlsIGRhdGEgcGVuZG9ub3IiIH0pOwogICAgICAgICAgICB9KTsKICAgICAgfSwKCiAgICAgIGFzeW5jIGFkZERhdGEoKSB7CiAgdHJ5IHsKICAgIC8vIFZhbGlkYXNpIGNvbmZpcm0gcGFzc3dvcmQKICAgIGlmICh0aGlzLmRhdGFrdS5wYXNzd29yZCAhPT0gdGhpcy5kYXRha3UuY29uZmlybVBhc3N3b3JkKSB7CiAgICAgIHRoaXMuJHEubm90aWZ5KHsKICAgICAgICB0eXBlOiAnbmVnYXRpdmUnLAogICAgICAgIG1lc3NhZ2U6ICdQYXNzd29yZCBkYW4ga29uZmlybWFzaSBwYXNzd29yZCB0aWRhayBzYW1hIScKICAgICAgfSk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh0aGlzLmRhdGFrdS5wYXNzd29yZC5sZW5ndGggPCA2KSB7CiAgICAgIHRoaXMuJHEubm90aWZ5KHsKICAgICAgICB0eXBlOiAnbmVnYXRpdmUnLAogICAgICAgIG1lc3NhZ2U6ICdQYXNzd29yZCBtaW5pbWFsIDYga2FyYWt0ZXIhJwogICAgICB9KTsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKCF0aGlzLmRhdGFrdS51c2VybmFtZSkgewogICAgICB0aGlzLiRxLm5vdGlmeSh7CiAgICAgICAgdHlwZTogJ25lZ2F0aXZlJywKICAgICAgICBtZXNzYWdlOiAnVXNlcm5hbWUgd2FqaWIgZGlpc2khJwogICAgICB9KTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHRoaXMuYnRuX2FkZCA9IHRydWU7CgogICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKCiAgICAvLyBBcHBlbmQgZmllbGQgcGVuZG9ub3IKICAgIGZvcm1EYXRhLmFwcGVuZCgnbmFtYV9sZW5na2FwJywgdGhpcy5mb3JtLm5hbWFfbGVuZ2thcCk7CiAgICBmb3JtRGF0YS5hcHBlbmQoJ3RhbmdnYWxfbGFoaXInLCB0aGlzLmZvcm0udGFuZ2dhbF9sYWhpcik7CiAgICBmb3JtRGF0YS5hcHBlbmQoJ2plbmlzX2tlbGFtaW4nLCB0aGlzLmZvcm0uamVuaXNfa2VsYW1pbik7CiAgICBmb3JtRGF0YS5hcHBlbmQoJ2dvbG9uZ2FuX2RhcmFoJywgdGhpcy5mb3JtLmdvbG9uZ2FuX2RhcmFoKTsKICAgIGZvcm1EYXRhLmFwcGVuZCgncmhlc3VzJywgdGhpcy5mb3JtLnJoZXN1cyB8fCAnJyk7CiAgICBmb3JtRGF0YS5hcHBlbmQoJ2thYnVwYXRlbl9pZCcsIHRoaXMuZm9ybS5rYWJ1cGF0ZW5faWQgfHwgJycpOwogICAgZm9ybURhdGEuYXBwZW5kKCdrZWNhbWF0YW5faWQnLCB0aGlzLmZvcm0ua2VjYW1hdGFuX2lkIHx8ICcnKTsKICAgIGZvcm1EYXRhLmFwcGVuZCgnZGVzX2tlbF9pZCcsIHRoaXMuZm9ybS5kZXNfa2VsX2lkIHx8ICcnKTsKICAgIGZvcm1EYXRhLmFwcGVuZCgnYWxhbWF0JywgdGhpcy5mb3JtLmFsYW1hdCB8fCAnJyk7CiAgICBmb3JtRGF0YS5hcHBlbmQoJ2VtYWlsJywgdGhpcy5mb3JtLmVtYWlsIHx8ICcnKTsKICAgIGZvcm1EYXRhLmFwcGVuZCgnbm9faHAnLCB0aGlzLmZvcm0ubm9faHAgfHwgJycpOwogICAgZm9ybURhdGEuYXBwZW5kKCdyaXdheWF0X3Blbnlha2l0JywgdGhpcy5mb3JtLnJpd2F5YXRfcGVueWFraXQgfHwgJycpOwogICAgZm9ybURhdGEuYXBwZW5kKCd0ZXJha2hpcl9kb25vcicsIHRoaXMuZm9ybS50ZXJha2hpcl9kb25vciB8fCAnJyk7CiAgICBmb3JtRGF0YS5hcHBlbmQoJ3N0b2tkYXJhaF9rb251dCcsIHRoaXMuZm9ybS5zdG9rZGFyYWhfa29udXQgfHwgNCk7CiAgICBmb3JtRGF0YS5hcHBlbmQoJ2JlcnNlZGlhX2RpcHVibGlrYXNpa2FuJywgMSk7IC8vIE90b21hdGlzIDEKCiAgICAvLyBBcHBlbmQgdXNlcm5hbWUgZGFuIHBhc3N3b3JkCiAgICBmb3JtRGF0YS5hcHBlbmQoJ3VzZXJuYW1lJywgdGhpcy5kYXRha3UudXNlcm5hbWUpOwogICAgZm9ybURhdGEuYXBwZW5kKCdwYXNzd29yZCcsIHRoaXMuZGF0YWt1LnBhc3N3b3JkKTsKCiAgICAvLyBBcHBlbmQgZmlsZQogICAgaWYgKHRoaXMuZm9ybS5mb3RvX3Byb2ZpbCAmJiB0aGlzLmZvcm0uZm90b19wcm9maWwgaW5zdGFuY2VvZiBGaWxlKSB7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZm90b19wcm9maWwnLCB0aGlzLmZvcm0uZm90b19wcm9maWwpOwogICAgfQogICAgaWYgKHRoaXMuZm9ybS5kb2t1bWVuX3BlbmR1a3VuZyAmJiB0aGlzLmZvcm0uZG9rdW1lbl9wZW5kdWt1bmcgaW5zdGFuY2VvZiBGaWxlKSB7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZG9rdW1lbl9wZW5kdWt1bmcnLCB0aGlzLmZvcm0uZG9rdW1lbl9wZW5kdWt1bmcpOwogICAgfQoKICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy4kc3RvcmUuc3RhdGUudXJsLlJFR0lTX0RPTk9SICsgImFkZERhdGEiLCB7CiAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICBoZWFkZXJzOiB7CiAgICAgICAgYXV0aG9yaXphdGlvbjogImtpa2Vuc2JhdGFyYSAiICsgbG9jYWxTdG9yYWdlLnRva2VuCiAgICAgIH0sCiAgICAgIGJvZHk6IGZvcm1EYXRhCiAgICB9KTsKCiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7CgogICAgaWYgKHJlc3BvbnNlLm9rICYmIHJlc3VsdC5zdWNjZXNzKSB7CiAgICAgIHRoaXMuJHEubm90aWZ5KHsKICAgICAgICB0eXBlOiAncG9zaXRpdmUnLAogICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5tZXNzYWdlIHx8ICdEYXRhIHBlbmRvbm9yIGJlcmhhc2lsIGRpdGFtYmFoa2FuIScKICAgICAgfSk7CgogICAgICB0aGlzLnJlc2V0Rm9ybSgpOwogICAgICB0aGlzLm1kbF9hZGQgPSBmYWxzZTsKICAgICAgdGhpcy5nZXRWaWV3KCk7CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgRXJyb3IocmVzdWx0Lm1lc3NhZ2UgfHwgJ1RlcmphZGkga2VzYWxhaGFuIHNhYXQgbWVuYW1iYWggZGF0YScpOwogICAgfQogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhZGRpbmcgZGF0YTonLCBlcnJvcik7CiAgICB0aGlzLiRxLm5vdGlmeSh7CiAgICAgIHR5cGU6ICduZWdhdGl2ZScsCiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgJ0dhZ2FsIG1lbmFtYmFoIGRhdGEgcGVuZG9ub3IhJwogICAgfSk7CiAgfSBmaW5hbGx5IHsKICAgIHRoaXMuYnRuX2FkZCA9IGZhbHNlOwogIH0KfSwKCgogICAgICByZXNldEZvcm0oKSB7CiAgICAgICAgIHRoaXMuZm9ybSA9IHsKICAgICAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgICAgIHVzZXJzX2lkOiBudWxsLAogICAgICAgICAgICBuYW1hX2xlbmdrYXA6ICcnLAogICAgICAgICAgICB0YW5nZ2FsX2xhaGlyOiAnJywKICAgICAgICAgICAgamVuaXNfa2VsYW1pbjogJycsCiAgICAgICAgICAgIGdvbG9uZ2FuX2RhcmFoOiAnJywKICAgICAgICAgICAgcmhlc3VzOiAnJywKICAgICAgICAgICAga2FidXBhdGVuX2lkOiBudWxsLAogICAgICAgICAgICBrZWNhbWF0YW5faWQ6IG51bGwsCiAgICAgICAgICAgIGRlc19rZWxfaWQ6IG51bGwsCiAgICAgICAgICAgIGFsYW1hdDogJycsCiAgICAgICAgICAgIGVtYWlsOiAnJywKICAgICAgICAgICAgbm9faHA6ICcnLAogICAgICAgICAgICByaXdheWF0X3Blbnlha2l0OiAnJywKICAgICAgICAgICAgdGVyYWtoaXJfZG9ub3I6ICcnLAogICAgICAgICAgICBiZXJzZWRpYV9kaXB1Ymxpa2FzaWthbjogZmFsc2UsCiAgICAgICAgICAgIGZvdG9fcHJvZmlsOiBudWxsLAogICAgICAgICAgICBkb2t1bWVuX3BlbmR1a3VuZzogbnVsbCwKICAgICAgICAgICAgc3Rva2RhcmFoX2tvbnV0OiA0LAogICAgICAgICAgICBzdGF0dXNfdmVyaWZpa2FzaTogJ2FjdGl2ZScsCiAgICAgICAgIH07CiAgICAgICAgIHRoaXMuZGF0YWt1ID0gewogICAgICAgICAgICB1c2VybmFtZTogJycsCiAgICAgICAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgICAgICAgY29uZmlybVBhc3N3b3JkOiAnJwogICAgICAgICB9OwogICAgICAgICB0aGlzLmZvcm0ua2FidXBhdGVuX2lkID0gbnVsbDsKICB0aGlzLmZvcm0ua2VjYW1hdGFuX2lkID0gbnVsbDsKICB0aGlzLmZvcm0uZGVzX2tlbF9pZCA9IG51bGw7CiAgdGhpcy5rZWNhbWF0YW5PcHRpb25zID0gW107CiAgdGhpcy5kZXNrZWxPcHRpb25zID0gW107CiAgICAgIH0sCgogICAgICBhc3luYyBlZGl0RGF0YSgpIHsKICAgICAgICAgdGhpcy5idG5fZWRpdCA9IHRydWU7CiAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIFNpYXBrYW4gZGF0YSB5YW5nIGFrYW4gZGlraXJpbSBrZSBiYWNrZW5kCiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSB7CiAgICAgICAgICAgICAgIGlkOiB0aGlzLmZvcm0uaWQsIC8vIGlkIHRlbmFnYSBtZWRpcwogICAgICAgICAgICAgICB1c2Vyc19pZDogdGhpcy5mb3JtLnVzZXJzX2lkLAogICAgICAgICAgICAgICBuYW1hX2xlbmdrYXA6IHRoaXMuZm9ybS5uYW1hX2xlbmdrYXAsCiAgICAgICAgICAgICAgIG5pcDogdGhpcy5mb3JtLm5pcCwKICAgICAgICAgICAgICAgbm9tb3JfaW5kdWtfcHJvZmVzaTogdGhpcy5mb3JtLm5vbW9yX2luZHVrX3Byb2Zlc2ksCiAgICAgICAgICAgICAgIGphYmF0YW5fZnVuZ3Npb25hbDogdGhpcy5mb3JtLmphYmF0YW5fZnVuZ3Npb25hbCwKICAgICAgICAgICAgICAgbm9fc3RyOiB0aGlzLmZvcm0ubm9fc3RyLAogICAgICAgICAgICAgICBtYXNhX2Jlcmxha3Vfc3RyOiB0aGlzLmZvcm0ubWFzYV9iZXJsYWt1X3N0ciwKICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuZm9ybS5lbWFpbCwKICAgICAgICAgICAgICAgbm9faHA6IHRoaXMuZm9ybS5ub19ocCwKICAgICAgICAgICAgICAgdGVtcGF0X2tlcmphOiB0aGlzLmZvcm0udGVtcGF0X2tlcmphLAogICAgICAgICAgICAgICBhbGFtYXRfcHJha3RpazogdGhpcy5mb3JtLmFsYW1hdF9wcmFrdGlrLAogICAgICAgICAgICAgICB1c2VybmFtZTogdGhpcy5kYXRha3UudXNlcm5hbWUgfHwgJycsIC8vIGppa2EgdXNlcm5hbWUgYmlzYSBkaWVkaXQKICAgICAgICAgICAgICAgLy8gSmlrYSBpbmdpbiB1cGRhdGUgcGFzc3dvcmQgZGkgc2luaSwgYmlzYSBkaXRhbWJhaGthbgogICAgICAgICAgICAgICAvLyBwYXNzd29yZDogdGhpcy5kYXRha3UucGFzc3dvcmQgfHwgdW5kZWZpbmVkLAogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gSmlrYSBhZGEgZmlsZSBiYXJ1IHlhbmcgZGl1cGxvYWQsIGd1bmFrYW4gRm9ybURhdGEKICAgICAgICAgICAgbGV0IHJlc3BvbnNlLCByZXN1bHQ7CiAgICAgICAgICAgIGlmICh0aGlzLmZvcm0uZmlsZV9zdHIgJiYgdGhpcy5mb3JtLmZpbGVfc3RyIGluc3RhbmNlb2YgRmlsZSkgewogICAgICAgICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBwYXlsb2FkKSB7CiAgICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChrZXksIHBheWxvYWRba2V5XSk7CiAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlX3N0cicsIHRoaXMuZm9ybS5maWxlX3N0cik7CgogICAgICAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuJHN0b3JlLnN0YXRlLnVybC5SRUdJUyArICJFZGl0VGVuYWdhTWVkaXMiLCB7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246ICJraWtlbnNiYXRhcmEgIiArIGxvY2FsU3RvcmFnZS50b2tlbgogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBib2R5OiBmb3JtRGF0YQogICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAvLyBKaWthIHRpZGFrIGFkYSBmaWxlIGJhcnUsIGtpcmltIEpTT04gYmlhc2EKICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLiRzdG9yZS5zdGF0ZS51cmwuUkVHSVMgKyAiRWRpdFRlbmFnYU1lZGlzIiwgewogICAgICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiAia2lrZW5zYmF0YXJhICIgKyBsb2NhbFN0b3JhZ2UudG9rZW4KICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkKICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rICYmIHJlc3VsdC5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgIHRoaXMuJHEubm90aWZ5KHsgdHlwZTogInBvc2l0aXZlIiwgbWVzc2FnZTogcmVzdWx0Lm1lc3NhZ2UgfHwgIkRhdGEgYmVyaGFzaWwgZGl1cGRhdGUiIH0pOwogICAgICAgICAgICAgICB0aGlzLm1kbF9lZGl0ID0gZmFsc2U7CiAgICAgICAgICAgICAgIHRoaXMuZ2V0VmlldygpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzdWx0Lm1lc3NhZ2UgfHwgIkdhZ2FsIG1lbmd1cGRhdGUgZGF0YSIpOwogICAgICAgICAgICB9CiAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIGVkaXQgZGF0YToiLCBlcnJvcik7CiAgICAgICAgICAgIHRoaXMuJHEubm90aWZ5KHsgdHlwZTogIm5lZ2F0aXZlIiwgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB8fCAiVGVyamFkaSBrZXNhbGFoYW4gc2FhdCB1cGRhdGUgZGF0YSIgfSk7CiAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHRoaXMuYnRuX2VkaXQgPSBmYWxzZTsKICAgICAgICAgfQogICAgICB9LAoKICAgICAgZWRpdE1vZGFsKGRhdGEpIHsKICAgICAgICAgdGhpcy5mb3JtID0gewogICAgICAgICAgICBpZDogZGF0YS5pZCwKICAgICAgICAgICAgdXNlcnNfaWQ6IGRhdGEudXNlcnNfaWQsCiAgICAgICAgICAgIG5hbWFfbGVuZ2thcDogZGF0YS5uYW1hX2xlbmdrYXAgfHwgJycsCiAgICAgICAgICAgIG5pcDogZGF0YS5uaXAgfHwgJycsCiAgICAgICAgICAgIG5vbW9yX2luZHVrX3Byb2Zlc2k6IGRhdGEubm9tb3JfaW5kdWtfcHJvZmVzaSB8fCAnJywKICAgICAgICAgICAgamFiYXRhbl9mdW5nc2lvbmFsOiBkYXRhLmphYmF0YW5fZnVuZ3Npb25hbCB8fCAnJywKICAgICAgICAgICAgbm9fc3RyOiBkYXRhLm5vX3N0ciB8fCAnJywKICAgICAgICAgICAgbWFzYV9iZXJsYWt1X3N0cjogZGF0YS5tYXNhX2Jlcmxha3Vfc3RyIHx8ICcnLAogICAgICAgICAgICBmaWxlX3N0cjogbnVsbCwgLy8gcmVzZXQgZmlsZSBpbnB1dCwgdXNlciBoYXJ1cyB1cGxvYWQgdWxhbmcgamlrYSBpbmdpbiBnYW50aQogICAgICAgICAgICBlbWFpbDogZGF0YS5lbWFpbCB8fCAnJywKICAgICAgICAgICAgbm9faHA6IGRhdGEubm9faHAgfHwgJycsCiAgICAgICAgICAgIHRlbXBhdF9rZXJqYTogZGF0YS50ZW1wYXRfa2VyamEgfHwgJycsCiAgICAgICAgICAgIGFsYW1hdF9wcmFrdGlrOiBkYXRhLmFsYW1hdF9wcmFrdGlrIHx8ICcnLAogICAgICAgICB9OwogICAgICAgICB0aGlzLmRhdGFrdS51c2VybmFtZSA9IGRhdGEudXNlcm5hbWUgfHwgJyc7CiAgICAgICAgIHRoaXMubWRsX2VkaXQgPSB0cnVlOwogICAgICB9LAoKICAgICAgYXN5bmMgaGFwdXNEYXRhKCkgewogICAgICAgICB0aGlzLmJ0bl9oYXB1cyA9IHRydWU7CiAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy4kc3RvcmUuc3RhdGUudXJsLlJFR0lTICsgInJlbW92ZVRlbmFnYU1lZGlzIiwgewogICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiAia2lrZW5zYmF0YXJhICIgKyBsb2NhbFN0b3JhZ2UudG9rZW4KICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICBpZDogdGhpcy5mb3JtLmlkLCAgICAgICAgICAgLy8gaWQgdGVuYWdhIG1lZGlzCiAgICAgICAgICAgICAgICAgIHVzZXJzX2lkOiB0aGlzLmZvcm0udXNlcnNfaWQgLy8gaWQgdXNlciB0ZXJrYWl0CiAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY29uc3QgcmVzX2RhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7CiAgICAgICAgICAgIHRoaXMuYnRuX2hhcHVzID0gZmFsc2U7CgogICAgICAgICAgICBpZiAocmVzcG9uc2Uub2sgJiYgcmVzX2RhdGEuc3VjY2VzcykgewogICAgICAgICAgICAgICB0aGlzLm1kbF9oYXB1cyA9IGZhbHNlOwogICAgICAgICAgICAgICB0aGlzLmdldFZpZXcoKTsgLy8gcmVmcmVzaCBkYXRhCiAgICAgICAgICAgICAgIHRoaXMuJHEubm90aWZ5KHsgdHlwZTogJ3Bvc2l0aXZlJywgbWVzc2FnZTogcmVzX2RhdGEubWVzc2FnZSB8fCAnRGF0YSBiZXJoYXNpbCBkaWhhcHVzJyB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgdGhpcy4kcS5ub3RpZnkoeyB0eXBlOiAnbmVnYXRpdmUnLCBtZXNzYWdlOiByZXNfZGF0YS5tZXNzYWdlIHx8ICdHYWdhbCBtZW5naGFwdXMgZGF0YScgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgdGhpcy5idG5faGFwdXMgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy4kcS5ub3RpZnkoeyB0eXBlOiAnbmVnYXRpdmUnLCBtZXNzYWdlOiAnVGVyamFkaSBrZXNhbGFoYW4gc2FhdCBtZW5naGFwdXMgZGF0YScgfSk7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGhhcHVzIGRhdGE6JywgZXJyb3IpOwogICAgICAgICB9CiAgICAgIH0sCgogICAgICBhc3luYyBlZGl0RGF0YVBhc3N3b3JkKCkgewogICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9ICcnOwoKICAgICAgICAgLy8gVmFsaWRhc2kgaW5wdXQgcGFzc3dvcmQKICAgICAgICAgaWYgKCF0aGlzLmRhdGFrdS5wYXNzd29yZCB8fCAhdGhpcy5kYXRha3UuY29uZmlybVBhc3N3b3JkKSB7CiAgICAgICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gIlBhc3N3b3JkIGRhbiBDb25maXJtIFBhc3N3b3JkIHdhamliIGRpaXNpISI7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgfQoKICAgICAgICAgaWYgKHRoaXMuZGF0YWt1LnBhc3N3b3JkLmxlbmd0aCA8IDYpIHsKICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSAiUGFzc3dvcmQgbWluaW1hbCA2IGthcmFrdGVyISI7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgfQoKICAgICAgICAgaWYgKHRoaXMuZGF0YWt1LnBhc3N3b3JkICE9PSB0aGlzLmRhdGFrdS5jb25maXJtUGFzc3dvcmQpIHsKICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSAiUGFzc3dvcmQgZGFuIENvbmZpcm0gUGFzc3dvcmQgdGlkYWsgc2FtYSEiOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgIH0KCiAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHRoaXMuJHN0b3JlLnN0YXRlLnVybC5SRUdJUyArICJlZGl0UGFzc3dvcmQiLCB7CiAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246ICJraWtlbnNiYXRhcmEgIiArIGxvY2FsU3RvcmFnZS50b2tlbgogICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgIHVzZXJzX2lkOiB0aGlzLmRhdGFrdS51c2Vyc19pZCwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMuZGF0YWt1LnBhc3N3b3JkCiAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7CgogICAgICAgICAgICBpZiAocmVzLm9rICYmIGRhdGEuc3VjY2VzcykgewogICAgICAgICAgICAgICB0aGlzLiRxLm5vdGlmeSh7IHR5cGU6ICJwb3NpdGl2ZSIsIG1lc3NhZ2U6IGRhdGEubWVzc2FnZSB8fCAiUGFzc3dvcmQgYmVyaGFzaWwgZGl1YmFoISIgfSk7CiAgICAgICAgICAgICAgIHRoaXMubWRsX3Bhc3N3b3JkID0gZmFsc2U7IC8vIHR1dHVwIG1vZGFsCiAgICAgICAgICAgICAgIC8vIFJlc2V0IHBhc3N3b3JkIGZpZWxkcwogICAgICAgICAgICAgICB0aGlzLmRhdGFrdS5wYXNzd29yZCA9ICcnOwogICAgICAgICAgICAgICB0aGlzLmRhdGFrdS5jb25maXJtUGFzc3dvcmQgPSAnJzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBkYXRhLm1lc3NhZ2UgfHwgIkdhZ2FsIG1lbmd1YmFoIHBhc3N3b3JkISI7CiAgICAgICAgICAgIH0KICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gIlRlcmphZGkga2VzYWxhaGFuIHNhYXQgbWVuZ3ViYWggcGFzc3dvcmQuIjsKICAgICAgICAgfQogICAgICB9LAoKCgoKICAgICAgc2VsZWN0RGF0YShkYXRhKSB7CiAgICAgICAgIHRoaXMuZGF0YWt1ID0gewogICAgICAgICAgICB1c2Vyc19pZDogZGF0YS51c2Vyc19pZCwKICAgICAgICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICAgICAgICBjb25maXJtUGFzc3dvcmQ6ICcnCiAgICAgICAgIH07CiAgICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gJyc7CiAgICAgICAgIHRoaXMuZm9ybSA9IHsKICAgICAgICAgICAgLi4uZGF0YSwKICAgICAgICAgICAgdXNlcnNfaWQ6IGRhdGEudXNlcnNfaWQsCiAgICAgICAgICAgIGlkOiBkYXRhLmlkCiAgICAgICAgIH07CiAgICAgIH0sCgogICAgICBhc3luYyBlZGl0RGF0YVBhc3N3b3JkKCkgewogICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9ICcnOwoKICAgICAgICAgLy8gdmFsaWRhc2kgcGFzc3dvcmQKICAgICAgICAgaWYgKCF0aGlzLmRhdGFrdS5wYXNzd29yZCB8fCAhdGhpcy5kYXRha3UuY29uZmlybVBhc3N3b3JkKSB7CiAgICAgICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gIlBhc3N3b3JkIGRhbiBDb25maXJtIFBhc3N3b3JkIHdhamliIGRpaXNpISI7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgfQoKICAgICAgICAgaWYgKHRoaXMuZGF0YWt1LnBhc3N3b3JkICE9PSB0aGlzLmRhdGFrdS5jb25maXJtUGFzc3dvcmQpIHsKICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSAiUGFzc3dvcmQgZGFuIENvbmZpcm0gUGFzc3dvcmQgdGlkYWsgc2FtYSEiOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgIH0KCiAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHRoaXMuJHN0b3JlLnN0YXRlLnVybC5SRUdJUyArICJlZGl0UGFzc3dvcmRUZW5hZ2FNZWRpcyIsIHsKICAgICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogImtpa2Vuc2JhdGFyYSAiICsgbG9jYWxTdG9yYWdlLnRva2VuCiAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgdXNlcnNfaWQ6IHRoaXMuZGF0YWt1LnVzZXJzX2lkLAogICAgICAgICAgICAgICAgICBwYXNzd29yZDogdGhpcy5kYXRha3UucGFzc3dvcmQKICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTsKCiAgICAgICAgICAgIGlmIChkYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgdGhpcy4kcS5ub3RpZnkoeyB0eXBlOiAicG9zaXRpdmUiLCBtZXNzYWdlOiAiUGFzc3dvcmQgYmVyaGFzaWwgZGl1YmFoISIgfSk7CiAgICAgICAgICAgICAgIHRoaXMubWRsX3Bhc3N3b3JkID0gZmFsc2U7IC8vIHR1dHVwIG1vZGFsCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gZGF0YS5tZXNzYWdlIHx8ICJHYWdhbCBtZW5ndWJhaCBwYXNzd29yZCEiOwogICAgICAgICAgICB9CiAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9ICJUZXJqYWRpIGtlc2FsYWhhbiBzYWF0IG1lbmd1YmFoIHBhc3N3b3JkLiI7CiAgICAgICAgIH0KICAgICAgfSwKCgogICAgICBpbmRleGluZyhpZHgpIHsKICAgICAgICAgcmV0dXJuICgodGhpcy5wYWdlX2ZpcnN0IC0gMSkgKiB0aGlzLnBhZ2VfbGltaXQpICsgaWR4OwogICAgICB9LAogICAgICBlZGl0TW9kYWwoZGF0YSkgewogICAgICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgICAgIC4uLmRhdGEsCiAgICAgICAgICAgIHBpY19uYW1hOiBkYXRhLm5hbWFfcGljIHx8ICcnLAogICAgICAgICAgICBwaWNfamFiYXRhbjogZGF0YS5qYWJhdGFuIHx8ICcnLAogICAgICAgICAgICBwaWNfZW1haWw6IGRhdGEuZW1haWxfcGljIHx8ICcnLAogICAgICAgICAgICBwaWNfaHA6IGRhdGEuaHBfcGljIHx8ICcnCiAgICAgICAgIH07CiAgICAgICAgIHRoaXMubWRsX2VkaXQgPSB0cnVlOwogICAgICB9LAoKCgogICAgICBjYXJpX2RhdGEoKSB7IHRoaXMucGFnZV9maXJzdCA9IDE7IHRoaXMuZ2V0VmlldygpOyB9CiAgIH0sCiAgIG1vdW50ZWQoKSB7CiAgICAgIHRoaXMuZ2V0VmlldygpOwogICAgICB0aGlzLmxvYWRLYWJ1cGF0ZW4oKTsKICAgfQp9Cg=="},{"version":3,"sources":["regisPendonor.vue"],"names":[],"mappings":";AA2aA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA","file":"regisPendonor.vue","sourceRoot":"src/views/dataMaster","sourcesContent":["<template>\n   <div class=\"about\" style=\"padding:15px\">\n      <q-card bordered class=\"my-card\">\n         <q-card-section class=\"main2 text-white\">\n            <div class=\"row\">\n               <div class=\"col-12 col-md-6\">\n                  <div class=\"text-h6 h_titleHead\">Registrasi Pendonor</div>\n                  <!-- <div class=\"text-subtitle2\">Program/Kegiatan</div> -->\n               </div>\n               <div class=\"col-12 col-md-2\"></div>\n               <div class=\"col-12 col-md-4\">\n                  <div class=\"row\">\n                     <q-input v-model=\"cari_value\" @keyup=\"cari_data()\" outlined square :dense=\"true\" class=\"bg-white\"\n                        style=\"width:90%\" />\n                     <q-btn glossy class=\"main1x\" @click=\"mdl_add = true\" dense flat icon=\"add\" style=\"width:10%\">\n                        <q-tooltip content-class=\"bg-blue-9\" content-style=\"font-size: 13px\">\n                           Click untuk menambah data\n                        </q-tooltip>\n                     </q-btn>\n                  </div>\n\n               </div>\n            </div>\n         </q-card-section>\n\n         <q-separator dark inset />\n\n         <q-card-section>\n            <!-- <hr class=\"hrpagin2\"> -->\n\n\n            <hr class=\"hrpagin2\">\n            <div class=\"tbl_responsive\">\n               <table width=\"100%\">\n                  <thead class=\"h_table_head main2x text-white\">\n                     <tr>\n                        <th width=\"5%\" class=\"text-center\">No</th>\n                        <th width=\"20%\">Nama Lengkap</th>\n                        <th width=\"15%\">TTL</th>\n                        <th width=\"15%\">Golongan Darah</th>\n                        <th width=\"10%\">No HP</th>\n                        <th width=\"10%\">username</th>\n                        <th width=\"25%\">Aksi</th>\n                     </tr>\n                  </thead>\n                  <tbody>\n                     <tr v-for=\"(data, index) in list_data\" :key=\"data.id + '-' + index\">\n                        <td class=\"text-center\">{{ indexing(index + 1) }}</td>\n\n                        <td>{{ data.nama_lengkap }}</td>\n                        <td>{{ UMUM.tglConvert(data.tanggal_lahir) }}</td>\n                        <td>{{ data.golongan_darah }}</td>\n                        <td>{{ data.no_hp }}</td>\n                        <td>{{ data.username }}</td>\n                        <td class=\"text-center\">\n                           <q-btn-group>\n                              <q-btn @click=\"mdl_password = true, selectData(data)\" glossy color=\"blue\" icon=\"vpn_key\"\n                                 class=\"tbl_btn\">\n                                 <q-tooltip content-class=\"bg-blue-9\" content-style=\"font-size: 13px\">\n                                    Click untuk mengubah password pengguna ini\n                                 </q-tooltip>\n                              </q-btn>\n                              <q-btn @click=\"editModal(data)\" glossy color=\"orange\" icon=\"create\" class=\"tbl_btn\">\n                                 <q-tooltip content-class=\"bg-orange-9\" content-style=\"font-size: 13px\">\n                                    Click untuk mengubah data ini\n                                 </q-tooltip>\n                              </q-btn>\n                              <q-btn @click=\"mdl_hapus = true, selectData(data)\" glossy color=\"negative\"\n                                 icon=\"delete_forever\" class=\"tbl_btn\">\n                                 <q-tooltip content-class=\"bg-red\" content-style=\"font-size: 13px\">\n                                    Click untuk menghapus data ini\n                                 </q-tooltip>\n                              </q-btn>\n                           </q-btn-group>\n                        </td>\n                     </tr>\n                  </tbody>\n               </table>\n            </div>\n\n            <div class=\"flex flex-center q-mt-md\">\n               <q-pagination v-model=\"page_first\" :max=\"page_last\" @update:model-value=\"getView()\" color=\"grey-6\"\n                  :max-pages=\"4\" :direction-links=\"true\" :boundary-links=\"true\" />\n            </div>\n         </q-card-section>\n      </q-card>\n\n      <!-- ===================== MODAL ADD ===================== -->\n      <q-dialog v-model=\"mdl_add\" persistent>\n         <q-card class=\"mdl-md\">\n            <q-card-section class=\"main2 text-white\">\n               <div class=\"text-h6 h_modalhead\">Tambah Pendonor</div>\n            </q-card-section>\n\n            <form @submit.prevent=\"addData()\">\n\n               <q-card-section class=\"q-pt-none\">\n\n                  <hr class=\"hrpagin2\">\n\n                  <span class=\"h_lable\">Nama Lengkap</span>\n                  <q-input v-model=\"form.nama_lengkap\" outlined square required :dense=\"true\"\n                     class=\"bg-white margin_btn\" />\n\n                  <div class=\"row q-col-gutter-md\">\n                     <div class=\"col-6\">\n                        <span class=\"h_lable\">Tanggal Lahir</span>\n                        <q-input v-model=\"form.tanggal_lahir\" type=\"date\" outlined required square :dense=\"true\"\n                           class=\"bg-white margin_btn\" />\n                     </div>\n\n                     <div class=\"col-6\">\n                        <span class=\"h_lable\">Jenis Kelamin</span>\n                        <q-select v-model=\"form.jenis_kelamin\" :options=\"[\n                        { label: 'Laki-laki', value: 'L' },\n                        { label: 'Perempuan', value: 'P' }\n                     ]\" outlined emit-value\n  map-options required square :dense=\"true\" class=\"bg-white margin_btn\" />\n                     </div>\n                  </div>\n\n                  <div class=\"row q-col-gutter-md\">\n                     <div class=\"col-6\">\n                        <span class=\"h_lable\">Email</span>\n                        <q-input v-model=\"form.email\" type=\"email\" outlined square :dense=\"true\"\n                           class=\"bg-white margin_btn\" />\n                     </div>\n\n                     <div class=\"col-6\">\n                        <span class=\"h_lable\">No HP</span>\n                        <q-input v-model=\"form.no_hp\" type=\"tel\" outlined square :dense=\"true\"\n                           class=\"bg-white margin_btn\" />\n\n                     </div>\n                  </div>\n                  <div class=\"row q-col-gutter-md\">\n                     <div class=\"col-6\">\n                        <span class=\"h_lable\">Golongan Darah</span>\n                        <q-select v-model=\"form.golongan_darah\" :options=\"[\n                        { label: 'A', value: 'A' },\n                        { label: 'B', value: 'B' },\n                        { label: 'AB', value: 'AB' },\n                        { label: 'O', value: 'O' }\n                     ]\" outlined required square emit-value\n  map-options :dense=\"true\" class=\"bg-white margin_btn\" />\n                     </div>\n\n                     <div class=\"col-6\">\n                        <span class=\"h_lable\">Rhesus *Kosongkan jika tidak tau</span>\n                        <q-select v-model=\"form.rhesus\" :options=\"[\n                        { label: '+', value: '+' },\n                        { label: '-', value: '-' }\n                     ]\" outlined square emit-value\n  map-options :dense=\"true\" class=\"bg-white margin_btn\" />\n\n                     </div>\n                  </div>\n\n\n\n                  <div class=\"row q-col-gutter-md margin_btn\">\n                     <div class=\"col-4\">\n                        <span class=\"h_lable\">Kabupaten (Optional)</span>\n                        <q-select v-model=\"form.kabupaten_id\" :options=\"kabupatenOptions\" outlined square dense\n                           emit-value map-options />\n\n                     </div>\n\n                     <div class=\"col-4\">\n                        <span class=\"h_lable\">Kecamatan (Optional)</span>\n                        <q-select v-model=\"form.kecamatan_id\" :options=\"kecamatanOptions\" outlined square dense\n                           emit-value map-options :disable=\"!form.kabupaten_id\" />\n\n                     </div>\n                     <div class=\"col-4\">\n                        <span class=\"h_lable\">Desa/Kelurahan (Optional)</span>\n                        <q-select v-model=\"form.des_kel_id\" :options=\"deskelOptions\" outlined square dense emit-value\n                           map-options :disable=\"!form.kecamatan_id\" />\n                     </div>\n                  </div>\n\n\n                  <span class=\"h_lable\">Alamat (Optional)</span>\n                  <q-input v-model=\"form.alamat\" type=\"textarea\" outlined square :dense=\"true\"\n                     class=\"bg-white margin_btn\" />\n\n\n                  <span class=\"h_lable\">Riwayat Penyakit (Optional)</span>\n                  <q-input v-model=\"form.riwayat_penyakit\" type=\"textarea\" outlined square :dense=\"true\"\n                     class=\"bg-white margin_btn\" />\n\n                  <span class=\"h_lable\">Terakhir Donor (Optional)</span>\n                  <q-input v-model=\"form.terakhir_donor\" type=\"date\" outlined square :dense=\"true\"\n                     class=\"bg-white margin_btn\" />\n\n\n\n                  <span class=\"h_lable\">Foto Profil (Optional)</span>\n                  <q-file v-model=\"form.foto_profil\" label=\"Pilih Foto\" accept=\"image/*\" outlined square dense\n                     class=\"bg-white margin_btn\" />\n\n                  <span class=\"h_lable\">Dokumen Pendukung (Optional)</span>\n                  <q-file v-model=\"form.dokumen_pendukung\" label=\"Pilih Dokumen\" accept=\".pdf,application/pdf\" outlined\n                     square dense class=\"bg-white margin_btn\" />\n\n                  <hr class=\"hrpagin2\">\n\n                  <span class=\"h_lable \">Username</span>\n                  <q-input v-model=\"dataku.username\" outlined square :dense=\"true\" class=\"bg-white margin_btn\" />\n\n\n                  <span class=\"h_lable \">Password</span>\n                  <q-input type=\"password\" v-model=\"dataku.password\" outlined square :dense=\"true\"\n                     class=\"bg-white margin_btn\" />\n\n                  <span class=\"h_lable \">Confirm Password</span>\n                  <q-input type=\"password\" v-model=\"dataku.confirmPassword\" outlined square :dense=\"true\"\n                     class=\"bg-white margin_btn\" />\n\n                  <hr class=\"hrpagin2\">\n\n               </q-card-section>\n\n               <q-card-actions class=\"bg-grey-4 mdl-footer\" align=\"right\">\n                  <q-btn :loading=\"btn_add\" color=\"primary\" type=\"submit\" label=\"Simpan\" />\n                  <q-btn label=\"Batal\" color=\"negative\" v-close-popup />\n               </q-card-actions>\n            </form>\n         </q-card>\n      </q-dialog>\n\n      <!-- ===================== MODAL EDIT ===================== -->\n      <q-dialog v-model=\"mdl_edit\" persistent>\n         <q-card class=\"mdl-md\">\n            <q-card-section class=\"main2 text-white\">\n               <div class=\"text-h6 h_modalhead\">Edit Pendonor</div>\n            </q-card-section>\n\n            <form @submit.prevent=\"updateData()\">\n\n               <q-card-section class=\"q-pt-none\">\n\n                  <hr class=\"hrpagin2\">\n\n                  <span class=\"h_lable\">Nama Lengkap</span>\n                  <q-input v-model=\"form.nama_lengkap\" outlined square required :dense=\"true\"\n                     class=\"bg-white margin_btn\" />\n\n                  <div class=\"row q-col-gutter-md\">\n                     <div class=\"col-6\">\n                        <span class=\"h_lable\">Tanggal Lahir</span>\n                        <q-input v-model=\"form.tanggal_lahir\" type=\"date\" outlined required square :dense=\"true\"\n                           class=\"bg-white margin_btn\" />\n                     </div>\n\n                     <div class=\"col-6\">\n                        <span class=\"h_lable\">Jenis Kelamin</span>\n                        <q-select v-model=\"form.jenis_kelamin\" :options=\"[\n                        { label: 'Laki-laki', value: 'L' },\n                        { label: 'Perempuan', value: 'P' }\n                     ]\" outlined required square :dense=\"true\" class=\"bg-white margin_btn\" />\n                     </div>\n                  </div>\n\n                  <div class=\"row q-col-gutter-md\">\n                     <div class=\"col-6\">\n                        <span class=\"h_lable\">Email</span>\n                        <q-input v-model=\"form.email\" type=\"email\" outlined square :dense=\"true\"\n                           class=\"bg-white margin_btn\" />\n                     </div>\n\n                     <div class=\"col-6\">\n                        <span class=\"h_lable\">No HP</span>\n                        <q-input v-model=\"form.no_hp\" type=\"tel\" outlined square :dense=\"true\"\n                           class=\"bg-white margin_btn\" />\n                     </div>\n                  </div>\n\n                  <div class=\"row q-col-gutter-md\">\n                     <div class=\"col-6\">\n                        <span class=\"h_lable\">Golongan Darah</span>\n                        <q-select v-model=\"form.golongan_darah\" :options=\"[\n                        { label: 'A', value: 'A' },\n                        { label: 'B', value: 'B' },\n                        { label: 'AB', value: 'AB' },\n                        { label: 'O', value: 'O' }\n                     ]\" outlined required square :dense=\"true\" class=\"bg-white margin_btn\" />\n                     </div>\n\n                     <div class=\"col-6\">\n                        <span class=\"h_lable\">Rhesus *Kosongkan jika tidak tau</span>\n                        <q-select v-model=\"form.rhesus\" :options=\"[\n                        { label: '+', value: '+' },\n                        { label: '-', value: '-' }\n                     ]\" outlined square :dense=\"true\" class=\"bg-white margin_btn\" />\n                     </div>\n                  </div>\n\n                  <div class=\"row q-col-gutter-md\">\n                     <div class=\"col-4\">\n                        <span class=\"h_lable\">Kabupaten (Optional)</span>\n                        <q-select v-model=\"form.kabupaten_id\" :options=\"kabupatenOptions\" outlined square :dense=\"true\"\n                           class=\"bg-white margin_btn\" emit-value map-options />\n                     </div>\n\n                     <div class=\"col-4\">\n                        <span class=\"h_lable\">Kecamatan (Optional)</span>\n                        <q-select v-model=\"form.kecamatan_id\" :options=\"kecamatanOptions\" outlined square :dense=\"true\"\n                           class=\"bg-white margin_btn\" emit-value map-options />\n                     </div>\n\n                     <div class=\"col-4\">\n                        <span class=\"h_lable\">Desa/Kelurahan (Optional)</span>\n                        <q-select v-model=\"form.des_kel_id\" :options=\"deskelOptions\" outlined square :dense=\"true\"\n                           class=\"bg-white margin_btn\" emit-value map-options />\n                     </div>\n                  </div>\n\n                  <span class=\"h_lable\">Alamat (Optional)</span>\n                  <q-input v-model=\"form.alamat\" type=\"textarea\" outlined square :dense=\"true\"\n                     class=\"bg-white margin_btn\" />\n\n                  <span class=\"h_lable\">Riwayat Penyakit (Optional)</span>\n                  <q-input v-model=\"form.riwayat_penyakit\" type=\"textarea\" outlined square :dense=\"true\"\n                     class=\"bg-white margin_btn\" />\n\n                  <span class=\"h_lable\">Terakhir Donor (Optional)</span>\n                  <q-input v-model=\"form.terakhir_donor\" type=\"date\" outlined square :dense=\"true\"\n                     class=\"bg-white margin_btn\" />\n\n                  <span class=\"h_lable\">Foto Profil (Optional)</span>\n                  <q-file v-model=\"form.foto_profil\" label=\"Pilih Foto\" accept=\"image/*\" outlined square dense\n                     class=\"bg-white margin_btn\" :clearable=\"true\" />\n                  <div v-if=\"form.foto_profil_url\" class=\"q-mb-md\">\n                     <img :src=\"form.foto_profil_url\" alt=\"Foto Profil\" style=\"max-width: 150px; max-height: 150px;\" />\n                  </div>\n\n                  <span class=\"h_lable\">Dokumen Pendukung (Optional)</span>\n                  <q-file v-model=\"form.dokumen_pendukung\" label=\"Pilih Dokumen\" accept=\".pdf,application/pdf\" outlined\n                     square dense class=\"bg-white margin_btn\" :clearable=\"true\" />\n                  <div v-if=\"form.dokumen_pendukung_url\" class=\"q-mb-md\">\n                     <a :href=\"form.dokumen_pendukung_url\" target=\"_blank\" rel=\"noopener\">Lihat Dokumen Saat Ini</a>\n                  </div>\n\n                  <hr class=\"hrpagin2\">\n\n               </q-card-section>\n\n               <q-card-actions class=\"bg-grey-4 mdl-footer\" align=\"right\">\n                  <q-btn :loading=\"btn_edit\" color=\"primary\" type=\"submit\" label=\"Update\" />\n                  <q-btn label=\"Batal\" color=\"negative\" v-close-popup />\n               </q-card-actions>\n            </form>\n         </q-card>\n      </q-dialog>\n\n\n      <!-- ================================================= MODAL PASSWORD ================================================ -->\n      <q-dialog v-model=\"mdl_password\" persistent>\n         <q-card class=\"mdl-md\">\n            <q-card-section class=\"bg-blue\">\n               <div class=\"text-h6 h_modalhead text-center\">Edit Password</div>\n            </q-card-section>\n\n            <q-card-section class=\"q-pt-none\">\n               <br>\n               <div class=\"row\">\n\n                  <div class=\"col-12 col-md-12 frame_cari\">\n                     <span class=\"h_lable \">Password</span>\n                     <q-input v-model=\"dataku.password\" type=\"password\" outlined square :dense=\"true\"\n                        class=\"bg-white margin_btn\" />\n                  </div>\n\n                  <div class=\"col-12 col-md-12 frame_cari\">\n                     <span class=\"h_lable \">Confirm Password</span>\n                     <q-input v-model=\"dataku.confirmPassword\" type=\"password\" outlined square :dense=\"true\"\n                        class=\"bg-white margin_btn\" />\n                  </div>\n\n                  <div class=\"col-12 col-md-12 frame_cari\">\n                     <div class=\"bg-red text-center\" v-if=\"errorMessage\" style=\"padding:2%\">\n                        <span style=\"color:white\">{{ errorMessage }}</span>\n                     </div>\n                  </div>\n\n               </div>\n\n            </q-card-section>\n\n            <q-card-actions class=\"bg-grey-4 mdl-footer\" align=\"right\">\n\n               <q-btn color=\"primary\" @click=\"editDataPassword()\" label=\"Simpan\" />\n               <q-btn label=\"Batal\" color=\"negative\" v-close-popup />\n\n            </q-card-actions>\n         </q-card>\n      </q-dialog>\n      <!-- ================================================= MODAL PASSWORD ================================================ -->\n      <!-- ================================================ MODAL HAPUS ================================================ -->\n      <q-dialog v-model=\"mdl_hapus\" persistent>\n         <q-card class=\"mdl-sm \">\n            <q-card-section class=\"q-pt-none text-center orageGrad\">\n               <form @submit.prevent=\"hapusData\">\n                  <br>\n                  <img src=\"img/alert.png\" alt=\"\" width=\"75\"> <br>\n                  <span class=\"h_notifikasi\">APAKAH ANDA YAKIN INGIN MENGHAPUS DATA INI??</span>\n                  <input type=\"submit\" style=\"position: absolute; left: -9999px\" />\n                  <br>\n                  <br>\n\n                  <q-btn label=\"Batal\" size=\"sm\" color=\"negative\" v-close-popup />\n                  &nbsp;\n                  <q-btn type=\"submit\" label=\"Hapus\" size=\"sm\" color=\"primary\" v-close-popup />\n\n               </form>\n            </q-card-section>\n         </q-card>\n      </q-dialog>\n      <!-- ================================================ MODAL HAPUS ================================================ -->\n\n\n   </div>\n</template>\n\n\n<script>\nimport UMUM from \"../../library/umum.js\";\nexport default {\n   data() {\n      return {\n\n         \n         UMUM: UMUM,\n\n         form: {\n            id: null,\n            users_id: null,\n            nama_lengkap: '',\n            tanggal_lahir: '',\n            jenis_kelamin: '',\n            golongan_darah: '',\n            rhesus: '',\n            kabupaten_id: null,\n            kecamatan_id: null,\n            des_kel_id: null,\n            alamat: '',\n            email: '',\n            no_hp: '',\n            riwayat_penyakit: null,\n            terakhir_donor: null,\n            foto_profil: null,\n            dokumen_pendukung: null,\n            stokdarah_konut: 4, \n            bersedia_dipublikasikan: true,\n         },\n         kabupatenOptions: [],\n         kecamatanOptions: [],\n         deskelOptions: [],\n\n         mdl_add: false,\n         mdl_edit: false,\n         mdl_hapus: false,\n         btn_add: false,\n         btn_edit: false,\n         file_path: this.$store.state.url.URL_APP + \"uploads/\",\n\n         list_data: [],\n         jml_data: 0,\n         total_data: 0,\n         page_first: 1,\n         page_last: 0,\n         page_limit: 10,\n         cari_value: '',\n\n\n\n         mdl_password: false,\n         dataku: {\n            username: '',\n            password: '',\n            confirmPassword: ''\n         },\n         errorMessage: '',\n      }\n   },\n   watch: {\n      // Ketika kabupaten_id berubah, load kecamatan terkait dan reset kecamatan & desa\n      'form.kabupaten_id'(newVal) {\n         this.form.kecamatan_id = null;\n         this.form.des_kel_id = null;\n         this.kecamatanOptions = [];\n         this.deskelOptions = [];\n         if (newVal) {\n            this.loadKecamatan(newVal);\n         }\n      },\n      // Ketika kecamatan_id berubah, load desa terkait dan reset desa\n      'form.kecamatan_id'(newVal) {\n         this.form.des_kel_id = null;\n         this.deskelOptions = [];\n         if (newVal) {\n            this.loadDeskel(newVal);\n         }\n      }\n   },\n   methods: {\n      loadKabupaten() {\n         fetch(this.$store.state.url.REGIS_DONOR + \"kabupaten\")\n            .then(res => res.json())\n            .then(res => {\n               if (res.success) {\n                  this.kabupatenOptions = res.data.map(item => ({\n                     label: item.label,\n                     value: item.id\n                  }));\n               } else {\n                  this.$q.notify({ type: 'negative', message: 'Gagal memuat data kabupaten' });\n               }\n            })\n            .catch(() => {\n               this.$q.notify({ type: 'negative', message: 'Terjadi kesalahan saat memuat kabupaten' });\n            });\n      },\n      loadKecamatan(kabupatenId) {\n         fetch(`${this.$store.state.url.REGIS_DONOR}kecamatan?kabupaten_id=${kabupatenId}`)\n            .then(res => res.json())\n            .then(res => {\n               if (res.success) {\n                  this.kecamatanOptions = res.data.map(item => ({\n                     label: item.label,\n                     value: item.id\n                  }));\n               } else {\n                  this.$q.notify({ type: 'negative', message: 'Gagal memuat data kecamatan' });\n               }\n            })\n            .catch(() => {\n               this.$q.notify({ type: 'negative', message: 'Terjadi kesalahan saat memuat kecamatan' });\n            });\n      },\n      loadDeskel(kecamatanId) {\n         fetch(`${this.$store.state.url.REGIS_DONOR}deskel?kecamatan_id=${kecamatanId}`)\n            .then(res => res.json())\n            .then(res => {\n               if (res.success) {\n                  this.deskelOptions = res.data.map(item => ({\n                     label: item.label,\n                     value: item.id\n                  }));\n               } else {\n                  this.$q.notify({ type: 'negative', message: 'Gagal memuat data desa/kelurahan' });\n               }\n            })\n            .catch(() => {\n               this.$q.notify({ type: 'negative', message: 'Terjadi kesalahan saat memuat desa/kelurahan' });\n            });\n      },\n\n\n      // ========== GET VIEW DATA ==========\n      getView() {\n         const body = {\n            page_limit: this.page_limit,\n            data_ke: (this.page_first - 1) * this.page_limit,\n            cari_value: this.cari_value,\n         };\n\n         fetch(this.$store.state.url.REGIS_DONOR + \"getview\", {\n            method: \"POST\",\n            headers: {\n               \"content-type\": \"application/json\",\n               authorization: \"kikensbatara \" + localStorage.token\n            },\n            body: JSON.stringify(body)\n         })\n            .then(res => res.json())\n            .then(res_data => {\n               if (res_data.success) {\n                  this.list_data = res_data.data;\n                  this.jml_data = res_data.jml_data;\n                  this.total_data = res_data.total_data;\n                  this.page_last = Math.ceil(this.total_data / this.page_limit);\n               } else {\n                  this.$q.notify({ type: \"negative\", message: res_data.message || \"Gagal mengambil data\" });\n               }\n            })\n            .catch(err => {\n               console.error(\"Error fetching data:\", err);\n               this.$q.notify({ type: \"negative\", message: \"Gagal mengambil data pendonor\" });\n            });\n      },\n\n      async addData() {\n  try {\n    // Validasi confirm password\n    if (this.dataku.password !== this.dataku.confirmPassword) {\n      this.$q.notify({\n        type: 'negative',\n        message: 'Password dan konfirmasi password tidak sama!'\n      });\n      return;\n    }\n    if (this.dataku.password.length < 6) {\n      this.$q.notify({\n        type: 'negative',\n        message: 'Password minimal 6 karakter!'\n      });\n      return;\n    }\n    if (!this.dataku.username) {\n      this.$q.notify({\n        type: 'negative',\n        message: 'Username wajib diisi!'\n      });\n      return;\n    }\n\n    this.btn_add = true;\n\n    const formData = new FormData();\n\n    // Append field pendonor\n    formData.append('nama_lengkap', this.form.nama_lengkap);\n    formData.append('tanggal_lahir', this.form.tanggal_lahir);\n    formData.append('jenis_kelamin', this.form.jenis_kelamin);\n    formData.append('golongan_darah', this.form.golongan_darah);\n    formData.append('rhesus', this.form.rhesus || '');\n    formData.append('kabupaten_id', this.form.kabupaten_id || '');\n    formData.append('kecamatan_id', this.form.kecamatan_id || '');\n    formData.append('des_kel_id', this.form.des_kel_id || '');\n    formData.append('alamat', this.form.alamat || '');\n    formData.append('email', this.form.email || '');\n    formData.append('no_hp', this.form.no_hp || '');\n    formData.append('riwayat_penyakit', this.form.riwayat_penyakit || '');\n    formData.append('terakhir_donor', this.form.terakhir_donor || '');\n    formData.append('stokdarah_konut', this.form.stokdarah_konut || 4);\n    formData.append('bersedia_dipublikasikan', 1); // Otomatis 1\n\n    // Append username dan password\n    formData.append('username', this.dataku.username);\n    formData.append('password', this.dataku.password);\n\n    // Append file\n    if (this.form.foto_profil && this.form.foto_profil instanceof File) {\n      formData.append('foto_profil', this.form.foto_profil);\n    }\n    if (this.form.dokumen_pendukung && this.form.dokumen_pendukung instanceof File) {\n      formData.append('dokumen_pendukung', this.form.dokumen_pendukung);\n    }\n\n    const response = await fetch(this.$store.state.url.REGIS_DONOR + \"addData\", {\n      method: 'POST',\n      headers: {\n        authorization: \"kikensbatara \" + localStorage.token\n      },\n      body: formData\n    });\n\n    const result = await response.json();\n\n    if (response.ok && result.success) {\n      this.$q.notify({\n        type: 'positive',\n        message: result.message || 'Data pendonor berhasil ditambahkan!'\n      });\n\n      this.resetForm();\n      this.mdl_add = false;\n      this.getView();\n    } else {\n      throw new Error(result.message || 'Terjadi kesalahan saat menambah data');\n    }\n  } catch (error) {\n    console.error('Error adding data:', error);\n    this.$q.notify({\n      type: 'negative',\n      message: error.message || 'Gagal menambah data pendonor!'\n    });\n  } finally {\n    this.btn_add = false;\n  }\n},\n\n\n      resetForm() {\n         this.form = {\n            id: null,\n            users_id: null,\n            nama_lengkap: '',\n            tanggal_lahir: '',\n            jenis_kelamin: '',\n            golongan_darah: '',\n            rhesus: '',\n            kabupaten_id: null,\n            kecamatan_id: null,\n            des_kel_id: null,\n            alamat: '',\n            email: '',\n            no_hp: '',\n            riwayat_penyakit: '',\n            terakhir_donor: '',\n            bersedia_dipublikasikan: false,\n            foto_profil: null,\n            dokumen_pendukung: null,\n            stokdarah_konut: 4,\n            status_verifikasi: 'active',\n         };\n         this.dataku = {\n            username: '',\n            password: '',\n            confirmPassword: ''\n         };\n         this.form.kabupaten_id = null;\n  this.form.kecamatan_id = null;\n  this.form.des_kel_id = null;\n  this.kecamatanOptions = [];\n  this.deskelOptions = [];\n      },\n\n      async editData() {\n         this.btn_edit = true;\n         try {\n            // Siapkan data yang akan dikirim ke backend\n            const payload = {\n               id: this.form.id, // id tenaga medis\n               users_id: this.form.users_id,\n               nama_lengkap: this.form.nama_lengkap,\n               nip: this.form.nip,\n               nomor_induk_profesi: this.form.nomor_induk_profesi,\n               jabatan_fungsional: this.form.jabatan_fungsional,\n               no_str: this.form.no_str,\n               masa_berlaku_str: this.form.masa_berlaku_str,\n               email: this.form.email,\n               no_hp: this.form.no_hp,\n               tempat_kerja: this.form.tempat_kerja,\n               alamat_praktik: this.form.alamat_praktik,\n               username: this.dataku.username || '', // jika username bisa diedit\n               // Jika ingin update password di sini, bisa ditambahkan\n               // password: this.dataku.password || undefined,\n            };\n\n            // Jika ada file baru yang diupload, gunakan FormData\n            let response, result;\n            if (this.form.file_str && this.form.file_str instanceof File) {\n               const formData = new FormData();\n               for (const key in payload) {\n                  formData.append(key, payload[key]);\n               }\n               formData.append('file_str', this.form.file_str);\n\n               response = await fetch(this.$store.state.url.REGIS + \"EditTenagaMedis\", {\n                  method: \"POST\",\n                  headers: {\n                     authorization: \"kikensbatara \" + localStorage.token\n                  },\n                  body: formData\n               });\n               result = await response.json();\n            } else {\n               // Jika tidak ada file baru, kirim JSON biasa\n               response = await fetch(this.$store.state.url.REGIS + \"EditTenagaMedis\", {\n                  method: \"POST\",\n                  headers: {\n                     \"Content-Type\": \"application/json\",\n                     authorization: \"kikensbatara \" + localStorage.token\n                  },\n                  body: JSON.stringify(payload)\n               });\n               result = await response.json();\n            }\n\n            if (response.ok && result.success) {\n               this.$q.notify({ type: \"positive\", message: result.message || \"Data berhasil diupdate\" });\n               this.mdl_edit = false;\n               this.getView();\n            } else {\n               throw new Error(result.message || \"Gagal mengupdate data\");\n            }\n         } catch (error) {\n            console.error(\"Error edit data:\", error);\n            this.$q.notify({ type: \"negative\", message: error.message || \"Terjadi kesalahan saat update data\" });\n         } finally {\n            this.btn_edit = false;\n         }\n      },\n\n      editModal(data) {\n         this.form = {\n            id: data.id,\n            users_id: data.users_id,\n            nama_lengkap: data.nama_lengkap || '',\n            nip: data.nip || '',\n            nomor_induk_profesi: data.nomor_induk_profesi || '',\n            jabatan_fungsional: data.jabatan_fungsional || '',\n            no_str: data.no_str || '',\n            masa_berlaku_str: data.masa_berlaku_str || '',\n            file_str: null, // reset file input, user harus upload ulang jika ingin ganti\n            email: data.email || '',\n            no_hp: data.no_hp || '',\n            tempat_kerja: data.tempat_kerja || '',\n            alamat_praktik: data.alamat_praktik || '',\n         };\n         this.dataku.username = data.username || '';\n         this.mdl_edit = true;\n      },\n\n      async hapusData() {\n         this.btn_hapus = true;\n         try {\n            const response = await fetch(this.$store.state.url.REGIS + \"removeTenagaMedis\", {\n               method: \"POST\",\n               headers: {\n                  \"Content-Type\": \"application/json\",\n                  authorization: \"kikensbatara \" + localStorage.token\n               },\n               body: JSON.stringify({\n                  id: this.form.id,           // id tenaga medis\n                  users_id: this.form.users_id // id user terkait\n               })\n            });\n\n            const res_data = await response.json();\n            this.btn_hapus = false;\n\n            if (response.ok && res_data.success) {\n               this.mdl_hapus = false;\n               this.getView(); // refresh data\n               this.$q.notify({ type: 'positive', message: res_data.message || 'Data berhasil dihapus' });\n            } else {\n               this.$q.notify({ type: 'negative', message: res_data.message || 'Gagal menghapus data' });\n            }\n         } catch (error) {\n            this.btn_hapus = false;\n            this.$q.notify({ type: 'negative', message: 'Terjadi kesalahan saat menghapus data' });\n            console.error('Error hapus data:', error);\n         }\n      },\n\n      async editDataPassword() {\n         this.errorMessage = '';\n\n         // Validasi input password\n         if (!this.dataku.password || !this.dataku.confirmPassword) {\n            this.errorMessage = \"Password dan Confirm Password wajib diisi!\";\n            return;\n         }\n\n         if (this.dataku.password.length < 6) {\n            this.errorMessage = \"Password minimal 6 karakter!\";\n            return;\n         }\n\n         if (this.dataku.password !== this.dataku.confirmPassword) {\n            this.errorMessage = \"Password dan Confirm Password tidak sama!\";\n            return;\n         }\n\n         try {\n            const res = await fetch(this.$store.state.url.REGIS + \"editPassword\", {\n               method: \"POST\",\n               headers: {\n                  \"Content-Type\": \"application/json\",\n                  authorization: \"kikensbatara \" + localStorage.token\n               },\n               body: JSON.stringify({\n                  users_id: this.dataku.users_id,\n                  password: this.dataku.password\n               })\n            });\n\n            const data = await res.json();\n\n            if (res.ok && data.success) {\n               this.$q.notify({ type: \"positive\", message: data.message || \"Password berhasil diubah!\" });\n               this.mdl_password = false; // tutup modal\n               // Reset password fields\n               this.dataku.password = '';\n               this.dataku.confirmPassword = '';\n            } else {\n               this.errorMessage = data.message || \"Gagal mengubah password!\";\n            }\n         } catch (error) {\n            console.error(error);\n            this.errorMessage = \"Terjadi kesalahan saat mengubah password.\";\n         }\n      },\n\n\n\n\n      selectData(data) {\n         this.dataku = {\n            users_id: data.users_id,\n            password: '',\n            confirmPassword: ''\n         };\n         this.errorMessage = '';\n         this.form = {\n            ...data,\n            users_id: data.users_id,\n            id: data.id\n         };\n      },\n\n      async editDataPassword() {\n         this.errorMessage = '';\n\n         // validasi password\n         if (!this.dataku.password || !this.dataku.confirmPassword) {\n            this.errorMessage = \"Password dan Confirm Password wajib diisi!\";\n            return;\n         }\n\n         if (this.dataku.password !== this.dataku.confirmPassword) {\n            this.errorMessage = \"Password dan Confirm Password tidak sama!\";\n            return;\n         }\n\n         try {\n            const res = await fetch(this.$store.state.url.REGIS + \"editPasswordTenagaMedis\", {\n               method: \"POST\",\n               headers: {\n                  \"Content-Type\": \"application/json\",\n                  authorization: \"kikensbatara \" + localStorage.token\n               },\n               body: JSON.stringify({\n                  users_id: this.dataku.users_id,\n                  password: this.dataku.password\n               })\n            });\n\n            const data = await res.json();\n\n            if (data.success) {\n               this.$q.notify({ type: \"positive\", message: \"Password berhasil diubah!\" });\n               this.mdl_password = false; // tutup modal\n            } else {\n               this.errorMessage = data.message || \"Gagal mengubah password!\";\n            }\n         } catch (error) {\n            console.error(error);\n            this.errorMessage = \"Terjadi kesalahan saat mengubah password.\";\n         }\n      },\n\n\n      indexing(idx) {\n         return ((this.page_first - 1) * this.page_limit) + idx;\n      },\n      editModal(data) {\n         this.form = {\n            ...data,\n            pic_nama: data.nama_pic || '',\n            pic_jabatan: data.jabatan || '',\n            pic_email: data.email_pic || '',\n            pic_hp: data.hp_pic || ''\n         };\n         this.mdl_edit = true;\n      },\n\n\n\n      cari_data() { this.page_first = 1; this.getView(); }\n   },\n   mounted() {\n      this.getView();\n      this.loadKabupaten();\n   }\n}\n</script>\n"]}]}