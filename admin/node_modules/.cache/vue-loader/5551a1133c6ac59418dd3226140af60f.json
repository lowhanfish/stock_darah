{"remainingRequest":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/simplephi/Documents/riswan/stock_darah/admin/src/views/informasi/jadwal_donor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/src/views/informasi/jadwal_donor.vue","mtime":1761460832958},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/cache-loader/dist/cjs.js","mtime":1758930418112},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/babel-loader/lib/index.js","mtime":1758930419036},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js","mtime":1758930412679},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/cache-loader/dist/cjs.js","mtime":1758930418112},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/vue-loader/lib/index.js","mtime":1758930412640}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBVTVVNIGZyb20gIi4uLy4uL2xpYnJhcnkvdW11bS5qcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGxpc3RfZGF0YTogW10sCiAgICAgICAgICAgIGZvcm06IHsKICAgICAgICAgICAgICAgIG5hbWFfa2VnaWF0YW46ICcnLAogICAgICAgICAgICAgICAgdGFuZ2dhbF9tdWxhaTogJycsCiAgICAgICAgICAgICAgICB0YW5nZ2FsX3NlbGVzYWk6ICcnLAogICAgICAgICAgICAgICAgamFtOiAnJywKICAgICAgICAgICAgICAgIGxva2FzaTogJycsCiAgICAgICAgICAgICAgICBtYXBfbGluazogJycsCiAgICAgICAgICAgICAgICBrZXRlcmFuZ2FuOiAnJywKICAgICAgICAgICAgICAgIGZpbGVfbmFtZTogbnVsbCwKICAgICAgICAgICAgICAgIGp1bWxhaF90ZXJkYWZ0YXI6IG51bGwsCiAgICAgICAgICAgICAgICBzdGF0dXM6IDEgLy8gZGVmYXVsdCBha3RpZgogICAgICAgICAgICB9LAogICAgICAgICAgICBmaWxlQmFydTogbnVsbCwKICAgICAgICAgICAgVU1VTTogVU1VTSwKICAgICAgICAgICAgYnRuX2FkZDogZmFsc2UsCiAgICAgICAgICAgIGJ0bl9lZGl0OiBmYWxzZSwKICAgICAgICAgICAgbWRsX2FkZDogZmFsc2UsCiAgICAgICAgICAgIG1kbF9lZGl0OiBmYWxzZSwKICAgICAgICAgICAgbWRsX2RlbGV0ZTogZmFsc2UsCiAgICAgICAgICAgIG1kbF9saWhhdDogZmFsc2UsCiAgICAgICAgICAgIG1kbF9pbWFnZTogZmFsc2UsCiAgICAgICAgICAgIG1kbF9wZXNlcnRhOiBmYWxzZSwKICAgICAgICAgICAgc2VsZWN0ZWRJbWFnZTogbnVsbCwKICAgICAgICAgICAgY2FyaV92YWx1ZTogIiIsCiAgICAgICAgICAgIHBhZ2VfZmlyc3Q6IDEsCiAgICAgICAgICAgIHBhZ2VfbGFzdDogMSwKICAgICAgICAgICAgcGFnZV9saW1pdDogOSwKICAgICAgICAgICAgdG90YWw6IDAsCiAgICAgICAgICAgIHRpcGU6IG51bGwsCiAgICAgICAgICAgIGZpbGVfcGF0aDogdGhpcy4kc3RvcmUuc3RhdGUudXJsLlVSTF9BUFAgKyAidXBsb2Fkcy8iLAogICAgICAgICAgICBzdGF0dXNPcHRpb25zOiBbCiAgICAgICAgICAgICAgICB7IGxhYmVsOiAnMSAtIEFrdGlmJywgdmFsdWU6IDEgfSwKICAgICAgICAgICAgICAgIHsgbGFiZWw6ICcyIC0gU2VsZXNhaScsIHZhbHVlOiAyIH0sCiAgICAgICAgICAgICAgICB7IGxhYmVsOiAnMyAtIERpYmF0YWxrYW4nLCB2YWx1ZTogMyB9CiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIGN1cnJlbnRKYWR3YWw6IHt9LAogICAgICAgICAgICBwYXJ0aWNpcGFudHM6IFtdLAogICAgICAgICAgICBwZW5kb25vckRhcmFoT3B0aW9uczogW10sCiAgICAgICAgICAgIHNlbGVjdGVkUGVuZG9ub3I6IG51bGwsCiAgICAgICAgICAgIGJ0bl9hZGRfcGVzZXJ0YTogZmFsc2UsCiAgICAgICAgICAgIHNlYXJjaElucHV0OiAnJywKICAgICAgICB9CiAgICB9LAoKCiAgICBjb21wdXRlZDogewogICAgICAgIGF2YWlsYWJsZU9wdGlvbnMoKSB7CiAgICAgICAgICAgIC8vIGJ1YXQgc2V0IGlkIHBlc2VydGEgKHN0cmluZykgdW50dWsgcGVyYmFuZGluZ2FuCiAgICAgICAgICAgIGNvbnN0IHBhcnRJZHMgPSBuZXcgU2V0KAogICAgICAgICAgICAgICAgKHRoaXMucGFydGljaXBhbnRzIHx8IFtdKQogICAgICAgICAgICAgICAgICAgIC5tYXAocCA9PiBTdHJpbmcocC5wZW5kb25vcl9pZCA/PyBwLmlkID8/IHAudXNlcl9pZCA/PyBwLmlkX3BlbmRvbm9yID8/ICcnKSkKICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pCiAgICAgICAgICAgICk7CgogICAgICAgICAgICAvLyBub3JtYWxpc2FzaSBwZW5kb25vckRhcmFoT3B0aW9ucyAtPiBwYXN0aWthbiBpZCBzZWJhZ2FpIHN0cmluZyBkYW4gYWRhIGxhYmVsCiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSAodGhpcy5wZW5kb25vckRhcmFoT3B0aW9ucyB8fCBbXSkubWFwKG9wdCA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIC4uLm9wdCwKICAgICAgICAgICAgICAgICAgICBpZDogU3RyaW5nKG9wdC5pZCksCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IChvcHQubGFiZWwgfHwgYCR7b3B0Lm5hbWFfbGVuZ2thcCB8fCBvcHQubmFtYSB8fCAnLSd9IOKAlCAke29wdC5nb2xvbmdhbl9kYXJhaCB8fCAnJ30gJHtvcHQucmhlc3VzID8gb3B0LnJoZXN1cyA6ICcnfSDigJQgJHtvcHQubm9faHAgfHwgJy0nfWApLnRyaW0oKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBoaWxhbmdrYW4geWFuZyBzdWRhaCB0ZXJkYWZ0YXIKICAgICAgICAgICAgbGV0IGF2YWlsYWJsZSA9IG5vcm1hbGl6ZWQuZmlsdGVyKG8gPT4gIXBhcnRJZHMuaGFzKFN0cmluZyhvLmlkKSkpOwoKICAgICAgICAgICAgLy8gaGFwdXMgZHVwbGlrYXQgYmVyZGFzYXJrYW4gaWQgKGtlYW1hbmFuKQogICAgICAgICAgICBhdmFpbGFibGUgPSBhdmFpbGFibGUuZmlsdGVyKChpdGVtLCBpZHgsIGFycikgPT4gYXJyLmZpbmRJbmRleCh4ID0+IHguaWQgPT09IGl0ZW0uaWQpID09PSBpZHgpOwoKICAgICAgICAgICAgLy8gc3VwcG9ydCBzZWFyY2hJbnB1dCBzZXBlcnRpIHNlYmVsdW1ueWEKICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBTdHJpbmcodGhpcy5zZWFyY2hJbnB1dCB8fCAnJykudG9Mb3dlckNhc2UoKS50cmltKCk7CiAgICAgICAgICAgIGlmICghaW5wdXQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBhdmFpbGFibGUuc2xpY2UoMCwgOCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGF2YWlsYWJsZS5maWx0ZXIob3B0ID0+IChvcHQubGFiZWwgfHwgJycpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoaW5wdXQpKTsKICAgICAgICB9CiAgICB9LAoKICAgIG1ldGhvZHM6IHsKCiAgICAgICAgc3RhdHVzTGFiZWwodmFsKSB7CiAgICAgICAgICAgIGlmICh2YWwgPT0gMSkgcmV0dXJuICdBa3RpZicKICAgICAgICAgICAgaWYgKHZhbCA9PSAyKSByZXR1cm4gJ1NlbGVzYWknCiAgICAgICAgICAgIGlmICh2YWwgPT0gMykgcmV0dXJuICdEaWJhdGFsa2FuJwogICAgICAgICAgICByZXR1cm4gJy0nCiAgICAgICAgfSwKCiAgICAgICAgc3RhdHVzQ29sb3IodmFsKSB7CiAgICAgICAgICAgIGlmICh2YWwgPT0gMSkgcmV0dXJuICdwb3NpdGl2ZScKICAgICAgICAgICAgaWYgKHZhbCA9PSAyKSByZXR1cm4gJ3dhcm5pbmcnCiAgICAgICAgICAgIGlmICh2YWwgPT0gMykgcmV0dXJuICduZWdhdGl2ZScKICAgICAgICAgICAgcmV0dXJuICdncmV5JwogICAgICAgIH0sCgogICAgICAgIG9wZW5FZGl0KGRhdGEpIHsKICAgICAgICAgICAgdGhpcy5mb3JtID0gewogICAgICAgICAgICAgICAgaWQ6IGRhdGEuaWQgfHwgbnVsbCwKICAgICAgICAgICAgICAgIG5hbWFfa2VnaWF0YW46IGRhdGEubmFtYV9rZWdpYXRhbiB8fCAnJywKICAgICAgICAgICAgICAgIHRhbmdnYWxfbXVsYWk6IGRhdGEudGFuZ2dhbF9tdWxhaSB8fCAnJywKICAgICAgICAgICAgICAgIHRhbmdnYWxfc2VsZXNhaTogZGF0YS50YW5nZ2FsX3NlbGVzYWkgfHwgJycsCiAgICAgICAgICAgICAgICBqYW06IGRhdGEuamFtIHx8ICcnLAogICAgICAgICAgICAgICAgbG9rYXNpOiBkYXRhLmxva2FzaSB8fCAnJywKICAgICAgICAgICAgICAgIG1hcF9saW5rOiBkYXRhLm1hcF9saW5rIHx8ICcnLAogICAgICAgICAgICAgICAga2V0ZXJhbmdhbjogZGF0YS5rZXRlcmFuZ2FuIHx8ICcnLAogICAgICAgICAgICAgICAgZmlsZV9uYW1lOiBkYXRhLmZpbGVfbmFtZSB8fCBudWxsLAogICAgICAgICAgICAgICAganVtbGFoX3RlcmRhZnRhcjogZGF0YS5qdW1sYWhfdGVyZGFmdGFyID8/IG51bGwsCiAgICAgICAgICAgICAgICBzdGF0dXM6IGRhdGEuc3RhdHVzICE9IG51bGwgPyBkYXRhLnN0YXR1cyA6IDEKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmZpbGVCYXJ1ID0gbnVsbAogICAgICAgICAgICB0aGlzLm1kbF9lZGl0ID0gdHJ1ZQogICAgICAgIH0sCgoKICAgICAgICBvcGVuRGVsZXRlKGRhdGEpIHsKICAgICAgICAgICAgdGhpcy5mb3JtID0geyBpZDogZGF0YS5pZCB9CiAgICAgICAgICAgIHRoaXMubWRsX2RlbGV0ZSA9IHRydWUKICAgICAgICB9LAoKICAgICAgICBvcGVuTGloYXQoZGF0YSkgewogICAgICAgICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgICAgICAgICBpZDogZGF0YS5pZCB8fCBudWxsLAogICAgICAgICAgICAgICAgbmFtYV9rZWdpYXRhbjogZGF0YS5uYW1hX2tlZ2lhdGFuIHx8ICcnLAogICAgICAgICAgICAgICAgdGFuZ2dhbF9tdWxhaTogZGF0YS50YW5nZ2FsX211bGFpIHx8ICcnLAogICAgICAgICAgICAgICAgdGFuZ2dhbF9zZWxlc2FpOiBkYXRhLnRhbmdnYWxfc2VsZXNhaSB8fCAnJywKICAgICAgICAgICAgICAgIGphbTogZGF0YS5qYW0gfHwgJycsCiAgICAgICAgICAgICAgICBsb2thc2k6IGRhdGEubG9rYXNpIHx8ICcnLAogICAgICAgICAgICAgICAgbWFwX2xpbms6IGRhdGEubWFwX2xpbmsgfHwgJycsCiAgICAgICAgICAgICAgICBrZXRlcmFuZ2FuOiBkYXRhLmtldGVyYW5nYW4gfHwgJycsCiAgICAgICAgICAgICAgICBmaWxlX25hbWU6IGRhdGEuZmlsZV9uYW1lIHx8IG51bGwsCiAgICAgICAgICAgICAgICBqdW1sYWhfdGVyZGFmdGFyOiBkYXRhLmp1bWxhaF90ZXJkYWZ0YXIgPz8gbnVsbCwKICAgICAgICAgICAgICAgIHN0YXR1czogZGF0YS5zdGF0dXMgIT0gbnVsbCA/IE51bWJlcihkYXRhLnN0YXR1cykgOiAxCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5tZGxfbGloYXQgPSB0cnVlCiAgICAgICAgfSwKCiAgICAgICAgb3BlbkltYWdlKHNyYykgewogICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW1hZ2UgPSBzcmMKICAgICAgICAgICAgdGhpcy5tZGxfaW1hZ2UgPSB0cnVlCiAgICAgICAgfSwKCiAgICAgICAgcmVzZXRGb3JtKCkgewogICAgICAgICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgICAgICAgICBpZDogbnVsbCwKICAgICAgICAgICAgICAgIG5hbWFfa2VnaWF0YW46ICcnLAogICAgICAgICAgICAgICAgdGFuZ2dhbF9tdWxhaTogJycsCiAgICAgICAgICAgICAgICB0YW5nZ2FsX3NlbGVzYWk6ICcnLAogICAgICAgICAgICAgICAgamFtOiAnJywKICAgICAgICAgICAgICAgIGxva2FzaTogJycsCiAgICAgICAgICAgICAgICBtYXBfbGluazogJycsCiAgICAgICAgICAgICAgICBrZXRlcmFuZ2FuOiAnJywKICAgICAgICAgICAgICAgIGZpbGVfbmFtZTogbnVsbCwKICAgICAgICAgICAgICAgIGp1bWxhaF90ZXJkYWZ0YXI6IG51bGwsCiAgICAgICAgICAgICAgICBzdGF0dXM6IDEKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmZpbGVCYXJ1ID0gbnVsbAogICAgICAgIH0sCgogICAgICAgIGdldFZpZXcoKSB7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2hvV0xvYWRpbmciKTsKICAgICAgICAgICAgZmV0Y2godGhpcy4kc3RvcmUuc3RhdGUudXJsLkpBRFdBTF9ET05PUiArICJnZXR2aWV3IiwgewogICAgICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiAia2lrZW5zYmF0YXJhICIgKyBsb2NhbFN0b3JhZ2UudG9rZW4KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgICAgZGF0YV9rZTogdGhpcy5wYWdlX2ZpcnN0LAogICAgICAgICAgICAgICAgICAgIGNhcmlfdmFsdWU6IHRoaXMuY2FyaV92YWx1ZSwKICAgICAgICAgICAgICAgICAgICBwYWdlX2xpbWl0OiB0aGlzLnBhZ2VfbGltaXQKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSkKICAgICAgICAgICAgICAgIC50aGVuKHJlc19kYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RfZGF0YSA9IHJlc19kYXRhLmRhdGEgfHwgW107CiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3RhbCA9IHJlc19kYXRhLnRvdGFsIHx8IDA7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlX2xhc3QgPSBNYXRoLmNlaWwodGhpcy50b3RhbCAvIHRoaXMucGFnZV9saW1pdCkgfHwgMTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoImhpZGVMb2FkaW5nIik7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigi4p2MIEVycm9yIGdldFZpZXcgSmFkd2FsIERvbm9yOiIsIGVycik7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJoaWRlTG9hZGluZyIpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKCiAgICAgICAgYWRkRGF0YSgpIHsKICAgICAgICAgICAgdGhpcy5idG5fYWRkID0gdHJ1ZTsKICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKCiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgibmFtYV9rZWdpYXRhbiIsIHRoaXMuZm9ybS5uYW1hX2tlZ2lhdGFuKTsKICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJ0YW5nZ2FsX211bGFpIiwgdGhpcy5mb3JtLnRhbmdnYWxfbXVsYWkpOwogICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoInRhbmdnYWxfc2VsZXNhaSIsIHRoaXMuZm9ybS50YW5nZ2FsX3NlbGVzYWkpOwogICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImphbSIsIHRoaXMuZm9ybS5qYW0pOwogICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImxva2FzaSIsIHRoaXMuZm9ybS5sb2thc2kpOwogICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoIm1hcF9saW5rIiwgdGhpcy5mb3JtLm1hcF9saW5rIHx8ICcnKTsKICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJrZXRlcmFuZ2FuIiwgdGhpcy5mb3JtLmtldGVyYW5nYW4gfHwgJycpOwogICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImp1bWxhaF90ZXJkYWZ0YXIiLCB0aGlzLmZvcm0uanVtbGFoX3RlcmRhZnRhciAhPSBudWxsID8gdGhpcy5mb3JtLmp1bWxhaF90ZXJkYWZ0YXIgOiAnJyk7CiAgICAgICAgICAgIC8vIHNldCBzdGF0dXMgZGVmYXVsdCA9IDEgKEFrdGlmKQogICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoInN0YXR1cyIsIDEpOwoKICAgICAgICAgICAgLy8gcS1maWxlIHYtbW9kZWwgc3VkYWggZGktYmluZCBrZSBmb3JtLmZpbGVfbmFtZSBwYWRhIHRlbXBsYXRlIEFuZGEKICAgICAgICAgICAgLy8gamlrYSB1c2VyIG1lbWlsaWggZmlsZSBkaSBhZGQgLT4gZm9ybS5maWxlX25hbWUgYWthbiBtZW5qYWRpIEZpbGUgb2JqZWN0CiAgICAgICAgICAgIGlmICh0aGlzLmZvcm0uZmlsZV9uYW1lKSB7CiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImZpbGVfbmFtZSIsIHRoaXMuZm9ybS5maWxlX25hbWUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmZXRjaCh0aGlzLiRzdG9yZS5zdGF0ZS51cmwuSkFEV0FMX0RPTk9SICsgImFkZERhdGEiLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiAia2lrZW5zYmF0YXJhICIgKyBsb2NhbFN0b3JhZ2UudG9rZW4KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBib2R5OiBmb3JtRGF0YQogICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpCiAgICAgICAgICAgICAgICAudGhlbihyZXNfZGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5idG5fYWRkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc19kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcS5ub3RpZnkoeyB0eXBlOiAicG9zaXRpdmUiLCBtZXNzYWdlOiByZXNfZGF0YS5tZXNzYWdlIHx8ICJTdWtzZXMgbWVuYW1iYWggamFkd2FsIiB9KQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFZpZXcoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZGxfYWRkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXRGb3JtKCk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcS5ub3RpZnkoeyB0eXBlOiAibmVnYXRpdmUiLCBtZXNzYWdlOiByZXNfZGF0YS5tZXNzYWdlIHx8ICJHYWdhbCBtZW5hbWJhaCBqYWR3YWwiIH0pCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuYnRuX2FkZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIuKdjCBFcnJvciBhZGREYXRhIEphZHdhbCBEb25vcjoiLCBlcnIpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJHEubm90aWZ5KHsgdHlwZTogIm5lZ2F0aXZlIiwgbWVzc2FnZTogIlRlcmphZGkga2VzYWxhaGFuIHNlcnZlciIgfSkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgfSwKCiAgICAgICAgYXN5bmMgdXBkYXRlRGF0YSgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHRoaXMuYnRuX2VkaXQgPSB0cnVlOwogICAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiaWQiLCB0aGlzLmZvcm0uaWQpOwogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJuYW1hX2tlZ2lhdGFuIiwgdGhpcy5mb3JtLm5hbWFfa2VnaWF0YW4pOwogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJ0YW5nZ2FsX211bGFpIiwgdGhpcy5mb3JtLnRhbmdnYWxfbXVsYWkpOwogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJ0YW5nZ2FsX3NlbGVzYWkiLCB0aGlzLmZvcm0udGFuZ2dhbF9zZWxlc2FpKTsKICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiamFtIiwgdGhpcy5mb3JtLmphbSk7CiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImxva2FzaSIsIHRoaXMuZm9ybS5sb2thc2kpOwogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJtYXBfbGluayIsIHRoaXMuZm9ybS5tYXBfbGluayB8fCAnJyk7CiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImtldGVyYW5nYW4iLCB0aGlzLmZvcm0ua2V0ZXJhbmdhbiB8fCAnJyk7CiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImp1bWxhaF90ZXJkYWZ0YXIiLCB0aGlzLmZvcm0uanVtbGFoX3RlcmRhZnRhciAhPSBudWxsID8gdGhpcy5mb3JtLmp1bWxhaF90ZXJkYWZ0YXIgOiAnJyk7CiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgInN0YXR1cyIsCiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHRoaXMuZm9ybS5zdGF0dXMgPT09ICJvYmplY3QiCiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5mb3JtLnN0YXR1cy52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuZm9ybS5zdGF0dXMKICAgICAgICAgICAgICAgICk7CgoKICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpbGVCYXJ1KSB7CiAgICAgICAgICAgICAgICAgICAgLy8gdXNlciB1cGxvYWQgZmlsZSBiYXJ1IHBhZGEgZWRpdAogICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiZmlsZV9uYW1lIiwgdGhpcy5maWxlQmFydSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIHRpZGFrIHVwbG9hZCBiYXJ1IC0+IGtpcmltIG5hbWEgZmlsZSBsYW1hIGFnYXIgYmFja2VuZCB0YWh1IHRldGFwIG1lbWFrYWkgZmlsZSBsYW1hCiAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJmaWxlX25hbWUiLCB0aGlzLmZvcm0uZmlsZV9uYW1lIHx8ICcnKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh0aGlzLiRzdG9yZS5zdGF0ZS51cmwuSkFEV0FMX0RPTk9SICsgImVkaXREYXRhIiwgewogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogImtpa2Vuc2JhdGFyYSAiICsgbG9jYWxTdG9yYWdlLnRva2VuCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBib2R5OiBmb3JtRGF0YQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzLmpzb24oKTsKICAgICAgICAgICAgICAgIHRoaXMuYnRuX2VkaXQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHEubm90aWZ5KHsgdHlwZTogInBvc2l0aXZlIiwgbWVzc2FnZTogcmVzdWx0Lm1lc3NhZ2UgfHwgIlN1a3NlcyB1cGRhdGUgamFkd2FsIiB9KQogICAgICAgICAgICAgICAgICAgIHRoaXMubWRsX2VkaXQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFZpZXcoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcS5ub3RpZnkoeyB0eXBlOiAibmVnYXRpdmUiLCBtZXNzYWdlOiByZXN1bHQubWVzc2FnZSB8fCAiR2FnYWwgdXBkYXRlIGphZHdhbCIgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICB0aGlzLmJ0bl9lZGl0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCLinYwgRXJyb3IgdXBkYXRlRGF0YSBKYWR3YWwgRG9ub3I6IiwgZXJyKTsKICAgICAgICAgICAgICAgIHRoaXMuJHEubm90aWZ5KHsgdHlwZTogIm5lZ2F0aXZlIiwgbWVzc2FnZTogIkdhZ2FsIHVwZGF0ZSBkYXRhIiB9KQogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgcmVtb3ZlRGF0YSgpIHsKICAgICAgICAgICAgZmV0Y2godGhpcy4kc3RvcmUuc3RhdGUudXJsLkpBRFdBTF9ET05PUiArICJyZW1vdmVEYXRhIiwgewogICAgICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiAia2lrZW5zYmF0YXJhICIgKyBsb2NhbFN0b3JhZ2UudG9rZW4KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGlkOiB0aGlzLmZvcm0uaWQgfSkKICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKQogICAgICAgICAgICAgICAgLnRoZW4ocmVzX2RhdGEgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChyZXNfZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHEubm90aWZ5KHsgdHlwZTogInBvc2l0aXZlIiwgbWVzc2FnZTogcmVzX2RhdGEubWVzc2FnZSB8fCAnU3Vrc2VzIG1lbmdoYXB1cyBqYWR3YWwnIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VmlldygpCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcS5ub3RpZnkoeyB0eXBlOiAibmVnYXRpdmUiLCBtZXNzYWdlOiByZXNfZGF0YS5tZXNzYWdlIHx8ICdEYXRhIHRpZGFrIGRpdGVtdWthbicgfSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigi4p2MIEVycm9yIHJlbW92ZURhdGEgSmFkd2FsIERvbm9yOiIsIGVycik7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcS5ub3RpZnkoeyB0eXBlOiAibmVnYXRpdmUiLCBtZXNzYWdlOiAnVGVyamFkaSBrZXNhbGFoYW4gc2VydmVyJyB9KQogICAgICAgICAgICAgICAgfSkKICAgICAgICB9LAoKICAgICAgICBjYXJpX2RhdGEoKSB7CiAgICAgICAgICAgIHRoaXMucGFnZV9maXJzdCA9IDE7CiAgICAgICAgICAgIHRoaXMuZ2V0VmlldygpOwogICAgICAgIH0sCgogICAgICAgIGluZGV4aW5nKGluZGV4KSB7CiAgICAgICAgICAgIHJldHVybiAoKHRoaXMucGFnZV9maXJzdCAtIDEpICogdGhpcy5wYWdlX2xpbWl0KSArIGluZGV4OwogICAgICAgIH0sCgogICAgICAgIGFzeW5jIG9wZW5QZXNlcnRhKGphZHdhbCkgewogICAgICAgICAgICB0aGlzLmN1cnJlbnRKYWR3YWwgPSBqYWR3YWwgfHwge307CiAgICAgICAgICAgIHRoaXMubWRsX3Blc2VydGEgPSB0cnVlOwogICAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50cyA9IFtdOwogICAgICAgICAgICB0aGlzLnBlbmRvbm9yRGFyYWhPcHRpb25zID0gW107CiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRQZW5kb25vciA9IG51bGw7CiAgICAgICAgICAgIHRoaXMuYnRuX2FkZF9wZXNlcnRhID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuc2VhcmNoSW5wdXQgPSAnJzsKCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNob1dMb2FkaW5nIik7CgogICAgICAgICAgICAgICAgLy8gMSkgYW1iaWwgcGVzZXJ0YSAocGVuZG9ub3IgeWFuZyBzdWRhaCBkaXRhdXRrYW4ga2UgamFkd2FsKSBkYXJpIGJhY2tlbmQKICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHRoaXMuJHN0b3JlLnN0YXRlLnVybC5KQURXQUxfRE9OT1IgKyAiZ2V0UGFydGljaXBhbnRzIiwgewogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogImtpa2Vuc2JhdGFyYSAiICsgbG9jYWxTdG9yYWdlLnRva2VuCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGphZHdhbF9pZDogdGhpcy5jdXJyZW50SmFkd2FsLmlkIH0pCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpOwogICAgICAgICAgICAgICAgdGhpcy5wYXJ0aWNpcGFudHMgPSBqc29uLmRhdGEgfHwgW107CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUGFydGljaXBhbnRzIHVwZGF0ZWQ6JywgdGhpcy5wYXJ0aWNpcGFudHMpOwoKICAgICAgICAgICAgICAgIC8vIDIpIGFtYmlsIHNlbHVydWggcGVuZG9ub3IgZGFyaSB0YWJlbCBwZW5kb25vcl9kYXJhaCB1bnR1ayBvcHNpIHNlbGVjdAogICAgICAgICAgICAgICAgLy8gR0FOVEkgZW5kcG9pbnQgZGkgYmF3YWggamlrYSBuYW1hIGVuZHBvaW50IEFuZGEgYmVyYmVkYQogICAgICAgICAgICAgICAgLy8gY29udG9oIGFzdW1zaTogdGhpcy4kc3RvcmUuc3RhdGUudXJsLlBFTkRPTk9SX0RBUkFIICsgImxpc3QiCiAgICAgICAgICAgICAgICBjb25zdCBwZW5kUmVzID0gYXdhaXQgZmV0Y2godGhpcy4kc3RvcmUuc3RhdGUudXJsLlJFR0lTX0RPTk9SICsgImxpc3QiLCB7CiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiR0VUIiwKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246ICJraWtlbnNiYXRhcmEgIiArIGxvY2FsU3RvcmFnZS50b2tlbgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY29uc3QgcGVuZEpzb24gPSBhd2FpdCBwZW5kUmVzLmpzb24oKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSYXcgYmFja2VuZCBkYXRhOicsIHBlbmRKc29uLmRhdGEpOwogICAgICAgICAgICAgICAgLy8gQ2VrIGR1cGxpa2FzaSBsYWJlbAogICAgICAgICAgICAgICAgY29uc3QgbGFiZWxzID0gcGVuZEpzb24uZGF0YS5tYXAoZCA9PiBkLmxhYmVsKTsKICAgICAgICAgICAgICAgIGNvbnN0IHVuaXF1ZUxhYmVscyA9IFsuLi5uZXcgU2V0KGxhYmVscyldOwogICAgICAgICAgICAgICAgaWYgKGxhYmVscy5sZW5ndGggIT09IHVuaXF1ZUxhYmVscy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0R1cGxpa2FzaSBsYWJlbCBkYXJpIGJhY2tlbmQ6JywgbGFiZWxzLmZpbHRlcigobCwgaSkgPT4gbGFiZWxzLmluZGV4T2YobCkgIT09IGkpKTsKICAgICAgICAgICAgICAgIH0KCgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3BlbmRvbm9yIGxpc3QgcmVzcG9uc2U6JywgcGVuZEpzb24pOwogICAgICAgICAgICAgICAgLy8gcGVuZEpzb24uZGF0YSBkaWhhcmFwa2FuIGFycmF5IG9iamVrOiB7IGlkLCBuYW1hLCBqZW5pc19rZWxhbWluLCBnb2xvbmdhbl9kYXJhaCwgcmhlc3VzLCBub19ocCB9CiAgICAgICAgICAgICAgICAvLyBEaSBkYWxhbSBvcGVuUGVzZXJ0YSgpLCBnYW50aSBtYXBwaW5nIGluaToKICAgICAgICAgICAgICAgIC8vIHRoaXMucGVuZG9ub3JEYXJhaE9wdGlvbnMgPSAocGVuZEpzb24uZGF0YSB8fCBbXSkubWFwKHAgPT4gewogICAgICAgICAgICAgICAgLy8gICAgIGNvbnN0IG5hbWEgPSBwLm5hbWFfbGVuZ2thcCB8fCAnJzsgIC8vIDwtLSBJTkkgU0FMQUg6IHAubmFtYV9sZW5na2FwIHRpZGFrIGFkYQogICAgICAgICAgICAgICAgLy8gICAgIGNvbnN0IGdvbCA9IHAuZ29sb25nYW5fZGFyYWggfHwgJyc7CiAgICAgICAgICAgICAgICAvLyAgICAgY29uc3Qgcmhlc3VzID0gcC5yaGVzdXMgfHwgJyc7CiAgICAgICAgICAgICAgICAvLyAgICAgY29uc3Qgbm9faHAgPSBwLm5vX2hwIHx8ICcnOwogICAgICAgICAgICAgICAgLy8gICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGlkOiBTdHJpbmcocC5pZCksCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGxhYmVsOiBgJHtuYW1hIHx8ICctJ30g4oCUICR7Z29sIHx8ICctJ30ke3JoZXN1cyA/IHJoZXN1cyA6ICcnfSDigJQgJHtub19ocCB8fCAnLSd9YCwKICAgICAgICAgICAgICAgIC8vICAgICAgICAgcmF3OiBwCiAgICAgICAgICAgICAgICAvLyAgICAgfTsKICAgICAgICAgICAgICAgIC8vIH0pOwogICAgICAgICAgICAgICAgLy8gTUVOSkFESTogR3VuYWthbiBkYXRhIGxhbmdzdW5nIGRhcmkgYmFja2VuZCAoc3VkYWggYWRhIGxhYmVsIGRhbiByYXcpCiAgICAgICAgICAgICAgICAvLyB0aGlzLnBlbmRvbm9yRGFyYWhPcHRpb25zID0gcGVuZEpzb24uZGF0YSB8fCBbXTsKICAgICAgICAgICAgICAgIHRoaXMucGVuZG9ub3JEYXJhaE9wdGlvbnMgPSAocGVuZEpzb24uZGF0YSB8fCBbXSkubWFwKHAgPT4gewogICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnAsCiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBTdHJpbmcocC5pZCksIC8vIHdhamliIHN0cmluZyBhZ2FyIGtvbnNpc3RlbgogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogcC5sYWJlbCA/IFN0cmluZyhwLmxhYmVsKSA6IGAke3AubmFtYV9sZW5na2FwIHx8IHAubmFtYSB8fCAnLSd9IOKAlCAke3AuZ29sb25nYW5fZGFyYWggfHwgJy0nfSAke3Aucmhlc3VzID8gcC5yaGVzdXMgOiAnJ30g4oCUICR7cC5ub19ocCB8fCAnLSd9YC50cmltKCkKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJoaWRlTG9hZGluZyIpOwogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIuKdjCBFcnJvciBvcGVuUGVzZXJ0YToiLCBlcnIpOwogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJoaWRlTG9hZGluZyIpOwogICAgICAgICAgICAgICAgdGhpcy4kcS5ub3RpZnkoeyB0eXBlOiAibmVnYXRpdmUiLCBtZXNzYWdlOiAiR2FnYWwgbWVtdWF0IHBlc2VydGEgLyBkYWZ0YXIgcGVuZG9ub3IiIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgb25TZWxlY3RQZW5kb25vcih2YWwpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdGVkUGVuZG9ub3IgKG9iamVrIHBlbnVoKTonLCB2YWwpOwogICAgICAgICAgICB0aGlzLnNlbGVjdGVkUGVuZG9ub3IgPSB2YWw7ICAvLyB2YWwgYWRhbGFoIG9iamVrIHBlbnVoCgogICAgICAgIH0sCgoKICAgICAgICByZXNldFBlc2VydGFGb3JtKCkgewogICAgICAgICAgICB0aGlzLnNlbGVjdGVkUGVuZG9ub3IgPSBudWxsOwogICAgICAgICAgICB0aGlzLnNlYXJjaElucHV0ID0gJyc7CiAgICAgICAgICAgIHRoaXMuYnRuX2FkZF9wZXNlcnRhID0gZmFsc2U7CiAgICAgICAgfSwKCiAgICAgICAgYXN5bmMgYWRkUGVzZXJ0YSgpIHsKICAgICAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRKYWR3YWwuaWQpIHsKICAgICAgICAgICAgICAgIHRoaXMuJHEubm90aWZ5KHsgdHlwZTogIm5lZ2F0aXZlIiwgbWVzc2FnZTogIkRhdGEgamFkd2FsIHRpZGFrIGRpdGVtdWthbiIgfSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkUGVuZG9ub3IpIHsKICAgICAgICAgICAgICAgIHRoaXMuJHEubm90aWZ5KHsgdHlwZTogIm5lZ2F0aXZlIiwgbWVzc2FnZTogIlBpbGloIHBlbmRvbm9yIGRhcmkgZGFmdGFyIHRlcmxlYmloIGRhaHVsdSIgfSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMuYnRuX2FkZF9wZXNlcnRhID0gdHJ1ZTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7CiAgICAgICAgICAgICAgICAgICAgamFkd2FsX2lkOiB0aGlzLmN1cnJlbnRKYWR3YWwuaWQsCiAgICAgICAgICAgICAgICAgICAgcGVuZG9ub3JfaWQ6IHRoaXMuc2VsZWN0ZWRQZW5kb25vciA/IHRoaXMuc2VsZWN0ZWRQZW5kb25vci5pZCA6IG51bGwgIC8vIEFrc2VzIGlkIGRhcmkgb2JqZWsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godGhpcy4kc3RvcmUuc3RhdGUudXJsLkpBRFdBTF9ET05PUiArICJhZGRQYXJ0aWNpcGFudCIsIHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246ICJraWtlbnNiYXRhcmEgIiArIGxvY2FsU3RvcmFnZS50b2tlbgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpOwogICAgICAgICAgICAgICAgdGhpcy5idG5fYWRkX3Blc2VydGEgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBpZiAoanNvbi5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcS5ub3RpZnkoeyB0eXBlOiAicG9zaXRpdmUiLCBtZXNzYWdlOiBqc29uLm1lc3NhZ2UgfHwgIlBlc2VydGEgYmVyaGFzaWwgZGl0YW1iYWhrYW4iIH0pOwogICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub3BlblBlc2VydGEodGhpcy5jdXJyZW50SmFkd2FsKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUGVuZG9ub3IgPSBudWxsOyAgLy8gUmVzZXQKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcS5ub3RpZnkoeyB0eXBlOiAibmVnYXRpdmUiLCBtZXNzYWdlOiBqc29uLm1lc3NhZ2UgfHwgIkdhZ2FsIG1lbmFtYmFoa2FuIHBlc2VydGEiIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIHRoaXMuYnRuX2FkZF9wZXNlcnRhID0gZmFsc2U7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCLinYwgRXJyb3IgYWRkUGVzZXJ0YToiLCBlcnIpOwogICAgICAgICAgICAgICAgdGhpcy4kcS5ub3RpZnkoeyB0eXBlOiAibmVnYXRpdmUiLCBtZXNzYWdlOiAiVGVyamFkaSBrZXNhbGFoYW4gc2VydmVyIiB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIHJlbW92ZVBlc2VydGEocGVzZXJ0YUlkKSB7CiAgICAgICAgICAgIGlmICghcGVzZXJ0YUlkKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRxLm5vdGlmeSh7IHR5cGU6ICduZWdhdGl2ZScsIG1lc3NhZ2U6ICdJRCBwZXNlcnRhIHRpZGFrIGRpdGVtdWthbicgfSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnN0IG9rID0gd2luZG93LmNvbmZpcm0oJ0FwYWthaCBBbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBwZXNlcnRhIGluaT8nKTsKICAgICAgICAgICAgaWYgKCFvaykgcmV0dXJuOwoKICAgICAgICAgICAgZmV0Y2godGhpcy4kc3RvcmUuc3RhdGUudXJsLkpBRFdBTF9ET05PUiArICJyZW1vdmVQYXJ0aWNpcGFudCIsIHsKICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogImtpa2Vuc2JhdGFyYSAiICsgbG9jYWxTdG9yYWdlLnRva2VuCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBpZDogcGVzZXJ0YUlkIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSkKICAgICAgICAgICAgICAgIC50aGVuKHJlc19kYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAocmVzX2RhdGEuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRxLm5vdGlmeSh7IHR5cGU6ICJwb3NpdGl2ZSIsIG1lc3NhZ2U6IHJlc19kYXRhLm1lc3NhZ2UgfHwgJ1Blc2VydGEgYmVyaGFzaWwgZGloYXB1cycgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3BlblBlc2VydGEodGhpcy5jdXJyZW50SmFkd2FsKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRxLm5vdGlmeSh7IHR5cGU6ICJuZWdhdGl2ZSIsIG1lc3NhZ2U6IHJlc19kYXRhLm1lc3NhZ2UgfHwgJ1Blc2VydGEgdGlkYWsgZGl0ZW11a2FuJyB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigi4p2MIEVycm9yIHJlbW92ZVBlc2VydGE6IiwgZXJyKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRxLm5vdGlmeSh7IHR5cGU6ICJuZWdhdGl2ZSIsIG1lc3NhZ2U6ICdUZXJqYWRpIGtlc2FsYWhhbiBzZXJ2ZXInIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBvbkZpbHRlcih2YWwsIHVwZGF0ZUZuKSB7CiAgICAgICAgICAgIHRoaXMuc2VhcmNoSW5wdXQgPSB2YWw7ICAvLyBUcmFjayBpbnB1dAogICAgICAgICAgICB1cGRhdGVGbigpOyAgLy8gVXBkYXRlIG9wc2kKICAgICAgICB9CgogICAgfSwKCiAgICBtb3VudGVkKCkgewogICAgICAgIHRoaXMuZ2V0VmlldygpOwogICAgfQp9Cg=="},{"version":3,"sources":["jadwal_donor.vue"],"names":[],"mappings":";AAkaA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA","file":"jadwal_donor.vue","sourceRoot":"src/views/informasi","sourcesContent":["<template>\n    <div class=\"about \" style=\"padding:15px\">\n        <q-card bordered class=\"my-card\">\n            <q-card-section class=\"main2 text-white\">\n                <div class=\"row items-center q-col-gutter-md\">\n                    <div class=\"col-12 col-md-6\">\n                        <div class=\"text-h6 h_titleHead\">Jadwal Donor</div>\n                    </div>\n\n                    <!-- Cari + Tombol Add -->\n                    <div class=\"col-12 col-md-6\">\n                        <div class=\"row\">\n                            <q-input v-model=\"cari_value\" @keyup=\"cari_data()\" outlined square dense\n                                class=\"bg-white col q-mr-sm\" placeholder=\"Cari lokasi / keterangan...\" />\n                            <q-btn glossy class=\"col-auto\" color=\"green\" @click=\"mdl_add = true\" dense icon=\"add\">\n                                <q-tooltip content-class=\"bg-green-7\" content-style=\"font-size: 13px\">\n                                    Tambah Jadwal Donor\n                                </q-tooltip>\n                            </q-btn>\n                        </div>\n                    </div>\n                </div>\n\n            </q-card-section>\n\n        </q-card>\n\n        <hr class=\"hrpagin2\">\n\n        <div class=\"tbl_responsive\">\n            <table width=\"100%\">\n                <tr class=\"h_table_head main1 text-white \">\n                    <th width=\"5%\" class=\"text-center\">No</th>\n                    <th width=\"25%\">Nama Kegiatan</th>\n                    <th width=\"15%\">Tanggal</th>\n                    <th width=\"20%\">Lokasi</th>\n                    <th width=\"10%\">Jam</th>\n                    <th width=\"10%\">Poster</th>\n                    <th width=\"15%\" class=\"text-center\">Act</th>\n                </tr>\n\n                <tr class=\"h_table_body\" v-for=\"(data, index) in list_data\" :key=\"data.id\">\n                    <td class=\"text-center\">{{ indexing(index + 1) }}.</td>\n\n                    <td>\n                        <div class=\"text-bold\">{{ data.nama_kegiatan }}</div>\n                        <div class=\"q-mt-sm\">\n                            <q-btn dense small color=\"positive\" label=\"Peserta\" icon=\"people\" @click=\"openPeserta(data)\" />\n                        </div>\n                    </td>\n                    <td>\n                        <div class=\"text-bold\">{{ UMUM.tglConvert(data.tanggal_mulai) }} - {{\n                                UMUM.tglConvert(data.tanggal_selesai) }}</div>\n                        <div style=\"font-size:12px;\">\n                            <span>\n                                <q-badge :color=\"statusColor(data.status)\">\n                                    {{ statusLabel(data.status) }}\n                                </q-badge>\n                            </span>\n\n                        </div>\n                    </td>\n\n                    <td>\n                        <div class=\"text-bold\">{{ data.lokasi }}</div>\n                        <div style=\"font-size:12px;\">\n                            <span class=\"text-blue\">{{ data.map_link ? 'Map tersedia' : 'Map: -' }}</span>\n\n                        </div>\n                    </td>\n\n                    <td class=\"text-center\">{{ data.jam || '-' }}</td>\n\n                    <td class=\"text-center\">\n                        <img v-if=\"data.file_name\" :src=\"file_path + data.file_name\" alt=\"poster\"\n                            style=\"max-width: 80px; border-radius: 6px; cursor: pointer;\"\n                            @click=\"openImage(file_path + data.file_name)\" />\n                        <q-icon v-else name=\"image_not_supported\" size=\"sm\" color=\"grey\" />\n                    </td>\n\n                    <td class=\"text-center q-gutter-sm\">\n                        <q-btn dense round color=\"warning\" icon=\"edit\" @click=\"openEdit(data)\">\n                            <q-tooltip content-class=\"bg-amber-7\">Edit</q-tooltip>\n                        </q-btn>\n                        <q-btn dense round color=\"negative\" icon=\"delete\" @click=\"openDelete(data)\">\n                            <q-tooltip content-class=\"bg-red-7\">Hapus</q-tooltip>\n                        </q-btn>\n                        <q-btn dense round color=\"primary\" icon=\"visibility\" @click=\"openLihat(data)\">\n                            <q-tooltip content-class=\"bg-blue-7\">Lihat</q-tooltip>\n                        </q-btn>\n                    </td>\n                </tr>\n\n            </table>\n        </div>\n\n        <hr class=\"hrpagin\">\n        <br>\n        <div class=\"flex flex-center\">\n            <q-pagination v-model=\"page_first\" :max=\"page_last\" :max-pages=\"4\" color=\"grey-6\" :direction-links=\"true\"\n                :boundary-links=\"true\" icon-first=\"skip_previous\" icon-last=\"skip_next\" icon-prev=\"fast_rewind\"\n                icon-next=\"fast_forward\" @input=\"getView\" />\n        </div>\n\n        <!-- MODAL ADD -->\n        <q-dialog v-model=\"mdl_add\" persistent>\n            <q-card class=\"mdl-md\">\n                <q-card-section class=\"main2 text-white\">\n                    <div class=\"text-h6 h_modalhead\">Tambah Jadwal Donor</div>\n                </q-card-section>\n\n                <form @submit.prevent=\"addData()\">\n                    <q-card-section class=\"q-pt-none\">\n                        <hr class=\"hrpagin2\">\n\n                        <span class=\"h_lable\">Nama Kegiatan</span>\n                        <q-input v-model=\"form.nama_kegiatan\" outlined square dense class=\"bg-white margin_btn\" />\n\n                        <div class=\"row q-col-gutter-md\">\n                            <div class=\"col-12 col-md-6\">\n                                <span class=\"h_lable\">Tanggal Mulai</span>\n                                <q-input v-model=\"form.tanggal_mulai\" type=\"date\" outlined square dense\n                                    class=\"bg-white margin_btn\" />\n                            </div>\n\n                            <div class=\"col-12 col-md-6\">\n                                <span class=\"h_lable\">Tanggal Selesai</span>\n                                <q-input v-model=\"form.tanggal_selesai\" type=\"date\" outlined square dense\n                                    class=\"bg-white margin_btn\" />\n                            </div>\n                        </div>\n\n\n                        <span class=\"h_lable\">Jam Mulai - Selesai</span>\n                        <q-input v-model=\"form.jam\" placeholder=\"08:00 - 24:00\" outlined square dense\n                            class=\"bg-white margin_btn\" />\n\n                        <div class=\"row q-col-gutter-md\">\n                            <div class=\"col-12 col-md-6\">\n                                <span class=\"h_lable\">Lokasi</span>\n                                <q-input v-model=\"form.lokasi\" outlined square dense class=\"bg-white margin_btn\" />\n                            </div>\n\n                            <div class=\"col-12 col-md-6\">\n                                <span class=\"h_lable\">Map Link (opsional)</span>\n                                <q-input v-model=\"form.map_link\" outlined square dense class=\"bg-white margin_btn\" />\n                            </div>\n                        </div>\n\n\n                        <span class=\"h_lable\">Keterangan (opsional)</span>\n                        <q-input v-model=\"form.keterangan\" type=\"textarea\" outlined square dense\n                            class=\"bg-white margin_btn\" />\n\n                        <span class=\"h_lable\">Jumlah Terdaftar (opsional)</span>\n                        <q-input v-model=\"form.jumlah_terdaftar\" type=\"number\" outlined square dense\n                            class=\"bg-white margin_btn\" />\n\n                        <span class=\"h_lable\">Poster (opsional)</span>\n                        <q-file v-model=\"form.file_name\" label=\"Pilih Poster\" outlined square dense\n                            class=\"bg-white margin_btn\" />\n\n                        <hr class=\"hrpagin2\">\n                    </q-card-section>\n\n                    <q-card-actions class=\"bg-grey-4 mdl-footer\" align=\"right\">\n                        <q-btn :loading=\"btn_add\" color=\"primary\" type=\"submit\" label=\"Simpan\" />\n                        <q-btn label=\"Batal\" color=\"negative\" v-close-popup />\n                    </q-card-actions>\n                </form>\n            </q-card>\n        </q-dialog>\n\n        <!-- MODAL EDIT -->\n        <q-dialog v-model=\"mdl_edit\" persistent>\n            <q-card class=\"mdl-md\">\n                <q-card-section class=\"main2 text-white\">\n                    <div class=\"text-h6 h_modalhead\">Edit Jadwal Donor</div>\n                </q-card-section>\n\n                <form @submit.prevent=\"updateData()\">\n                    <q-card-section class=\"q-pt-none\">\n                        <hr class=\"hrpagin2\">\n\n                        <span class=\"h_lable\">Status</span>\n                        <q-select v-model=\"form.status\" :options=\"statusOptions\" option-label=\"label\"\n                            option-value=\"value\" outlined dense class=\"bg-white margin_btn\" />\n\n                        <span class=\"h_lable\">Nama Kegiatan</span>\n                        <q-input v-model=\"form.nama_kegiatan\" outlined square dense class=\"bg-white margin_btn\" />\n\n                        <div class=\"row q-col-gutter-md\">\n                            <div class=\"col-12 col-md-6\">\n                                <span class=\"h_lable\">Tanggal Mulai</span>\n                                <q-input v-model=\"form.tanggal_mulai\" type=\"date\" outlined square dense\n                                    class=\"bg-white margin_btn\" />\n                            </div>\n\n                            <div class=\"col-12 col-md-6\">\n                                <span class=\"h_lable\">Tanggal Selesai</span>\n                                <q-input v-model=\"form.tanggal_selesai\" type=\"date\" outlined square dense\n                                    class=\"bg-white margin_btn\" />\n                            </div>\n                        </div>\n\n                        <span class=\"h_lable\">Jam Mulai - Selesai</span>\n                        <q-input v-model=\"form.jam\" placeholder=\"08:00 - 24:00\" outlined square dense\n                            class=\"bg-white margin_btn\" />\n\n                        <div class=\"row q-col-gutter-md\">\n                            <div class=\"col-12 col-md-6\">\n                                <span class=\"h_lable\">Lokasi</span>\n                                <q-input v-model=\"form.lokasi\" outlined square dense class=\"bg-white margin_btn\" />\n                            </div>\n\n                            <div class=\"col-12 col-md-6\">\n                                <span class=\"h_lable\">Map Link (opsional)</span>\n                                <q-input v-model=\"form.map_link\" outlined square dense class=\"bg-white margin_btn\" />\n                            </div>\n                        </div>\n\n                        <span class=\"h_lable\">Keterangan (opsional)</span>\n                        <q-input v-model=\"form.keterangan\" type=\"textarea\" outlined square dense\n                            class=\"bg-white margin_btn\" />\n\n                        <span class=\"h_lable\">Jumlah Terdaftar (opsional)</span>\n                        <q-input v-model=\"form.jumlah_terdaftar\" type=\"number\" outlined square dense\n                            class=\"bg-white margin_btn\" />\n\n\n\n                        <span class=\"h_lable\">Poster Baru (opsional)</span>\n                        <q-file v-model=\"fileBaru\" label=\"Pilih Poster Baru\" outlined square dense\n                            class=\"bg-white margin_btn\" />\n\n                        <!-- preview menggunakan file_name -->\n                        <div v-if=\"form.file_name && !fileBaru\" class=\"q-mt-sm\">\n                            <q-img :src=\"file_path + form.file_name\" style=\"max-width: 150px; border-radius: 6px;\" />\n                            <div class=\"text-caption text-grey\">Poster lama</div>\n                        </div>\n\n                        <hr class=\"hrpagin2\">\n                    </q-card-section>\n\n                    <q-card-actions class=\"bg-grey-4 mdl-footer\" align=\"right\">\n                        <q-btn :loading=\"btn_edit\" color=\"primary\" type=\"submit\" label=\"Update\" />\n                        <q-btn label=\"Batal\" color=\"negative\" v-close-popup />\n                    </q-card-actions>\n                </form>\n            </q-card>\n        </q-dialog>\n\n        <q-dialog v-model=\"mdl_lihat\" persistent>\n            <q-card class=\"mdl-lg q-pa-none\" style=\"max-width: 900px; border-radius: 16px; overflow: hidden;\">\n                <q-card-section class=\"main2 text-white\">\n                    <div class=\"text-h6 h_modalhead\">Detail Jadwal Donor</div>\n                </q-card-section>\n\n                <q-card-section class=\"q-pa-lg scroll\" style=\"max-height: 70vh; overflow-y: auto;\">\n                    <div class=\"text-h5 q-mb-md\">{{ form.lokasi }}</div>\n\n                    <div class=\"text-grey-7 q-mb-md\" style=\"font-size: 14px;\">\n                        <q-icon name=\"event\" size=\"16px\" class=\"q-mr-xs\" />\n                        <span class=\"q-mr-md\">Tanggal: <span class=\"text-blue\">{{ UMUM.tglConvert(form.tanggal_mulai)\n                                }}</span></span>\n                        <q-icon name=\"schedule\" size=\"16px\" class=\"q-mr-xs\" />\n                        <span>{{ form.jam }}</span>\n                        <div style=\"margin-top:6px;\">\n                            <q-badge :color=\"statusColor(form.status)\" class=\"q-mt-sm\">{{ statusLabel(form.status)\n                                }}</q-badge>\n                        </div>\n                    </div>\n\n                    <div class=\"q-mb-md\">\n                        <div class=\"text-subtitle2 text-bold\">Keterangan</div>\n                        <div class=\"text-body2 text-grey-8\">{{ form.keterangan || '-' }}</div>\n                    </div>\n\n                    <div v-if=\"form.map_link\" class=\"q-mb-md\">\n                        <div class=\"text-subtitle2 text-bold\">Map Link</div>\n                        <div class=\"text-body2 q-mt-sm\"><a :href=\"form.map_link\" target=\"_blank\">{{ form.map_link }}</a>\n                        </div>\n                    </div>\n\n                    <div v-if=\"form.file_name\" class=\"q-mb-md\">\n                        <div class=\"text-subtitle2 text-bold\">Poster</div>\n                        <q-img :src=\"file_path + form.file_name\" style=\"max-width: 100%; border-radius: 6px;\" />\n                    </div>\n\n\n                    <div class=\"q-mb-md\">\n                        <div class=\"text-subtitle2 text-bold\">Jumlah Terdaftar</div>\n                        <div class=\"text-body2 text-grey-8\">{{ form.jumlah_terdaftar != null ? form.jumlah_terdaftar :\n                                '-' }}</div>\n                    </div>\n                </q-card-section>\n\n                <q-separator />\n                <q-card-actions class=\"bg-grey-4 mdl-footer\" align=\"right\">\n                    <q-btn label=\"Tutup\" color=\"negative\" v-close-popup />\n                </q-card-actions>\n            </q-card>\n        </q-dialog>\n\n        <!-- MODAL HAPUS -->\n        <q-dialog v-model=\"mdl_delete\" persistent>\n            <q-card class=\"mdl-sm \">\n                <q-card-section class=\"q-pt-none text-center orageGrad\">\n                    <form @submit.prevent=\"removeData\">\n                        <br>\n                        <img src=\"img/alert.png\" alt=\"\" width=\"75\"> <br>\n                        <span class=\"h_notifikasi\">APAKAH ANDA YAKIN INGIN MENGHAPUS DATA INI??</span>\n                        <input type=\"submit\" style=\"position: absolute; left: -9999px\" />\n                        <br><br>\n                        <q-btn label=\"Batal\" size=\"sm\" color=\"negative\" v-close-popup />\n                        &nbsp;\n                        <q-btn type=\"submit\" label=\"Hapus\" size=\"sm\" color=\"primary\" v-close-popup />\n                    </form>\n                </q-card-section>\n            </q-card>\n        </q-dialog>\n\n        <!-- MODAL IMG -->\n        <q-dialog v-model=\"mdl_image\">\n            <q-card class=\"bg-purple mdl-lg\">\n                <q-card-section class=\"text-center\">\n                    <q-img :src=\"selectedImage\" style=\"max-width: 90vw; max-height: 90vh; border-radius: 10px;\"\n                        fit=\"contain\" />\n                </q-card-section>\n                <q-card-actions align=\"center\">\n                    <q-btn flat label=\"Tutup\" color=\"white\" v-close-popup />\n                </q-card-actions>\n            </q-card>\n        </q-dialog>\n\n\n\n\n        <!-- MODAL PESERTA -->\n        <q-dialog v-model=\"mdl_peserta\">\n            <q-card class=\"mdl-md\">\n                <q-card-section class=\"main2 text-white\">\n                    <div class=\"text-h6 h_modalhead\">Daftar Peserta - {{ currentJadwal.nama_kegiatan || '-' }}</div>\n                </q-card-section>\n\n                <q-card-section class=\"q-pa-lg scroll\" style=\"max-height: 70vh; overflow-y: auto;\">\n                    <!-- Tabel peserta -->\n                    <div class=\"tbl_responsive q-mb-md\">\n                        <table width=\"100%\">\n                            <tr class=\"h_table_head main1 text-white \">\n                                <th class=\"text-center\" width=\"5%\">No</th>\n                                <th>Nama</th>\n                                <th>Jk</th>\n                                <th>Golongan</th>\n                                <th>Rhesus</th>\n                                <th>HP</th>\n                                <th class=\"text-center\">Aksi</th>\n                            </tr>\n\n                            <tr v-for=\"(p, i) in participants\" :key=\"p.id\" class=\"h_table_body\">\n                                <td class=\"text-center\">{{ i + 1 }}</td>\n                                <td>{{ p.nama_lengkap }}</td>\n                                <td>{{ p.jenis_kelamin }}</td>\n                                <td>{{ p.golongan_darah }}</td>\n                                <td>{{ p.rhesus }}</td>\n                                <td>{{ p.no_hp }}</td>\n                                <td class=\"text-center\">\n                                    <q-btn dense round color=\"negative\" icon=\"delete\" @click=\"removePeserta(p.id)\">\n                                        <q-tooltip>Hapus</q-tooltip>\n                                    </q-btn>\n                                </td>\n                            </tr>\n\n                            <tr v-if=\"participants.length === 0\">\n                                <td colspan=\"7\" class=\"text-center text-grey\">Belum ada peserta</td>\n                            </tr>\n                        </table>\n                    </div>\n\n                    <q-separator />\n\n                    <!-- Form tambah peserta: hanya pilih dari pendonor_darah -->\n                    <div class=\"q-mt-md\">\n                        <div class=\"text-subtitle2 text-bold\">Tambah Peserta (Pilih dari daftar pendonor)</div>\n\n                        <div class=\"row q-col-gutter-md q-mt-sm\">\n                            <div class=\"col-12 col-md-6\">\n                                <!-- <q-select v-model=\"selectedPendonor\" :options=\"availableOptions\" option-value=\"id\"\n                                    option-label=\"label\" outlined dense class=\"bg-white margin_btn\" use-input fill-input\n                                    input-debounce=\"300\" placeholder=\"Ketik nama pendonor...\" @filter=\"onFilter\"\n                                    @input=\"onSelectPendonor\"\n                                    no-options-label=\"Tidak ada pendonor yang cocok atau belum terdaftar\" /> -->\n                                <q-select v-model=\"selectedPendonor\" :options=\"availableOptions\" option-label=\"label\"\n                                    outlined dense class=\"bg-white margin_btn\" use-input input-debounce=\"300\"\n                                    placeholder=\"Ketik nama pendonor...\" @filter=\"onFilter\" @input=\"onSelectPendonor\"\n                                    no-options-label=\"Tidak ada pendonor yang cocok atau belum terdaftar\" />\n\n                            </div>\n\n                            <div class=\"col-12 col-md-6\">\n                                <q-btn :loading=\"btn_add_peserta\" color=\"positive\" label=\"Tambah Peserta\"\n                                    @click=\"addPeserta()\" />\n                                <q-btn flat label=\"Reset\" @click=\"resetPesertaForm()\" />\n                            </div>\n                        </div>\n                    </div>\n                </q-card-section>\n\n                <q-separator />\n                <q-card-actions class=\"bg-grey-4 mdl-footer\" align=\"right\">\n                    <q-btn label=\"Tutup\" color=\"negative\" v-close-popup @click=\"mdl_peserta = false\" />\n                </q-card-actions>\n            </q-card>\n        </q-dialog>\n    </div>\n</template>\n\n<script>\nimport UMUM from \"../../library/umum.js\";\n\nexport default {\n    data() {\n        return {\n            list_data: [],\n            form: {\n                nama_kegiatan: '',\n                tanggal_mulai: '',\n                tanggal_selesai: '',\n                jam: '',\n                lokasi: '',\n                map_link: '',\n                keterangan: '',\n                file_name: null,\n                jumlah_terdaftar: null,\n                status: 1 // default aktif\n            },\n            fileBaru: null,\n            UMUM: UMUM,\n            btn_add: false,\n            btn_edit: false,\n            mdl_add: false,\n            mdl_edit: false,\n            mdl_delete: false,\n            mdl_lihat: false,\n            mdl_image: false,\n            mdl_peserta: false,\n            selectedImage: null,\n            cari_value: \"\",\n            page_first: 1,\n            page_last: 1,\n            page_limit: 9,\n            total: 0,\n            tipe: null,\n            file_path: this.$store.state.url.URL_APP + \"uploads/\",\n            statusOptions: [\n                { label: '1 - Aktif', value: 1 },\n                { label: '2 - Selesai', value: 2 },\n                { label: '3 - Dibatalkan', value: 3 }\n            ],\n            currentJadwal: {},\n            participants: [],\n            pendonorDarahOptions: [],\n            selectedPendonor: null,\n            btn_add_peserta: false,\n            searchInput: '',\n        }\n    },\n\n\n    computed: {\n        availableOptions() {\n            // buat set id peserta (string) untuk perbandingan\n            const partIds = new Set(\n                (this.participants || [])\n                    .map(p => String(p.pendonor_id ?? p.id ?? p.user_id ?? p.id_pendonor ?? ''))\n                    .filter(Boolean)\n            );\n\n            // normalisasi pendonorDarahOptions -> pastikan id sebagai string dan ada label\n            const normalized = (this.pendonorDarahOptions || []).map(opt => {\n                return {\n                    ...opt,\n                    id: String(opt.id),\n                    label: (opt.label || `${opt.nama_lengkap || opt.nama || '-'} — ${opt.golongan_darah || ''} ${opt.rhesus ? opt.rhesus : ''} — ${opt.no_hp || '-'}`).trim()\n                };\n            });\n\n            // hilangkan yang sudah terdaftar\n            let available = normalized.filter(o => !partIds.has(String(o.id)));\n\n            // hapus duplikat berdasarkan id (keamanan)\n            available = available.filter((item, idx, arr) => arr.findIndex(x => x.id === item.id) === idx);\n\n            // support searchInput seperti sebelumnya\n            const input = String(this.searchInput || '').toLowerCase().trim();\n            if (!input) {\n                return available.slice(0, 8);\n            }\n            return available.filter(opt => (opt.label || '').toLowerCase().includes(input));\n        }\n    },\n\n    methods: {\n\n        statusLabel(val) {\n            if (val == 1) return 'Aktif'\n            if (val == 2) return 'Selesai'\n            if (val == 3) return 'Dibatalkan'\n            return '-'\n        },\n\n        statusColor(val) {\n            if (val == 1) return 'positive'\n            if (val == 2) return 'warning'\n            if (val == 3) return 'negative'\n            return 'grey'\n        },\n\n        openEdit(data) {\n            this.form = {\n                id: data.id || null,\n                nama_kegiatan: data.nama_kegiatan || '',\n                tanggal_mulai: data.tanggal_mulai || '',\n                tanggal_selesai: data.tanggal_selesai || '',\n                jam: data.jam || '',\n                lokasi: data.lokasi || '',\n                map_link: data.map_link || '',\n                keterangan: data.keterangan || '',\n                file_name: data.file_name || null,\n                jumlah_terdaftar: data.jumlah_terdaftar ?? null,\n                status: data.status != null ? data.status : 1\n            }\n            this.fileBaru = null\n            this.mdl_edit = true\n        },\n\n\n        openDelete(data) {\n            this.form = { id: data.id }\n            this.mdl_delete = true\n        },\n\n        openLihat(data) {\n            this.form = {\n                id: data.id || null,\n                nama_kegiatan: data.nama_kegiatan || '',\n                tanggal_mulai: data.tanggal_mulai || '',\n                tanggal_selesai: data.tanggal_selesai || '',\n                jam: data.jam || '',\n                lokasi: data.lokasi || '',\n                map_link: data.map_link || '',\n                keterangan: data.keterangan || '',\n                file_name: data.file_name || null,\n                jumlah_terdaftar: data.jumlah_terdaftar ?? null,\n                status: data.status != null ? Number(data.status) : 1\n            }\n            this.mdl_lihat = true\n        },\n\n        openImage(src) {\n            this.selectedImage = src\n            this.mdl_image = true\n        },\n\n        resetForm() {\n            this.form = {\n                id: null,\n                nama_kegiatan: '',\n                tanggal_mulai: '',\n                tanggal_selesai: '',\n                jam: '',\n                lokasi: '',\n                map_link: '',\n                keterangan: '',\n                file_name: null,\n                jumlah_terdaftar: null,\n                status: 1\n            }\n            this.fileBaru = null\n        },\n\n        getView() {\n            this.$store.commit(\"shoWLoading\");\n            fetch(this.$store.state.url.JADWAL_DONOR + \"getview\", {\n                method: \"POST\",\n                headers: {\n                    \"content-type\": \"application/json\",\n                    authorization: \"kikensbatara \" + localStorage.token\n                },\n                body: JSON.stringify({\n                    data_ke: this.page_first,\n                    cari_value: this.cari_value,\n                    page_limit: this.page_limit\n                })\n            })\n                .then(res => res.json())\n                .then(res_data => {\n                    this.list_data = res_data.data || [];\n                    this.total = res_data.total || 0;\n                    this.page_last = Math.ceil(this.total / this.page_limit) || 1;\n                    this.$store.commit(\"hideLoading\");\n                })\n                .catch(err => {\n                    console.error(\"❌ Error getView Jadwal Donor:\", err);\n                    this.$store.commit(\"hideLoading\");\n                });\n        },\n\n        addData() {\n            this.btn_add = true;\n            const formData = new FormData();\n\n            formData.append(\"nama_kegiatan\", this.form.nama_kegiatan);\n            formData.append(\"tanggal_mulai\", this.form.tanggal_mulai);\n            formData.append(\"tanggal_selesai\", this.form.tanggal_selesai);\n            formData.append(\"jam\", this.form.jam);\n            formData.append(\"lokasi\", this.form.lokasi);\n            formData.append(\"map_link\", this.form.map_link || '');\n            formData.append(\"keterangan\", this.form.keterangan || '');\n            formData.append(\"jumlah_terdaftar\", this.form.jumlah_terdaftar != null ? this.form.jumlah_terdaftar : '');\n            // set status default = 1 (Aktif)\n            formData.append(\"status\", 1);\n\n            // q-file v-model sudah di-bind ke form.file_name pada template Anda\n            // jika user memilih file di add -> form.file_name akan menjadi File object\n            if (this.form.file_name) {\n                formData.append(\"file_name\", this.form.file_name);\n            }\n\n            fetch(this.$store.state.url.JADWAL_DONOR + \"addData\", {\n                method: \"POST\",\n                headers: {\n                    authorization: \"kikensbatara \" + localStorage.token\n                },\n                body: formData\n            })\n                .then(res => res.json())\n                .then(res_data => {\n                    this.btn_add = false;\n                    if (res_data.success) {\n                        this.$q.notify({ type: \"positive\", message: res_data.message || \"Sukses menambah jadwal\" })\n                        this.getView();\n                        this.mdl_add = false;\n                        this.resetForm();\n                    } else {\n                        this.$q.notify({ type: \"negative\", message: res_data.message || \"Gagal menambah jadwal\" })\n                    }\n                })\n                .catch(err => {\n                    this.btn_add = false;\n                    console.error(\"❌ Error addData Jadwal Donor:\", err);\n                    this.$q.notify({ type: \"negative\", message: \"Terjadi kesalahan server\" })\n                })\n        },\n\n        async updateData() {\n            try {\n                this.btn_edit = true;\n                const formData = new FormData();\n                formData.append(\"id\", this.form.id);\n                formData.append(\"nama_kegiatan\", this.form.nama_kegiatan);\n                formData.append(\"tanggal_mulai\", this.form.tanggal_mulai);\n                formData.append(\"tanggal_selesai\", this.form.tanggal_selesai);\n                formData.append(\"jam\", this.form.jam);\n                formData.append(\"lokasi\", this.form.lokasi);\n                formData.append(\"map_link\", this.form.map_link || '');\n                formData.append(\"keterangan\", this.form.keterangan || '');\n                formData.append(\"jumlah_terdaftar\", this.form.jumlah_terdaftar != null ? this.form.jumlah_terdaftar : '');\n                formData.append(\n                    \"status\",\n                    typeof this.form.status === \"object\"\n                        ? this.form.status.value\n                        : this.form.status\n                );\n\n\n                if (this.fileBaru) {\n                    // user upload file baru pada edit\n                    formData.append(\"file_name\", this.fileBaru);\n                } else {\n                    // tidak upload baru -> kirim nama file lama agar backend tahu tetap memakai file lama\n                    formData.append(\"file_name\", this.form.file_name || '');\n                }\n\n                const res = await fetch(this.$store.state.url.JADWAL_DONOR + \"editData\", {\n                    method: \"POST\",\n                    headers: {\n                        authorization: \"kikensbatara \" + localStorage.token\n                    },\n                    body: formData\n                });\n\n                const result = await res.json();\n                this.btn_edit = false;\n                if (result.success) {\n                    this.$q.notify({ type: \"positive\", message: result.message || \"Sukses update jadwal\" })\n                    this.mdl_edit = false;\n                    this.getView();\n                } else {\n                    this.$q.notify({ type: \"negative\", message: result.message || \"Gagal update jadwal\" })\n                }\n            } catch (err) {\n                this.btn_edit = false;\n                console.error(\"❌ Error updateData Jadwal Donor:\", err);\n                this.$q.notify({ type: \"negative\", message: \"Gagal update data\" })\n            }\n        },\n\n        removeData() {\n            fetch(this.$store.state.url.JADWAL_DONOR + \"removeData\", {\n                method: \"POST\",\n                headers: {\n                    \"content-type\": \"application/json\",\n                    authorization: \"kikensbatara \" + localStorage.token\n                },\n                body: JSON.stringify({ id: this.form.id })\n            })\n                .then(res => res.json())\n                .then(res_data => {\n                    if (res_data.success) {\n                        this.$q.notify({ type: \"positive\", message: res_data.message || 'Sukses menghapus jadwal' })\n                        this.getView()\n                    } else {\n                        this.$q.notify({ type: \"negative\", message: res_data.message || 'Data tidak ditemukan' })\n                    }\n                })\n                .catch(err => {\n                    console.error(\"❌ Error removeData Jadwal Donor:\", err);\n                    this.$q.notify({ type: \"negative\", message: 'Terjadi kesalahan server' })\n                })\n        },\n\n        cari_data() {\n            this.page_first = 1;\n            this.getView();\n        },\n\n        indexing(index) {\n            return ((this.page_first - 1) * this.page_limit) + index;\n        },\n\n        async openPeserta(jadwal) {\n            this.currentJadwal = jadwal || {};\n            this.mdl_peserta = true;\n            this.participants = [];\n            this.pendonorDarahOptions = [];\n            this.selectedPendonor = null;\n            this.btn_add_peserta = false;\n            this.searchInput = '';\n\n            try {\n                this.$store.commit(\"shoWLoading\");\n\n                // 1) ambil peserta (pendonor yang sudah ditautkan ke jadwal) dari backend\n                const res = await fetch(this.$store.state.url.JADWAL_DONOR + \"getParticipants\", {\n                    method: \"POST\",\n                    headers: {\n                        \"content-type\": \"application/json\",\n                        authorization: \"kikensbatara \" + localStorage.token\n                    },\n                    body: JSON.stringify({ jadwal_id: this.currentJadwal.id })\n                });\n                const json = await res.json();\n                this.participants = json.data || [];\n                console.log('Participants updated:', this.participants);\n\n                // 2) ambil seluruh pendonor dari tabel pendonor_darah untuk opsi select\n                // GANTI endpoint di bawah jika nama endpoint Anda berbeda\n                // contoh asumsi: this.$store.state.url.PENDONOR_DARAH + \"list\"\n                const pendRes = await fetch(this.$store.state.url.REGIS_DONOR + \"list\", {\n                    method: \"GET\",\n                    headers: {\n                        authorization: \"kikensbatara \" + localStorage.token\n                    }\n                });\n                const pendJson = await pendRes.json();\n                console.log('Raw backend data:', pendJson.data);\n                // Cek duplikasi label\n                const labels = pendJson.data.map(d => d.label);\n                const uniqueLabels = [...new Set(labels)];\n                if (labels.length !== uniqueLabels.length) {\n                    console.warn('Duplikasi label dari backend:', labels.filter((l, i) => labels.indexOf(l) !== i));\n                }\n\n\n                console.log('pendonor list response:', pendJson);\n                // pendJson.data diharapkan array objek: { id, nama, jenis_kelamin, golongan_darah, rhesus, no_hp }\n                // Di dalam openPeserta(), ganti mapping ini:\n                // this.pendonorDarahOptions = (pendJson.data || []).map(p => {\n                //     const nama = p.nama_lengkap || '';  // <-- INI SALAH: p.nama_lengkap tidak ada\n                //     const gol = p.golongan_darah || '';\n                //     const rhesus = p.rhesus || '';\n                //     const no_hp = p.no_hp || '';\n                //     return {\n                //         id: String(p.id),\n                //         label: `${nama || '-'} — ${gol || '-'}${rhesus ? rhesus : ''} — ${no_hp || '-'}`,\n                //         raw: p\n                //     };\n                // });\n                // MENJADI: Gunakan data langsung dari backend (sudah ada label dan raw)\n                // this.pendonorDarahOptions = pendJson.data || [];\n                this.pendonorDarahOptions = (pendJson.data || []).map(p => {\n                    return {\n                        ...p,\n                        id: String(p.id), // wajib string agar konsisten\n                        label: p.label ? String(p.label) : `${p.nama_lengkap || p.nama || '-'} — ${p.golongan_darah || '-'} ${p.rhesus ? p.rhesus : ''} — ${p.no_hp || '-'}`.trim()\n                    };\n                });\n\n                this.$store.commit(\"hideLoading\");\n            } catch (err) {\n                console.error(\"❌ Error openPeserta:\", err);\n                this.$store.commit(\"hideLoading\");\n                this.$q.notify({ type: \"negative\", message: \"Gagal memuat peserta / daftar pendonor\" });\n            }\n        },\n\n        onSelectPendonor(val) {\n            console.log('selectedPendonor (objek penuh):', val);\n            this.selectedPendonor = val;  // val adalah objek penuh\n\n        },\n\n\n        resetPesertaForm() {\n            this.selectedPendonor = null;\n            this.searchInput = '';\n            this.btn_add_peserta = false;\n        },\n\n        async addPeserta() {\n            if (!this.currentJadwal.id) {\n                this.$q.notify({ type: \"negative\", message: \"Data jadwal tidak ditemukan\" });\n                return;\n            }\n            if (!this.selectedPendonor) {\n                this.$q.notify({ type: \"negative\", message: \"Pilih pendonor dari daftar terlebih dahulu\" });\n                return;\n            }\n\n            this.btn_add_peserta = true;\n            try {\n                const body = {\n                    jadwal_id: this.currentJadwal.id,\n                    pendonor_id: this.selectedPendonor ? this.selectedPendonor.id : null  // Akses id dari objek\n                };\n\n                const res = await fetch(this.$store.state.url.JADWAL_DONOR + \"addParticipant\", {\n                    method: \"POST\",\n                    headers: {\n                        \"content-type\": \"application/json\",\n                        authorization: \"kikensbatara \" + localStorage.token\n                    },\n                    body: JSON.stringify(body)\n                });\n\n                const json = await res.json();\n                this.btn_add_peserta = false;\n\n                if (json.success) {\n                    this.$q.notify({ type: \"positive\", message: json.message || \"Peserta berhasil ditambahkan\" });\n                    await this.openPeserta(this.currentJadwal);\n                    this.selectedPendonor = null;  // Reset\n                } else {\n                    this.$q.notify({ type: \"negative\", message: json.message || \"Gagal menambahkan peserta\" });\n                }\n            } catch (err) {\n                this.btn_add_peserta = false;\n                console.error(\"❌ Error addPeserta:\", err);\n                this.$q.notify({ type: \"negative\", message: \"Terjadi kesalahan server\" });\n            }\n        },\n\n        removePeserta(pesertaId) {\n            if (!pesertaId) {\n                this.$q.notify({ type: 'negative', message: 'ID peserta tidak ditemukan' });\n                return;\n            }\n\n            const ok = window.confirm('Apakah Anda yakin ingin menghapus peserta ini?');\n            if (!ok) return;\n\n            fetch(this.$store.state.url.JADWAL_DONOR + \"removeParticipant\", {\n                method: \"POST\",\n                headers: {\n                    \"content-type\": \"application/json\",\n                    authorization: \"kikensbatara \" + localStorage.token\n                },\n                body: JSON.stringify({ id: pesertaId })\n            })\n                .then(res => res.json())\n                .then(res_data => {\n                    if (res_data.success) {\n                        this.$q.notify({ type: \"positive\", message: res_data.message || 'Peserta berhasil dihapus' });\n                        this.openPeserta(this.currentJadwal);\n                    } else {\n                        this.$q.notify({ type: \"negative\", message: res_data.message || 'Peserta tidak ditemukan' });\n                    }\n                })\n                .catch(err => {\n                    console.error(\"❌ Error removePeserta:\", err);\n                    this.$q.notify({ type: \"negative\", message: 'Terjadi kesalahan server' });\n                });\n        },\n        onFilter(val, updateFn) {\n            this.searchInput = val;  // Track input\n            updateFn();  // Update opsi\n        }\n\n    },\n\n    mounted() {\n        this.getView();\n    }\n}\n</script>"]}]}