{"remainingRequest":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/simplephi/Documents/riswan/stock_darah/admin/src/views/DashboardPerusahaan.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/src/views/DashboardPerusahaan.vue","mtime":1758008598417},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/cache-loader/dist/cjs.js","mtime":1758930418112},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/babel-loader/lib/index.js","mtime":1758930419036},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js","mtime":1758930412679},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/cache-loader/dist/cjs.js","mtime":1758930418112},{"path":"/Users/simplephi/Documents/riswan/stock_darah/admin/node_modules/vue-loader/lib/index.js","mtime":1758930412640}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYmlkYW5nQ1NSQ2hhcnQ6IFtdLCAgLy8gZGF0YSBkYXJpIGJhY2tlbmQKICAgICAgYmlkYW5nQ1NSOiBbXSwKICAgICAgbWl0cmE6IG51bGwsCiAgICAgIHRpcGU6IG51bGwsCiAgICAgIHBlcnVzYWhhYW46IG51bGwsCiAgICAgIGluZGlrYXRvcjogewogICAgICAgIHBlbmdhanVhbjogMTIsCiAgICAgICAgZGl0ZXJpbWE6IDcsCiAgICAgICAgZGl0b2xhazogMywKICAgICAgICBwcm9zZXM6IDIKICAgICAgfSwKCiAgICAgIHdpZGdldFN0YXR1czogewogICAgICAgIHRvdGFsX3BlbmdhanVhbjogMCwKICAgICAgICBkaXRlcmltYTogMCwKICAgICAgICBkaXRvbGFrOiAwLAogICAgICAgIGRpcHJvc2VzOiAwCiAgICAgIH0sCiAgICAgIAogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIGNvbnN0IGdldF9wcm9maWxlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UucHJvZmlsZSk7CgogICAgdGhpcy50aXBlID0gTnVtYmVyKGdldF9wcm9maWxlLnByb2ZpbGUuZGJfY3Nya29uc2VsKTsKCiAgICB0aGlzLm1pdHJhID0gewogICAgICBpZDogZ2V0X3Byb2ZpbGUuX2lkLAogICAgICBuYW1hOiBnZXRfcHJvZmlsZS5wcm9maWxlLm5hbWEsCiAgICAgIHVzZXJuYW1lOiBnZXRfcHJvZmlsZS51c2VybmFtZSwKICAgICAgZW1haWw6IGdldF9wcm9maWxlLmVtYWlsLAogICAgICB0ZWxwOiBnZXRfcHJvZmlsZS5wcm9maWxlLnRlbHAsCiAgICAgIGFsYW1hdDogZ2V0X3Byb2ZpbGUucHJvZmlsZS5hbGFtYXQsCiAgICAgIHBpYzogZ2V0X3Byb2ZpbGUucHJvZmlsZS5waWMsCiAgICAgIGZpbGVfbmFtZTogZ2V0X3Byb2ZpbGUucHJvZmlsZS5maWxlX25hbWUgLy8gbG9nbyBwZXJ1c2FoYWFuCiAgICB9OwoKICAgIHRoaXMuZ2V0TWl0cmEoZ2V0X3Byb2ZpbGUuX2lkKTsKCgogICAgdGhpcy5sb2FkV2lkZ2V0QW5kQ2hhcnQoKTsKICB9LAogIG1ldGhvZHM6IHsKCiAgICAKCiAgICBhc3luYyBsb2FkV2lkZ2V0QW5kQ2hhcnQoKSB7CiAgICB0cnkgewogICAgICAvLyBBbWJpbCBkYXRhIHdpZGdldCBkYXJpIGJhY2tlbmQKICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godGhpcy4kc3RvcmUuc3RhdGUudXJsLkRBU0hCT0FSRCArICJzdGF0dXNQZW5nYWp1YW4iLCB7CiAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICJhdXRob3JpemF0aW9uIjogImtpa2Vuc2JhdGFyYSAiICsgbG9jYWxTdG9yYWdlLnRva2VuCiAgICAgICAgfSwKICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHVzZXJzX2lkOiB0aGlzLm1pdHJhLmlkIH0pCiAgICAgIH0pOwoKICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7CgogICAgICBpZiAoZGF0YS5kYXRhKSB7CiAgICAgICAgLy8gVXBkYXRlIHdpZGdldFN0YXR1cwogICAgICAgIHRoaXMud2lkZ2V0U3RhdHVzID0gZGF0YS5kYXRhOwogICAgICB9CgogICAgICAvLyBTZXRlbGFoIGRhdGEgd2lkZ2V0IHRlcnNlZGlhLCByZW5kZXIgcGllIGNoYXJ0CiAgICAgIHRoaXMuY2hhcnRQaWVDU1IoKTsKCiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgY29uc29sZS5lcnJvcignR2FnYWwgYW1iaWwgZGF0YSB3aWRnZXQ6JywgZXJyKTsKICAgIH0KICB9LAoKICAgIC8vIEFtYmlsIGp1bWxhaCBwZW5nYWp1YW4gdW50dWsgd2lkZ2V0CiAgICBnZXRXaWRnZXRTdGF0dXModXNlcnNfaWQpIHsKICAgICAgZmV0Y2godGhpcy4kc3RvcmUuc3RhdGUudXJsLkRBU0hCT0FSRCArICJzdGF0dXNQZW5nYWp1YW4iLCB7CiAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICJhdXRob3JpemF0aW9uIjogImtpa2Vuc2JhdGFyYSAiICsgbG9jYWxTdG9yYWdlLnRva2VuCiAgICAgICAgfSwKICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHVzZXJzX2lkIH0pCiAgICAgIH0pCiAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKQogICAgICAudGhlbihyZXMgPT4gewogICAgICAgIGlmKHJlcy5kYXRhKSB7CiAgICAgICAgICB0aGlzLndpZGdldFN0YXR1cy50b3RhbF9wZW5nYWp1YW4gPSByZXMuZGF0YS50b3RhbF9wZW5nYWp1YW47CiAgICAgICAgICB0aGlzLndpZGdldFN0YXR1cy5kaXRlcmltYSA9IHJlcy5kYXRhLmRpdGVyaW1hOwogICAgICAgICAgdGhpcy53aWRnZXRTdGF0dXMuZGl0b2xhayA9IHJlcy5kYXRhLmRpdG9sYWs7CiAgICAgICAgICB0aGlzLndpZGdldFN0YXR1cy5kaXByb3NlcyA9IHJlcy5kYXRhLmRpcHJvc2VzOwogICAgICAgIH0KICAgICAgfSkKICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmVycm9yKCdHYWdhbCBhbWJpbCBkYXRhIHdpZGdldDonLCBlcnIpKTsKICAgIH0sCgogICAgZ2V0TWl0cmEodXNlcklkKSB7CiAgICAgIGZldGNoKHRoaXMuJHN0b3JlLnN0YXRlLnVybC5EQVRBX01JVFJBICsgInZpZXdCeVVzZXIiLCB7CiAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgIGF1dGhvcml6YXRpb246ICJraWtlbnNiYXRhcmEgIiArIGxvY2FsU3RvcmFnZS50b2tlbgogICAgICAgIH0sCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB1c2Vyc19pZDogdXNlcklkIH0pCiAgICAgIH0pCiAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKQogICAgICAudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuZGF0YSkgewogICAgICAgICAgLy8ga2FsYXUgYmFja2VuZCByZXR1cm4gYXJyYXkKICAgICAgICAgIHRoaXMubWl0cmEgPSBBcnJheS5pc0FycmF5KHJlcy5kYXRhKSA/IHJlcy5kYXRhWzBdIDogcmVzLmRhdGE7CiAgICAgICAgICAvLyBwYW5nZ2lsIHdpZGdldCBzdGF0dXMgcGFrYWkgdXNlcnNfaWQgZGFyaSBtaXRyYQogICAgICB0aGlzLmdldFdpZGdldFN0YXR1cyh0aGlzLm1pdHJhLnVzZXJzX2lkIHx8IHVzZXJJZCk7CiAgICAgIHRoaXMuZ2V0QmlkYW5nQ1NSKCk7CiAgICAgICAgfQogICAgICB9KQogICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICBjb25zb2xlLmVycm9yKCdHYWdhbCBhbWJpbCBkYXRhIHBlcnVzYWhhYW46JywgZXJyKTsKICAgICAgfSk7CiAgICB9LAogICAgY2hhcnRQaWVDU1IoKSB7CiAgSGlnaGNoYXJ0cy5jaGFydCgnY2hhcnRQaWVDU1InLCB7CiAgICBjaGFydDogeyB0eXBlOiAncGllJywgYmFja2dyb3VuZENvbG9yOiAndHJhbnNwYXJlbnQnIH0sCiAgICB0aXRsZTogeyB0ZXh0OiAnU3RhdHVzIFBlbmdhanVhbiBGb3JjZSBNYWpldXJlJyB9LAogICAgdG9vbHRpcDogeyBwb2ludEZvcm1hdDogJ3tzZXJpZXMubmFtZX06IDxiPntwb2ludC5wZXJjZW50YWdlOi4xZn0lPC9iPicgfSwKICAgIHBsb3RPcHRpb25zOiB7CiAgICAgIHBpZTogeyAKICAgICAgICBhbGxvd1BvaW50U2VsZWN0OiB0cnVlLCAKICAgICAgICBjdXJzb3I6ICdwb2ludGVyJywgCiAgICAgICAgZGF0YUxhYmVsczogeyBlbmFibGVkOiBmYWxzZSB9LCAKICAgICAgICBzaG93SW5MZWdlbmQ6IHRydWUgCiAgICAgIH0KICAgIH0sCiAgICBzZXJpZXM6IFt7CiAgICAgIG5hbWU6ICdQZXJzZW50YXNlJywKICAgICAgY29sb3JCeVBvaW50OiB0cnVlLAogICAgICBkYXRhOiBbCiAgICAgICAKICAgICAgICB7IG5hbWU6ICdEaXRlcmltYScsIHk6IHRoaXMud2lkZ2V0U3RhdHVzLmRpdGVyaW1hLCBjb2xvcjogJyM0M2EwNDcnIH0sCiAgICAgICAgeyBuYW1lOiAnRGl0b2xhaycsIHk6IHRoaXMud2lkZ2V0U3RhdHVzLmRpdG9sYWssIGNvbG9yOiAnI2U1MzkzNScgfSwKICAgICAgICB7IG5hbWU6ICdQcm9zZXMnLCB5OiB0aGlzLndpZGdldFN0YXR1cy5kaXByb3NlcywgY29sb3I6ICcjZmZiMzAwJyB9CiAgICAgIF0KICAgIH1dCiAgfSk7Cn0sCmdldEJpZGFuZ0NTUigpIHsKICBjb25zdCB1c2Vyc19pZCA9IHRoaXMubWl0cmEudXNlcnNfaWQ7CiAgY29uc29sZS5sb2coJ3VzZXJzX2lkIGRpa2lyaW0ga2UgYmFja2VuZDonLCB1c2Vyc19pZCk7IC8vIGhhcnVzIGFkYSB2YWx1ZQogIGZldGNoKHRoaXMuJHN0b3JlLnN0YXRlLnVybC5EQVNIQk9BUkQgKyAiYmlkYW5nQ1NSIiwgewogICAgbWV0aG9kOiAnUE9TVCcsCiAgICBoZWFkZXJzOiB7CiAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgIGF1dGhvcml6YXRpb246ICJraWtlbnNiYXRhcmEgIiArIGxvY2FsU3RvcmFnZS50b2tlbgogICAgfSwKICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdXNlcnNfaWQgfSkKICB9KQogIC50aGVuKHJlcyA9PiByZXMuanNvbigpKQogIC50aGVuKHJlcyA9PiB7CiAgICBjb25zb2xlLmxvZygiRGF0YSBkYXJpIGJhY2tlbmQgYmlkYW5nQ1NSOiIsIHJlcy5kYXRhKTsKICAgIGlmKHJlcy5kYXRhKSB7CiAgICAgIHRoaXMuYmlkYW5nQ1NSID0gcmVzLmRhdGE7CiAgICAgIHRoaXMuY2hhcnRCeUJpZGFuZ0NTUigpOyAvLyBwYW5nZ2lsIGNoYXJ0CiAgICB9CiAgfSkKICAuY2F0Y2goZXJyID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7Cn0sCgpjaGFydEJ5QmlkYW5nQ1NSKCkgewogIGlmICghdGhpcy5iaWRhbmdDU1IgfHwgdGhpcy5iaWRhbmdDU1IubGVuZ3RoID09PSAwKSByZXR1cm47CgogIEhpZ2hjaGFydHMuY2hhcnQoJ2NoYXJ0QnlCaWRhbmdDU1InLCB7CiAgICBjaGFydDogeyB0eXBlOiAnY29sdW1uJywgYmFja2dyb3VuZENvbG9yOiAndHJhbnNwYXJlbnQnIH0sCiAgICB0aXRsZTogeyB0ZXh0OiAnUGVuZ2FqdWFuIEJlcmRhc2Fya2FuIEJpZGFuZyBDU1InIH0sCiAgICB4QXhpczogewogICAgICBjYXRlZ29yaWVzOiB0aGlzLmJpZGFuZ0NTUi5tYXAoYiA9PiBiLm5hbWFfYmlkYW5nKSwgLy8gPC0tIGdhbnRpIG5hbWFfYmlkYW5nIC0+IHVyYWlhbgogICAgICBjcm9zc2hhaXI6IHRydWUKICAgIH0sCiAgICB5QXhpczogewogICAgICBtaW46IDAsCiAgICAgIHRpdGxlOiB7IHRleHQ6ICdKdW1sYWggUGVuZ2FqdWFuJyB9CiAgICB9LAogICAgdG9vbHRpcDogewogICAgICBzaGFyZWQ6IHRydWUsCiAgICAgIHZhbHVlU3VmZml4OiAnIHBlbmdhanVhbicKICAgIH0sCiAgICBwbG90T3B0aW9uczogewogICAgICBjb2x1bW46IHsgY29sb3JCeVBvaW50OiB0cnVlIH0KICAgIH0sCiAgICBzZXJpZXM6IFt7CiAgICAgIG5hbWU6ICdKdW1sYWggUGVuZ2FqdWFuJywKICAgICAgZGF0YTogdGhpcy5iaWRhbmdDU1IubWFwKGIgPT4gYi50b3RhbF9wZW5nYWp1YW4pLCAKICAgICAgY29sb3I6ICcjMWU4OGU1JwogICAgfV0KICB9KTsKfSwKCgogIH0KfQo="},{"version":3,"sources":["DashboardPerusahaan.vue"],"names":[],"mappings":";AAkIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA","file":"DashboardPerusahaan.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"about\" style=\"padding:15px\">\n    <q-card bordered class=\"my-card\">\n      <!-- Header -->\n      <q-card-section class=\"main2 text-white\">\n        <div class=\"text-h6 h_titleHead\">Informasi Perusahaan</div>\n      </q-card-section>\n\n      <q-separator dark inset />\n\n      <!-- Profil Perusahaan + Widget -->\n      <q-card-section class=\"biruSangatmudaGrad\">\n        <div class=\"row q-col-gutter-md items-start\">\n\n          <!-- Logo Perusahaan -->\n          <div class=\"col-12 col-md-2 flex flex-center\">\n            <q-avatar size=\"180px\" square>\n              <img \n                :src=\"mitra?.file_name \n                  ? `${baseURL}/uploads/logo/${mitra.file_name}` \n                  : '/img/icons/logo_konsel.png'\" \n                alt=\"Logo Perusahaan\" \n              />\n            </q-avatar>\n          </div>\n\n          <!-- Informasi + Widget -->\n          <div class=\"col-12 col-md-10 column\">\n\n            <!-- Informasi Perusahaan -->\n            <div class=\"q-mb-md\">\n              <div class=\"text-h6 text-bold q-mb-sm\">{{mitra?.perusahaan_nama}}</div>\n              <div class=\"row items-center q-gutter-lg\">\n                <div class=\"row items-center col-auto\">\n                  <q-icon name=\"person\" size=\"16px\" class=\"q-mr-xs\" />\n                  <span><b>PIC:</b> {{mitra?.pic_nama}}</span>\n                </div>\n                <div class=\"row items-center col-auto\">\n                  <q-icon name=\"email\" size=\"16px\" class=\"q-mr-xs\" />\n                  <span><b>Email:</b> {{mitra?.perusahaan_email}}</span>\n                </div>\n                <div class=\"row items-center col-auto\">\n                  <q-icon name=\"phone\" size=\"16px\" class=\"q-mr-xs\" />\n                  <span><b>Telp:</b> {{mitra?.perusahaan_telp}}</span>\n                </div>\n                <div class=\"row items-center col-auto\">\n                  <q-icon name=\"place\" size=\"16px\" class=\"q-mr-xs\" />\n                  <span><b>Alamat:</b> {{mitra?.perusahaan_alamat}}</span>\n                </div>\n              </div>\n            </div>\n\n            <!-- Widget Status -->\n            <div class=\"row q-col-gutter-md\">\n              <div class=\"col-6 col-md-3\">\n                <div class=\"row shadow-3 frWidgetSub\" style=\"min-height:80px\">\n                  <div class=\"col-4 frWidgetSub1 text-center widgetdashboardTerimaIcon row items-center justify-center\">\n                    <q-icon name=\"check_circle_outline\" size=\"28px\" color=\"white\" />\n                  </div>\n                  <div class=\"col-8 frWidgetSub2 widgetdashboardTerimaNilai\">\n                    <span class=\"frWidgetText1\">Diterima</span><br>\n                    <span class=\"frWidgetText2\">{{ widgetStatus.diterima }}</span>\n                  </div>\n                </div>\n              </div>\n\n              <div class=\"col-6 col-md-3\">\n                <div class=\"row shadow-3 frWidgetSub\" style=\"min-height:80px\">\n                  <div class=\"col-4 frWidgetSub1 text-center widgetdashboardTolakIcon row items-center justify-center\">\n                    <q-icon name=\"block\" size=\"28px\" color=\"white\" />\n                  </div>\n                  <div class=\"col-8 frWidgetSub2 widgetdashboardTolakNilai\">\n                    <span class=\"frWidgetText1\">Ditolak</span><br>\n                    <span class=\"frWidgetText2\">{{ widgetStatus.ditolak }}</span>\n                  </div>\n                </div>\n              </div>\n\n              <div class=\"col-6 col-md-3\">\n                <div class=\"row shadow-3 frWidgetSub\" style=\"min-height:80px\">\n                  <div class=\"col-4 frWidgetSub1 text-center widgetdashboardProsesIcon row items-center justify-center\">\n                    <q-icon name=\"hourglass_top\" size=\"28px\" color=\"white\" />\n                  </div>\n                  <div class=\"col-8 frWidgetSub2 widgetdashboardProsesNilai\">\n                    <span class=\"frWidgetText1\">Proses</span><br>\n                    <span class=\"frWidgetText2\">{{ widgetStatus.diproses }}</span>\n                  </div>\n                </div>\n              </div>\n\n              <div class=\"col-6 col-md-3\">\n                <div class=\"row shadow-3 frWidgetSub\" style=\"min-height:80px\">\n                  <div class=\"col-4 frWidgetSub1 text-center main1x row items-center justify-center\">\n                    <q-icon name=\"pending_actions\" size=\"28px\" color=\"white\" />\n                  </div>\n                  <div class=\"col-8 frWidgetSub2 main1\">\n                    <span class=\"frWidgetText1\">Pengajuan</span><br>\n                    <span class=\"frWidgetText2\">{{ widgetStatus.total_pengajuan }}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n          </div>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-12 col-md-6 padding1-5\">\n            <div class=\"frameChart shadow-5\">\n              <div id=\"chartPieCSR\" style=\"width:100%; height:400px;\"></div>\n            </div>\n          </div>\n          <div class=\"col-12 col-md-6 padding1-5\">\n            <div class=\"frameChart shadow-5\">\n              <div id=\"chartByBidangCSR\" style=\"width:100%; height:400px;\"></div>\n            </div>\n          </div>\n        </div>\n      </q-card-section>\n      <q-card-section class=\"biruSangatmudaGrad\">\n\n\n      </q-card-section>\n    </q-card>\n\n\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      bidangCSRChart: [],  // data dari backend\n      bidangCSR: [],\n      mitra: null,\n      tipe: null,\n      perusahaan: null,\n      indikator: {\n        pengajuan: 12,\n        diterima: 7,\n        ditolak: 3,\n        proses: 2\n      },\n\n      widgetStatus: {\n        total_pengajuan: 0,\n        diterima: 0,\n        ditolak: 0,\n        diproses: 0\n      },\n      \n    }\n  },\n  mounted() {\n    const get_profile = JSON.parse(localStorage.profile);\n\n    this.tipe = Number(get_profile.profile.db_csrkonsel);\n\n    this.mitra = {\n      id: get_profile._id,\n      nama: get_profile.profile.nama,\n      username: get_profile.username,\n      email: get_profile.email,\n      telp: get_profile.profile.telp,\n      alamat: get_profile.profile.alamat,\n      pic: get_profile.profile.pic,\n      file_name: get_profile.profile.file_name // logo perusahaan\n    };\n\n    this.getMitra(get_profile._id);\n\n\n    this.loadWidgetAndChart();\n  },\n  methods: {\n\n    \n\n    async loadWidgetAndChart() {\n    try {\n      // Ambil data widget dari backend\n      const res = await fetch(this.$store.state.url.DASHBOARD + \"statusPengajuan\", {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"authorization\": \"kikensbatara \" + localStorage.token\n        },\n        body: JSON.stringify({ users_id: this.mitra.id })\n      });\n\n      const data = await res.json();\n\n      if (data.data) {\n        // Update widgetStatus\n        this.widgetStatus = data.data;\n      }\n\n      // Setelah data widget tersedia, render pie chart\n      this.chartPieCSR();\n\n    } catch (err) {\n      console.error('Gagal ambil data widget:', err);\n    }\n  },\n\n    // Ambil jumlah pengajuan untuk widget\n    getWidgetStatus(users_id) {\n      fetch(this.$store.state.url.DASHBOARD + \"statusPengajuan\", {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"authorization\": \"kikensbatara \" + localStorage.token\n        },\n        body: JSON.stringify({ users_id })\n      })\n      .then(res => res.json())\n      .then(res => {\n        if(res.data) {\n          this.widgetStatus.total_pengajuan = res.data.total_pengajuan;\n          this.widgetStatus.diterima = res.data.diterima;\n          this.widgetStatus.ditolak = res.data.ditolak;\n          this.widgetStatus.diproses = res.data.diproses;\n        }\n      })\n      .catch(err => console.error('Gagal ambil data widget:', err));\n    },\n\n    getMitra(userId) {\n      fetch(this.$store.state.url.DATA_MITRA + \"viewByUser\", {\n        method: 'POST',\n        headers: {\n          \"content-type\": \"application/json\",\n          authorization: \"kikensbatara \" + localStorage.token\n        },\n        body: JSON.stringify({ users_id: userId })\n      })\n      .then(res => res.json())\n      .then(res => {\n        if (res.data) {\n          // kalau backend return array\n          this.mitra = Array.isArray(res.data) ? res.data[0] : res.data;\n          // panggil widget status pakai users_id dari mitra\n      this.getWidgetStatus(this.mitra.users_id || userId);\n      this.getBidangCSR();\n        }\n      })\n      .catch(err => {\n        console.error('Gagal ambil data perusahaan:', err);\n      });\n    },\n    chartPieCSR() {\n  Highcharts.chart('chartPieCSR', {\n    chart: { type: 'pie', backgroundColor: 'transparent' },\n    title: { text: 'Status Pengajuan Force Majeure' },\n    tooltip: { pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>' },\n    plotOptions: {\n      pie: { \n        allowPointSelect: true, \n        cursor: 'pointer', \n        dataLabels: { enabled: false }, \n        showInLegend: true \n      }\n    },\n    series: [{\n      name: 'Persentase',\n      colorByPoint: true,\n      data: [\n       \n        { name: 'Diterima', y: this.widgetStatus.diterima, color: '#43a047' },\n        { name: 'Ditolak', y: this.widgetStatus.ditolak, color: '#e53935' },\n        { name: 'Proses', y: this.widgetStatus.diproses, color: '#ffb300' }\n      ]\n    }]\n  });\n},\ngetBidangCSR() {\n  const users_id = this.mitra.users_id;\n  console.log('users_id dikirim ke backend:', users_id); // harus ada value\n  fetch(this.$store.state.url.DASHBOARD + \"bidangCSR\", {\n    method: 'POST',\n    headers: {\n      \"Content-Type\": \"application/json\",\n      authorization: \"kikensbatara \" + localStorage.token\n    },\n    body: JSON.stringify({ users_id })\n  })\n  .then(res => res.json())\n  .then(res => {\n    console.log(\"Data dari backend bidangCSR:\", res.data);\n    if(res.data) {\n      this.bidangCSR = res.data;\n      this.chartByBidangCSR(); // panggil chart\n    }\n  })\n  .catch(err => console.error(err));\n},\n\nchartByBidangCSR() {\n  if (!this.bidangCSR || this.bidangCSR.length === 0) return;\n\n  Highcharts.chart('chartByBidangCSR', {\n    chart: { type: 'column', backgroundColor: 'transparent' },\n    title: { text: 'Pengajuan Berdasarkan Bidang CSR' },\n    xAxis: {\n      categories: this.bidangCSR.map(b => b.nama_bidang), // <-- ganti nama_bidang -> uraian\n      crosshair: true\n    },\n    yAxis: {\n      min: 0,\n      title: { text: 'Jumlah Pengajuan' }\n    },\n    tooltip: {\n      shared: true,\n      valueSuffix: ' pengajuan'\n    },\n    plotOptions: {\n      column: { colorByPoint: true }\n    },\n    series: [{\n      name: 'Jumlah Pengajuan',\n      data: this.bidangCSR.map(b => b.total_pengajuan), \n      color: '#1e88e5'\n    }]\n  });\n},\n\n\n  }\n}\n</script>\n"]}]}