(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2533a6f9"],{2457:function(t,a,e){},"5d7b":function(t,a,e){"use strict";e("2457")},c3fd:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"about",staticStyle:{padding:"15px"}},[a("q-card",{staticClass:"my-card",attrs:{bordered:""}},[a("q-card-section",{staticClass:"main2 text-white"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-md-6"},[a("div",{staticClass:"text-h6 h_titleHead"},[t._v("Transaksi Darah")]),a("div",{staticClass:"text-h8"},[t._v("Manajemen Darah")])]),a("div",{staticClass:"col-12 col-md-2"}),a("div",{staticClass:"col-12 col-md-4"},[a("div",{staticClass:"row"},[a("q-input",{staticClass:"bg-white",staticStyle:{width:"90%"},attrs:{outlined:"",square:"",dense:!0},on:{keyup:function(a){return t.cari_data()}},model:{value:t.cari_value,callback:function(a){t.cari_value=a},expression:"cari_value"}}),a("q-btn",{staticClass:"main4",staticStyle:{width:"10%"},attrs:{glossy:"",dense:"",flat:"",icon:"add"},on:{click:function(a){t.mdl_add=!0}}},[a("q-tooltip",{attrs:{"content-class":"bg-green-5","content-style":"font-size: 13px"}},[t._v(" Tambah Transaksi ")])],1)],1)])])])],1),a("hr",{staticClass:"hrpagin2"}),a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-12 col-md-4"},[a("span",{staticClass:"h_lable"},[t._v("Komponen")]),a("q-select",{staticClass:"bg-white",attrs:{options:t.list_komponen,"option-label":"nama_komponen","option-value":"id","emit-value":"","map-options":"",outlined:"",dense:""},on:{input:t.applyFilter},model:{value:t.filter.komponen_id,callback:function(a){t.$set(t.filter,"komponen_id",a)},expression:"filter.komponen_id"}})],1),a("div",{staticClass:"col-12 col-md-4"},[a("span",{staticClass:"h_lable"},[t._v("Golongan Darah")]),a("q-select",{staticClass:"bg-white",attrs:{options:["A","B","O","AB"],outlined:"",dense:""},on:{input:t.applyFilter},model:{value:t.filter.golongan_darah,callback:function(a){t.$set(t.filter,"golongan_darah",a)},expression:"filter.golongan_darah"}})],1),a("div",{staticClass:"col-12 col-md-4"},[a("span",{staticClass:"h_lable"},[t._v("Tipe Transaksi")]),a("q-select",{staticClass:"bg-white",attrs:{options:["masuk","keluar"],outlined:"",dense:""},on:{input:t.applyFilter},model:{value:t.filter.tipe_transaksi,callback:function(a){t.$set(t.filter,"tipe_transaksi",a)},expression:"filter.tipe_transaksi"}})],1)]),a("hr",{staticClass:"hrpagin2"}),a("div",{staticClass:"tbl_responsive"},[a("table",{attrs:{width:"100%"}},[t._m(0),a("tbody",[t._l(t.list_data,(function(e,s){return a("tr",{key:e.id_transaksi+"-"+s},[a("td",{staticClass:"text-center"},[t._v(t._s(t.indexing(s+1)))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.golongan_darah))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.rhesus))]),a("td",[t._v(t._s(e.nama_komponen))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.jumlah))]),a("td",{staticClass:"text-center"},[a("q-badge",{attrs:{color:"masuk"===e.tipe_transaksi?"green":"red"}},[t._v(" "+t._s(e.tipe_transaksi.toUpperCase())+" ")])],1),a("td",[t._v(t._s(t.formatTanggal(e.tanggal)))]),a("td",[t._v(t._s(e.keterangan||"-"))]),a("td",{staticClass:"text-center q-gutter-sm"},[a("q-btn",{attrs:{dense:"",round:"",color:"warning",icon:"edit"},on:{click:function(a){return t.openEdit(e)}}},[a("q-tooltip",{attrs:{"content-class":"bg-amber-7"}},[t._v("Edit Data")])],1),a("q-btn",{attrs:{dense:"",round:"",color:"negative",icon:"delete"},on:{click:function(a){return t.openDelete(e)}}},[a("q-tooltip",{attrs:{"content-class":"bg-red-7"}},[t._v("Hapus Data")])],1)],1)])})),0===t.list_data.length?a("tr",[a("td",{staticClass:"text-center text-grey",attrs:{colspan:"8"}},[t._v(" Belum ada data transaksi. ")])]):t._e()],2)])]),a("div",{staticClass:"flex flex-center q-mt-md"},[a("q-pagination",{attrs:{max:t.page_last,color:"grey-6","max-pages":4,"direction-links":!0,"boundary-links":!0},on:{input:t.getView},model:{value:t.page_first,callback:function(a){t.page_first=a},expression:"page_first"}})],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.mdl_add,callback:function(a){t.mdl_add=a},expression:"mdl_add"}},[a("q-card",{staticClass:"mdl-md"},[a("q-card-section",{staticClass:"main2 text-white"},[a("div",{staticClass:"text-h6 h_modalhead"},[t._v("Tambah Transaksi Darah")])]),a("form",{on:{submit:function(a){return a.preventDefault(),t.addData.apply(null,arguments)}}},[a("q-card-section",{staticClass:"q-pt-none"},[a("span",{staticClass:"h_lable"},[t._v("Golongan Darah")]),a("q-select",{staticClass:"bg-white margin_btn",attrs:{outlined:"",square:"",dense:!0,options:["A","B","O","AB"],required:""},model:{value:t.form.golongan_darah,callback:function(a){t.$set(t.form,"golongan_darah",a)},expression:"form.golongan_darah"}}),a("span",{staticClass:"h_lable"},[t._v("Rhesus")]),a("q-select",{staticClass:"bg-white margin_btn",attrs:{outlined:"",square:"",dense:!0,options:["+","-"],required:""},model:{value:t.form.rhesus,callback:function(a){t.$set(t.form,"rhesus",a)},expression:"form.rhesus"}}),a("span",{staticClass:"h_lable"},[t._v("Komponen Darah")]),a("q-select",{staticClass:"bg-white margin_btn",attrs:{outlined:"",square:"",dense:!0,options:t.list_komponen,"option-value":"id","option-label":"nama_komponen","emit-value":"","map-options":"",required:""},model:{value:t.form.komponen_id,callback:function(a){t.$set(t.form,"komponen_id",a)},expression:"form.komponen_id"}}),a("span",{staticClass:"h_lable"},[t._v("Jumlah (Kantong)")]),a("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"number",outlined:"",square:"",dense:!0,required:""},model:{value:t.form.jumlah,callback:function(a){t.$set(t.form,"jumlah",t._n(a))},expression:"form.jumlah"}}),a("span",{staticClass:"h_lable"},[t._v("Tipe Transaksi")]),a("q-select",{staticClass:"bg-white margin_btn",attrs:{outlined:"",square:"",dense:!0,options:["masuk","keluar"],required:""},model:{value:t.form.tipe_transaksi,callback:function(a){t.$set(t.form,"tipe_transaksi",a)},expression:"form.tipe_transaksi"}}),a("span",{staticClass:"h_lable"},[t._v("Keterangan")]),a("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"textarea",outlined:"",square:"",dense:!0},model:{value:t.form.keterangan,callback:function(a){t.$set(t.form,"keterangan",a)},expression:"form.keterangan"}})],1),a("q-card-actions",{staticClass:"bg-grey-4 mdl-footer",attrs:{align:"right"}},[a("q-btn",{attrs:{loading:t.btn_add,color:"primary",type:"submit",label:"Simpan"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Batal",color:"negative"}})],1)],1)],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.mdl_edit,callback:function(a){t.mdl_edit=a},expression:"mdl_edit"}},[a("q-card",{staticClass:"mdl-md"},[a("q-card-section",{staticClass:"bg-orange text-white"},[a("div",{staticClass:"text-h6 h_modalhead"},[t._v("Edit Transaksi Darah")])]),a("form",{on:{submit:function(a){return a.preventDefault(),t.editData.apply(null,arguments)}}},[a("q-card-section",{staticClass:"q-pt-none"},[a("span",{staticClass:"h_lable"},[t._v("Golongan Darah")]),a("q-select",{staticClass:"bg-white margin_btn",attrs:{outlined:"",square:"",dense:!0,options:["A","B","O","AB"],required:""},model:{value:t.form_edit.golongan_darah,callback:function(a){t.$set(t.form_edit,"golongan_darah",a)},expression:"form_edit.golongan_darah"}}),a("span",{staticClass:"h_lable"},[t._v("Rhesus")]),a("q-select",{staticClass:"bg-white margin_btn",attrs:{outlined:"",square:"",dense:!0,options:["+","-"],required:""},model:{value:t.form_edit.rhesus,callback:function(a){t.$set(t.form_edit,"rhesus",a)},expression:"form_edit.rhesus"}}),a("span",{staticClass:"h_lable"},[t._v("Komponen Darah")]),a("q-select",{staticClass:"bg-white margin_btn",attrs:{outlined:"",square:"",dense:!0,options:t.list_komponen,"option-value":"id","option-label":"nama_komponen","emit-value":"","map-options":"",required:""},model:{value:t.form_edit.komponen_id,callback:function(a){t.$set(t.form_edit,"komponen_id",a)},expression:"form_edit.komponen_id"}}),a("span",{staticClass:"h_lable"},[t._v("Jumlah (Kantong)")]),a("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"number",outlined:"",square:"",dense:!0,required:""},model:{value:t.form_edit.jumlah,callback:function(a){t.$set(t.form_edit,"jumlah",t._n(a))},expression:"form_edit.jumlah"}}),a("span",{staticClass:"h_lable"},[t._v("Tipe Transaksi")]),a("q-select",{staticClass:"bg-white margin_btn",attrs:{outlined:"",square:"",dense:!0,options:["masuk","keluar"],required:""},model:{value:t.form_edit.tipe_transaksi,callback:function(a){t.$set(t.form_edit,"tipe_transaksi",a)},expression:"form_edit.tipe_transaksi"}}),a("span",{staticClass:"h_lable"},[t._v("Keterangan")]),a("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"textarea",outlined:"",square:"",dense:!0},model:{value:t.form_edit.keterangan,callback:function(a){t.$set(t.form_edit,"keterangan",a)},expression:"form_edit.keterangan"}})],1),a("q-card-actions",{staticClass:"bg-grey-4 mdl-footer",attrs:{align:"right"}},[a("q-btn",{attrs:{loading:t.btn_edit,color:"primary",type:"submit",label:"Simpan Perubahan"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Batal",color:"negative"}})],1)],1)],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.mdl_hapus,callback:function(a){t.mdl_hapus=a},expression:"mdl_hapus"}},[a("q-card",{staticClass:"mdl-sm"},[a("q-card-section",{staticClass:"q-pt-none text-center orageGrad"},[a("form",{on:{submit:function(a){return a.preventDefault(),t.confirmDelete.apply(null,arguments)}}},[a("br"),a("img",{attrs:{src:"img/alert.png",alt:"",width:"75"}}),t._v(" "),a("br"),a("span",{staticClass:"h_notifikasi"},[t._v("APAKAH ANDA YAKIN INGIN MENGHAPUS TRANSAKSI INI??")]),a("div",{staticClass:"q-mt-md"},[a("div",[a("strong",[t._v(t._s(t.hapus_target?t.hapus_target.golongan_darah+t.hapus_target.rhesus+" — "+(t.hapus_target.nama_komponen||""):""))])]),a("div",[t._v("Jumlah: "+t._s(t.hapus_target?t.hapus_target.jumlah:""))]),a("div",{staticClass:"q-mt-sm text-white"},[t._v("Tindakan ini akan mengubah stok darah sesuai transaksi yang dihapus.")])]),a("br"),a("q-card-actions",{attrs:{align:"center"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Batal",size:"sm",color:"negative"},on:{click:function(a){t.hapus_target=null}}}),t._v("   "),a("q-btn",{attrs:{loading:t.btn_hapus,type:"submit",label:"Hapus",size:"sm",color:"primary"}})],1)],1)])],1)],1)],1)},i=[function(){var t=this,a=t._self._c;return a("thead",{staticClass:"h_table_head main2x text-white"},[a("tr",[a("th",{staticClass:"text-center",attrs:{width:"5%"}},[t._v("No")]),a("th",{attrs:{width:"5%"}},[t._v("Gol.Darah")]),a("th",{staticClass:"text-center",attrs:{width:"5%"}},[t._v("Rhesus")]),a("th",{attrs:{width:"20%"}},[t._v("Komponen")]),a("th",{staticClass:"text-center",attrs:{width:"5%"}},[t._v("Jumlah Kantong")]),a("th",{staticClass:"text-center",attrs:{width:"10%"}},[t._v("Tipe")]),a("th",{attrs:{width:"15%"}},[t._v("Tanggal")]),a("th",{attrs:{width:"15%"}},[t._v("Keterangan")]),a("th",{attrs:{width:"10%"}},[t._v("Aksi")])])])}],n={data(){return{form:{golongan_darah:"",rhesus:"",komponen_id:null,jumlah:0,tipe_transaksi:"",keterangan:""},form_edit:{id_transaksi:"",golongan_darah:"",rhesus:"",komponen_id:null,jumlah:0,tipe_transaksi:"",keterangan:""},list_data:[],list_komponen:[],page_first:1,page_last:0,page_limit:10,jml_data:0,total_data:0,cari_value:"",mdl_add:!1,btn_add:!1,mdl_edit:!1,btn_edit:!1,mdl_hapus:!1,btn_hapus:!1,hapus_target:null,filter:{komponen_id:"",golongan_darah:"",tipe_transaksi:""}}},methods:{getView(){const t=new URLSearchParams({page:this.page_first,limit:this.page_limit,cari_value:this.cari_value||"",komponen_id:this.filter.komponen_id||"",golongan_darah:this.filter.golongan_darah||"",tipe_transaksi:this.filter.tipe_transaksi||""}).toString();fetch(this.$store.state.url.TRANSAKSI+"view?"+t,{method:"GET",headers:{"content-type":"application/json",authorization:"kikensbatara "+localStorage.token}}).then(t=>t.json()).then(t=>{t.success?(this.list_data=t.data||[],this.total_data=t.total_data||0,this.page_last=t.total_pages||1,this.jml_data=this.list_data.length,this.page_first>this.page_last&&(this.page_first=this.page_last||1)):this.$q.notify({type:"negative",message:t.message||"Gagal memuat data transaksi darah"})}).catch(t=>{console.error("Error fetching transaksi:",t),this.$q.notify({type:"negative",message:"Terjadi kesalahan saat memuat data transaksi"})})},getKomponen(){fetch(this.$store.state.url.KOMPONEN+"view",{method:"POST",headers:{"content-type":"application/json",authorization:"kikensbatara "+localStorage.token},body:JSON.stringify({})}).then(t=>t.json()).then(t=>{this.list_komponen=t.data||[]}).catch(t=>console.error("Error getKomponen:",t))},addData(){this.btn_add=!0,fetch(this.$store.state.url.TRANSAKSI+"addData",{method:"POST",headers:{"content-type":"application/json",authorization:"kikensbatara "+localStorage.token},body:JSON.stringify(this.form)}).then(t=>t.json()).then(t=>{t.success?(this.$q.notify({type:"positive",message:t.message||"Transaksi berhasil ditambahkan"}),this.mdl_add=!1,this.resetForm(),this.getView()):this.$q.notify({type:"negative",message:t.message||"Gagal menambah transaksi"})}).catch(t=>{console.error("Error addData:",t),this.$q.notify({type:"negative",message:"Gagal menambah transaksi darah"})}).finally(()=>{this.btn_add=!1})},resetForm(){this.form={golongan_darah:"",rhesus:"",komponen_id:null,jumlah:0,tipe_transaksi:"",keterangan:""}},openEdit(t){this.form_edit={id_transaksi:t.id_transaksi,golongan_darah:t.golongan_darah,rhesus:t.rhesus,komponen_id:t.komponen_id,jumlah:t.jumlah,tipe_transaksi:t.tipe_transaksi,keterangan:t.keterangan},this.mdl_edit=!0},editData(){this.btn_edit=!0,fetch(this.$store.state.url.TRANSAKSI+"editData",{method:"POST",headers:{"content-type":"application/json",authorization:"kikensbatara "+localStorage.token},body:JSON.stringify(this.form_edit)}).then(t=>t.json()).then(t=>{t.success?(this.$q.notify({type:"positive",message:t.message||"Transaksi darah berhasil diperbarui"}),this.mdl_edit=!1,this.getView()):this.$q.notify({type:"negative",message:t.message||"Gagal memperbarui transaksi"})}).catch(t=>{console.error("Error editData:",t),this.$q.notify({type:"negative",message:"Terjadi kesalahan saat memperbarui data"})}).finally(()=>{this.btn_edit=!1})},openDelete(t){this.hapus_target=t,this.mdl_hapus=!0},confirmDelete(){this.hapus_target&&this.hapus_target.id_transaksi?(this.btn_hapus=!0,fetch(this.$store.state.url.TRANSAKSI+"delete/"+this.hapus_target.id_transaksi,{method:"DELETE",headers:{"content-type":"application/json",authorization:"kikensbatara "+localStorage.token}}).then(t=>t.json()).then(t=>{t.success?(this.$q.notify({type:"positive",message:t.message||"Transaksi berhasil dihapus"}),this.mdl_hapus=!1,this.hapus_target=null,this.getView()):this.$q.notify({type:"negative",message:t.message||"Gagal menghapus transaksi"})}).catch(t=>{console.error("Error delete transaksi:",t),this.$q.notify({type:"negative",message:"Terjadi kesalahan saat menghapus transaksi"})}).finally(()=>{this.btn_hapus=!1})):this.$q.notify({type:"negative",message:"Tidak ada transaksi yang dipilih"})},indexing(t){return(this.page_first-1)*this.page_limit+t},formatTanggal(t){if(!t)return"-";const a=new Date(t);return isNaN(a)?t:a.toLocaleString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},cari_data(){this.page_first=1,this.getView()},applyFilter(){this.page_first=1,this.getView()}},mounted(){this.getKomponen(),this.getView()}},r=n,o=(e("5d7b"),e("2877")),l=e("fe09"),d=Object(o["a"])(r,s,i,!1,null,"1c67b3e6",null);a["default"]=d.exports;d.options.components=Object.assign(Object.create(d.options.components||null),d.options.components||{},{QCard:l["h"],QCardSection:l["j"],QInput:l["w"],QBtn:l["f"],QTooltip:l["O"],QSelect:l["H"],QSeparator:l["I"],QBadge:l["c"],QPagination:l["G"],QDialog:l["l"],QCardActions:l["i"]}),d.options.directives=Object.assign(Object.create(d.options.directives||null),d.options.directives||{},{ClosePopup:l["a"]})}}]);
//# sourceMappingURL=chunk-2533a6f9.d16849d5.js.map