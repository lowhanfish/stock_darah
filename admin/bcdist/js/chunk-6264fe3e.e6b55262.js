(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6264fe3e"],{4229:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t._self._c;return a("div",{staticClass:"about",staticStyle:{padding:"15px"}},[a("q-card",{staticClass:"my-card",attrs:{bordered:""}},[a("q-card-section",{staticClass:"main2 text-white"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-md-6"},[a("div",{staticClass:"text-h6 h_titleHead"},[t._v("Stok Darah")]),a("div",{staticClass:"text-h8"},[t._v("Manajemen Darah")])]),a("div",{staticClass:"col-12 col-md-2"})])]),a("q-separator",{attrs:{dark:"",inset:""}}),a("q-card-section",[a("div",{staticClass:"tbl_responsive"},[a("table",{attrs:{width:"100%"}},[a("thead",{staticClass:"h_table_head main2x text-white"},[a("tr",[a("th",{staticClass:"text-center",attrs:{rowspan:"2"}},[t._v("KOMPONEN")]),a("th",{staticClass:"text-center",attrs:{colspan:"8"}},[t._v(" Golongan Darah ")]),a("th",{staticClass:"text-center",attrs:{rowspan:"2"}},[t._v("TOTAL")])]),a("tr",t._l(t.cols,(function(s){return a("th",{key:s,staticClass:"text-center",staticStyle:{color:"red"}},[t._v(t._s(s)+" ")])})),0)]),a("tbody",[t._l(t.matrix,(function(s,e){return a("tr",{key:s.Komponen+"-"+e,staticClass:"h_table_body"},[a("td",[t._v(t._s(s.Komponen))]),t._l(t.cols,(function(e){return a("td",{key:e,staticClass:"text-center"},[t._v(t._s(t.formatNumber(s[e])))])})),a("td",{staticClass:"text-right"},[a("strong",[t._v(t._s(t.formatNumber(s.Total)))])])],2)})),0===t.matrix.length?a("tr",[a("td",{staticClass:"text-center text-grey",attrs:{colspan:"11"}},[t._v("Belum ada data — silakan klik Refresh. ")])]):t._e(),a("tr",{staticClass:"h_table_body"},[a("td",{staticClass:"main2x text-white text-bold text-center"},[t._v("JUMLAH")]),a("td",{staticClass:"text-center",attrs:{colspan:"2"}},[a("strong",[t._v(t._s(t.formatNumber(t.groupTotals.A)))])]),a("td",{staticClass:"text-center",attrs:{colspan:"2"}},[a("strong",[t._v(t._s(t.formatNumber(t.groupTotals.B)))])]),a("td",{staticClass:"text-center",attrs:{colspan:"2"}},[a("strong",[t._v(t._s(t.formatNumber(t.groupTotals.O)))])]),a("td",{staticClass:"text-center",attrs:{colspan:"2"}},[a("strong",[t._v(t._s(t.formatNumber(t.groupTotals.AB)))])]),a("td",{staticClass:"text-right"},[a("strong",[t._v(t._s(t.formatNumber(t.groupTotals.Total)))])])])],2)]),a("div",{staticClass:"row q-mt-md"},[a("div",{staticClass:"col-10"},[a("p",{staticStyle:{"font-style":"italic","font-size":"13px","line-height":"1.4"}},[t._v(" * Angka pada laman ini disajikan dalam "),a("strong",[t._v("≈ kantong")]),t._v(" untuk kemudahan publik. "),a("br"),t._v(" Komponen berbasis "),a("strong",[t._v("cc")]),t._v(" dikonversi dengan asumsi "),a("strong",[t._v("1 kantong PRC ≈ 300 cc")]),t._v(" dan "),a("strong",[t._v("1 kantong FFP/FP ≈ 200 cc")]),t._v(". "),a("br"),t._v(" Angka klinis rinci tersedia pada sistem internal. ")])])])])]),a("q-separator")],1)],1)},r=[],o={data(){return{cols:["A+","A-","B+","B-","O+","O-","AB+","AB-"],matrix:[],lastSync:null,loading:!1}},computed:{groupTotals(){const t={A:0,B:0,O:0,AB:0,Total:0};return Array.isArray(this.matrix)?(this.matrix.forEach(a=>{const s=Number(a["A+"]||0),e=Number(a["A-"]||0),r=Number(a["B+"]||0),o=Number(a["B-"]||0),n=Number(a["O+"]||0),i=Number(a["O-"]||0),c=Number(a["AB+"]||0),l=Number(a["AB-"]||0),d=Number(a["Total"]||0);t.A+=s+e,t.B+=r+o,t.O+=n+i,t.AB+=c+l,t.Total+=d}),t):t}},methods:{fetchMatrix:function(){this.loading=!0,this.$store.commit("shoWLoading");const t=new URLSearchParams({page:1,limit:1e4,sort_by:"s.jumlah_stok",sort_dir:"DESC"}).toString(),a=this.$store.state.url.STOK+"view?"+t;fetch(a,{method:"GET",headers:{"content-type":"application/json",authorization:"kikensbatara "+localStorage.token}}).then(t=>t.json()).then(t=>{console.log("stok_darah view:",t);const a=Array.isArray(t.data)?t.data:t.rows||[],s={};a.forEach(t=>{const a=(t.golongan_darah||"").toString().trim().toUpperCase(),e=(t.rhesus||"").toString().trim(),r=t.nama_komponen||"Komponen "+t.komponen_id,o=`${a}${e}`;s[r]||(s[r]={Komponen:r,Total:0},this.cols.forEach(t=>{s[r][t]=0}));const n=Number(t.jumlah_stok||0);this.cols.includes(o)&&(s[r][o]+=n),s[r].Total+=n}),this.matrix=Object.values(s).sort((t,a)=>a.Total-t.Total),this.lastSync=new Date}).catch(t=>{console.error("fetchMatrix error",t),this.matrix=[]}).finally(()=>{this.loading=!1,this.$store.commit("hideLoading")})},formatNumber(t){const a=Number(t);return isNaN(a)?null!==t&&void 0!==t?t:"-":a.toLocaleString("id-ID")},formatDate(t){if(!t)return"-";const a=new Date(t);return isNaN(a)?t:a.toLocaleString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}},mounted(){this.fetchMatrix()}},n=o,i=(s("6ccc"),s("2877")),c=s("fe09"),l=Object(i["a"])(n,e,r,!1,null,"5818af4d",null);a["default"]=l.exports;l.options.components=Object.assign(Object.create(l.options.components||null),l.options.components||{},{QCard:c["h"],QCardSection:c["j"],QSeparator:c["I"]})},"6a91":function(t,a,s){},"6ccc":function(t,a,s){"use strict";s("6a91")}}]);
//# sourceMappingURL=chunk-6264fe3e.e6b55262.js.map