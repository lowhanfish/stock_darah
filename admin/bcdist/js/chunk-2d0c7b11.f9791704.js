(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c7b11"],{5264:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"about",staticStyle:{padding:"15px"}},[a("q-card",{staticClass:"my-card",attrs:{bordered:""}},[a("q-card-section",{staticClass:"main2 text-white"},[a("div",{staticClass:"row items-center q-col-gutter-md"},[a("div",{staticClass:"col-12 col-md-6"},[a("div",{staticClass:"text-h6 h_titleHead"},[t._v("Foto Kegiatan")]),a("div",{staticClass:"text-h8"},[t._v("Informasi Pindara")])]),a("div",{staticClass:"col-12 col-md-6"},[a("div",{staticClass:"row"},[a("q-input",{staticClass:"bg-white col q-mr-sm",attrs:{disable:"",outlined:"",square:"",dense:"",placeholder:"Cari..."},on:{keyup:function(a){return t.cari_data()}},model:{value:t.cari_value,callback:function(a){t.cari_value=a},expression:"cari_value"}}),a("q-btn",{staticClass:"col-auto",attrs:{glossy:"",color:"green",dense:"",icon:"add"},on:{click:function(a){t.mdl_add=!0}}},[a("q-tooltip",{attrs:{"content-class":"bg-green-7","content-style":"font-size: 13px"}},[t._v(" Tambah Foto kegiatan ")])],1)],1)])])])],1),a("hr",{staticClass:"hrpagin2"}),a("div",{staticClass:"tbl_responsive"},[a("table",{attrs:{width:"100%"}},[t._m(0),t._l(t.list_data,(function(e,s){return a("tr",{key:e.id,staticClass:"h_table_body"},[a("td",{staticClass:"text-center"},[t._v(t._s(t.indexing(s+1))+".")]),a("td",{staticClass:"text-center"},[e.file_name?a("img",{staticStyle:{"max-width":"80px","border-radius":"6px",cursor:"pointer"},attrs:{src:t.file_path+e.file_name,alt:"poster"},on:{click:function(a){return t.openImage(t.file_path+e.file_name)}}}):a("q-icon",{attrs:{name:"image_not_supported",size:"sm",color:"grey"}})],1),a("td",[a("div",{staticClass:"text-bold"},[t._v(t._s(e.nama_kegiatan))])]),a("td",[a("div",{staticClass:"text-bold"},[t._v(t._s(t.UMUM.tglConvert(e.created_at)))])]),a("td",{staticClass:"text-center q-gutter-sm"},[a("q-btn",{attrs:{dense:"",round:"",color:"warning",icon:"edit"},on:{click:function(a){return t.openEdit(e)}}},[a("q-tooltip",{attrs:{"content-class":"bg-amber-7"}},[t._v("Edit")])],1),a("q-btn",{attrs:{dense:"",round:"",color:"negative",icon:"delete"},on:{click:function(a){return t.openDelete(e)}}},[a("q-tooltip",{attrs:{"content-class":"bg-red-7"}},[t._v("Hapus")])],1)],1)])}))],2)]),a("hr",{staticClass:"hrpagin"}),a("br"),a("div",{staticClass:"flex flex-center"},[a("q-pagination",{attrs:{max:t.page_last,"max-pages":4,color:"grey-6","direction-links":!0,"boundary-links":!0,"icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward"},on:{input:t.getView},model:{value:t.page_first,callback:function(a){t.page_first=a},expression:"page_first"}})],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.mdl_add,callback:function(a){t.mdl_add=a},expression:"mdl_add"}},[a("q-card",{staticClass:"mdl-md"},[a("q-card-section",{staticClass:"main2 text-white"},[a("div",{staticClass:"text-h6 h_modalhead"},[t._v("Tambah Foto Kegiatan")])]),a("form",{on:{submit:function(a){return a.preventDefault(),t.addData()}}},[a("q-card-section",{staticClass:"q-pt-none"},[a("hr",{staticClass:"hrpagin2"}),a("span",{staticClass:"h_lable"},[t._v("Nama Kegiatan")]),a("q-input",{staticClass:"bg-white margin_btn",attrs:{outlined:"",square:"",dense:""},model:{value:t.form.nama_kegiatan,callback:function(a){t.$set(t.form,"nama_kegiatan",a)},expression:"form.nama_kegiatan"}}),a("span",{staticClass:"h_lable"},[t._v("Foto Kegiatan")]),a("q-file",{staticClass:"bg-white margin_btn",attrs:{label:"Pilih Poster",outlined:"",square:"",dense:""},model:{value:t.form.file_name,callback:function(a){t.$set(t.form,"file_name",a)},expression:"form.file_name"}}),a("hr",{staticClass:"hrpagin2"})],1),a("q-card-actions",{staticClass:"bg-grey-4 mdl-footer",attrs:{align:"right"}},[a("q-btn",{attrs:{loading:t.btn_add,color:"primary",type:"submit",label:"Simpan"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Batal",color:"negative"}})],1)],1)],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.mdl_edit,callback:function(a){t.mdl_edit=a},expression:"mdl_edit"}},[a("q-card",{staticClass:"mdl-md"},[a("q-card-section",{staticClass:"main2 text-white"},[a("div",{staticClass:"text-h6 h_modalhead"},[t._v("Edit Foto")])]),a("form",{on:{submit:function(a){return a.preventDefault(),t.updateData()}}},[a("q-card-section",{staticClass:"q-pt-none"},[a("hr",{staticClass:"hrpagin2"}),a("span",{staticClass:"h_lable"},[t._v("Nama Kegiatan")]),a("q-input",{staticClass:"bg-white margin_btn",attrs:{outlined:"",square:"",dense:""},model:{value:t.form.nama_kegiatan,callback:function(a){t.$set(t.form,"nama_kegiatan",a)},expression:"form.nama_kegiatan"}}),a("span",{staticClass:"h_lable"},[t._v("Foto Kegiatan")]),a("q-file",{staticClass:"bg-white margin_btn",attrs:{label:"Pilih Poster",outlined:"",square:"",dense:""},model:{value:t.form.file_name,callback:function(a){t.$set(t.form,"file_name",a)},expression:"form.file_name"}}),t.form.file_name&&!t.fileBaru?a("div",{staticClass:"q-mt-sm"},[a("q-img",{staticStyle:{"max-width":"150px","border-radius":"6px"},attrs:{src:t.file_path+t.form.file_name}}),a("div",{staticClass:"text-caption text-grey"},[t._v("Foto lama")])],1):t._e(),a("hr",{staticClass:"hrpagin2"})],1),a("q-card-actions",{staticClass:"bg-grey-4 mdl-footer",attrs:{align:"right"}},[a("q-btn",{attrs:{loading:t.btn_edit,color:"primary",type:"submit",label:"Update"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Batal",color:"negative"}})],1)],1)],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.mdl_delete,callback:function(a){t.mdl_delete=a},expression:"mdl_delete"}},[a("q-card",{staticClass:"mdl-sm"},[a("q-card-section",{staticClass:"q-pt-none text-center orageGrad"},[a("form",{on:{submit:function(a){return a.preventDefault(),t.removeData.apply(null,arguments)}}},[a("br"),a("img",{attrs:{src:"img/alert.png",alt:"",width:"75"}}),t._v(" "),a("br"),a("span",{staticClass:"h_notifikasi"},[t._v("APAKAH ANDA YAKIN INGIN MENGHAPUS DATA INI??")]),a("input",{staticStyle:{position:"absolute",left:"-9999px"},attrs:{type:"submit"}}),a("br"),a("br"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Batal",size:"sm",color:"negative"}}),t._v("   "),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{type:"submit",label:"Hapus",size:"sm",color:"primary"}})],1)])],1)],1),a("q-dialog",{model:{value:t.mdl_image,callback:function(a){t.mdl_image=a},expression:"mdl_image"}},[a("q-card",{staticClass:"bg-purple mdl-lg"},[a("q-card-section",{staticClass:"text-center"},[a("q-img",{staticStyle:{"max-width":"90vw","max-height":"90vh","border-radius":"10px"},attrs:{src:t.selectedImage,fit:"contain"}})],1),a("q-card-actions",{attrs:{align:"center"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Tutup",color:"white"}})],1)],1)],1)],1)},i=[function(){var t=this,a=t._self._c;return a("tr",{staticClass:"h_table_head main1 text-white"},[a("th",{staticClass:"text-center",attrs:{width:"5%"}},[t._v("No")]),a("th",{attrs:{width:"15%"}},[t._v("Foto")]),a("th",{attrs:{width:"50%"}},[t._v("Nama Kegiatan")]),a("th",{attrs:{width:"15%"}},[t._v("Tanggal")]),a("th",{staticClass:"text-center",attrs:{width:"15%"}},[t._v("Act")])])}],n=e("7daa"),o=e.n(n),l={data(){return{list_data:[],form:{nama_kegiatan:"",file_name:null},UMUM:o.a,btn_add:!1,btn_edit:!1,mdl_add:!1,mdl_edit:!1,mdl_delete:!1,mdl_image:!1,selectedImage:null,cari_value:"",page_first:1,page_last:1,page_limit:9,total:0,tipe:null,file_path:this.$store.state.url.URL_APP+"uploads/"}},methods:{openEdit(t){this.form={id:t.id||null,nama_kegiatan:t.nama_kegiatan||"",file_name:t.file_name||null},this.fileBaru=null,this.mdl_edit=!0},openDelete(t){this.form={id:t.id},this.mdl_delete=!0},openImage(t){this.selectedImage=t,this.mdl_image=!0},resetForm(){this.form={id:null,nama_kegiatan:"",file_name:null},this.fileBaru=null},async getView(){try{this.$store.commit("shoWLoading");const t=await fetch(this.$store.state.url.FOTO+"getview",{method:"POST",headers:{"content-type":"application/json",authorization:"kikensbatara "+localStorage.token},body:JSON.stringify({data_ke:this.page_first,cari_value:this.cari_value,page_limit:this.page_limit})}),a=await t.json();this.list_data=a.data||[],this.total=a.total||0,this.page_last=Math.ceil(this.total/this.page_limit)||1,this.$store.commit("hideLoading")}catch(t){console.error("❌ Error getView foto Donor:",t),this.$store.commit("hideLoading")}},addData(){this.btn_add=!0;const t=new FormData;t.append("nama_kegiatan",this.form.nama_kegiatan),this.form.file_name&&t.append("file_name",this.form.file_name),fetch(this.$store.state.url.FOTO+"addData",{method:"POST",headers:{authorization:"kikensbatara "+localStorage.token},body:t}).then(t=>t.json()).then(t=>{this.btn_add=!1,t.success?(this.$q.notify({type:"positive",message:t.message||"Sukses menambah foto"}),this.getView(),this.mdl_add=!1,this.resetForm()):this.$q.notify({type:"negative",message:t.message||"Gagal menambah foto"})}).catch(t=>{this.btn_add=!1,console.error("❌ Error addData Foto:",t),this.$q.notify({type:"negative",message:"Terjadi kesalahan server"})})},async updateData(){try{this.btn_edit=!0;const t=new FormData;t.append("id",this.form.id),t.append("nama_kegiatan",this.form.nama_kegiatan),t.append("tanggal_mulai",this.form.tanggal_mulai),t.append("tanggal_selesai",this.form.tanggal_selesai),t.append("jam",this.form.jam),t.append("lokasi",this.form.lokasi),t.append("map_link",this.form.map_link||""),t.append("keterangan",this.form.keterangan||""),t.append("jumlah_terdaftar",null!=this.form.jumlah_terdaftar?this.form.jumlah_terdaftar:""),t.append("status","object"===typeof this.form.status?this.form.status.value:this.form.status),this.fileBaru?t.append("file_name",this.fileBaru):t.append("file_name",this.form.file_name||"");const a=await fetch(this.$store.state.url.FOTO+"editData",{method:"POST",headers:{authorization:"kikensbatara "+localStorage.token},body:t}),e=await a.json();this.btn_edit=!1,e.success?(this.$q.notify({type:"positive",message:e.message||"Sukses update foto"}),this.mdl_edit=!1,this.getView()):this.$q.notify({type:"negative",message:e.message||"Gagal update foto"})}catch(t){this.btn_edit=!1,console.error("❌ Error updateData foto Donor:",t),this.$q.notify({type:"negative",message:"Gagal update data"})}},removeData(){fetch(this.$store.state.url.FOTO+"removeData",{method:"POST",headers:{"content-type":"application/json",authorization:"kikensbatara "+localStorage.token},body:JSON.stringify({id:this.form.id})}).then(t=>t.json()).then(t=>{t.success?(this.$q.notify({type:"positive",message:t.message||"Sukses menghapus foto"}),this.getView()):this.$q.notify({type:"negative",message:t.message||"Data tidak ditemukan"})}).catch(t=>{console.error("❌ Error removeData foto Donor:",t),this.$q.notify({type:"negative",message:"Terjadi kesalahan server"})})},cari_data(){this.page_first=1,this.getView()},indexing(t){return(this.page_first-1)*this.page_limit+t}},mounted(){this.getView()}},r=l,d=e("2877"),c=e("fe09"),m=Object(d["a"])(r,s,i,!1,null,null,null);a["default"]=m.exports;m.options.components=Object.assign(Object.create(m.options.components||null),m.options.components||{},{QCard:c["h"],QCardSection:c["j"],QInput:c["w"],QBtn:c["f"],QTooltip:c["O"],QIcon:c["u"],QPagination:c["G"],QDialog:c["l"],QFile:c["r"],QCardActions:c["i"],QImg:c["v"]}),m.options.directives=Object.assign(Object.create(m.options.directives||null),m.options.directives||{},{ClosePopup:c["a"]})}}]);
//# sourceMappingURL=chunk-2d0c7b11.f9791704.js.map