{"version":3,"sources":["webpack:///./src/views/darah/stok_darah.vue","webpack:///./src/views/darah/stok_darah.vue?65e3","webpack:///./src/views/darah/stok_darah.vue?8bd1","webpack:///./src/views/darah/stok_darah.vue?a595"],"names":["render","_vm","_c","_self","staticClass","staticStyle","attrs","_v","_l","cols","col","key","_s","matrix","row","idx","Komponen","formatNumber","Total","length","_e","groupTotals","A","B","O","AB","staticRenderFns","data","lastSync","loading","computed","totals","Array","isArray","this","forEach","aPlus","Number","aMin","bPlus","bMin","oPlus","oMin","abPlus","abMin","rowTotal","methods","fetchMatrix","$store","commit","query","URLSearchParams","page","limit","sort_by","sort_dir","toString","url","state","STOK","fetch","method","headers","authorization","localStorage","token","then","res","json","res_data","console","log","rows","map","r","gol","golongan_darah","trim","toUpperCase","rhes","rhesus","komponen","nama_komponen","komponen_id","colKey","c","jumlah","jumlah_stok","includes","Object","values","sort","a","b","Date","catch","err","error","finally","n","v","isNaN","toLocaleString","formatDate","dt","d","year","month","day","hour","minute","mounted","component","options","components","assign","create","QCard","QCardSection","QSeparator"],"mappings":"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","file":"js/chunk-6264fe3e.e6b55262.js","sourcesContent":["\nexport default {\n    data() {\n        return {\n            cols: ['A+', 'A-', 'B+', 'B-', 'O+', 'O-', 'AB+', 'AB-'],\n            matrix: [],\n            lastSync: null,\n            loading: false\n        }\n    },\n\n    computed: {\n        // Hitung total gabungan per golongan (A, B, O, AB) dan grand total\n        groupTotals() {\n            const totals = { A: 0, B: 0, O: 0, AB: 0, Total: 0 }\n\n            // pastikan matrix terisi\n            if (!Array.isArray(this.matrix)) return totals\n\n            this.matrix.forEach(row => {\n                // ambil nilai tiap rhesus (bisa 0 atau undefined)\n                const aPlus = Number(row['A+'] || 0)\n                const aMin = Number(row['A-'] || 0)\n                const bPlus = Number(row['B+'] || 0)\n                const bMin = Number(row['B-'] || 0)\n                const oPlus = Number(row['O+'] || 0)\n                const oMin = Number(row['O-'] || 0)\n                const abPlus = Number(row['AB+'] || 0)\n                const abMin = Number(row['AB-'] || 0)\n                const rowTotal = Number(row['Total'] || 0)\n\n                totals.A += aPlus + aMin\n                totals.B += bPlus + bMin\n                totals.O += oPlus + oMin\n                totals.AB += abPlus + abMin\n                totals.Total += rowTotal\n            })\n\n            return totals\n        }\n    },\n\n\n    methods: {\n        // === AMBIL DATA DARI BACKEND ===\n        fetchMatrix: function () {\n            this.loading = true\n            this.$store.commit(\"shoWLoading\")\n\n            // Buat parameter query\n            const query = new URLSearchParams({\n                page: 1,\n                limit: 10000,\n                sort_by: \"s.jumlah_stok\",\n                sort_dir: \"DESC\"\n            }).toString()\n\n            const url = this.$store.state.url.STOK + \"view?\" + query\n\n            fetch(url, {\n                method: \"GET\",\n                headers: {\n                    \"content-type\": \"application/json\",\n                    authorization: \"kikensbatara \" + localStorage.token\n                }\n            })\n                .then(res => res.json())\n                .then(res_data => {\n                    console.log(\"stok_darah view:\", res_data)\n                    const rows = Array.isArray(res_data.data)\n                        ? res_data.data\n                        : (res_data.rows || [])\n\n                    const map = {}\n\n                    rows.forEach(r => {\n                        const gol = (r.golongan_darah || '').toString().trim().toUpperCase()\n                        const rhes = (r.rhesus || '').toString().trim()\n                        const komponen = r.nama_komponen || `Komponen ${r.komponen_id}`\n                        const colKey = `${gol}${rhes}`\n\n                        if (!map[komponen]) {\n                            map[komponen] = { Komponen: komponen, Total: 0 }\n                            this.cols.forEach(c => { map[komponen][c] = 0 })\n                        }\n\n                        const jumlah = Number(r.jumlah_stok || 0)\n                        if (this.cols.includes(colKey)) map[komponen][colKey] += jumlah\n                        map[komponen].Total += jumlah\n                    })\n\n                    this.matrix = Object.values(map).sort((a, b) => b.Total - a.Total)\n                    this.lastSync = new Date()\n                })\n                .catch(err => {\n                    console.error(\"fetchMatrix error\", err)\n                    this.matrix = []\n                })\n                .finally(() => {\n                    this.loading = false\n                    this.$store.commit(\"hideLoading\")\n                })\n        }\n        ,\n\n        // === FORMAT ANGKA ===\n        formatNumber(n) {\n            const v = Number(n)\n            return isNaN(v) ? (n ?? '-') : v.toLocaleString('id-ID')\n        },\n\n        // === FORMAT TANGGAL ===\n        formatDate(dt) {\n            if (!dt) return '-'\n            const d = new Date(dt)\n            if (isNaN(d)) return dt\n            return d.toLocaleString('id-ID', {\n                year: 'numeric',\n                month: 'short',\n                day: 'numeric',\n                hour: '2-digit',\n                minute: '2-digit'\n            })\n        }\n    },\n\n    mounted() {\n        this.fetchMatrix()\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stok_darah.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stok_darah.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./stok_darah.vue?vue&type=template&id=5818af4d&scoped=true&\"\nimport script from \"./stok_darah.vue?vue&type=script&lang=js&\"\nexport * from \"./stok_darah.vue?vue&type=script&lang=js&\"\nimport style0 from \"./stok_darah.vue?vue&type=style&index=0&id=5818af4d&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5818af4d\",\n  null\n  \n)\n\nexport default component.exports\nimport {QCard,QCardSection,QSeparator} from 'quasar'\ncomponent.options.components = Object.assign(Object.create(component.options.components || null), component.options.components || {}, {QCard,QCardSection,QSeparator})\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stok_darah.vue?vue&type=style&index=0&id=5818af4d&prod&scoped=true&lang=css&\""],"sourceRoot":""}