(function(t){function e(e){for(var n,o,s=e[0],l=e[1],c=e[2],d=0,u=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&u.push(i[o][0]),i[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);h&&h(e);while(u.length)u.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,o=1;o<a.length;o++){var s=a[o];0!==i[s]&&(n=!1)}n&&(r.splice(e--,1),t=l(l.s=a[0]))}return t}var n={},o={app:0},i={app:0},r=[];function s(t){return l.p+"js/"+({}[t]||t)+"."+{"chunk-0c3efc18":"a8d23366","chunk-2d0aeccd":"069ff9dd","chunk-2d0b725c":"a234b82d","chunk-5a2994c4":"53ac2a98","chunk-2d0a3553":"8335b4bc","chunk-1d9e66cc":"ceec9fbf","chunk-2533a6f9":"d16849d5","chunk-2d0aad45":"c544dcb8","chunk-2d0b5fb1":"6dd84079","chunk-2d0b648e":"df005968","chunk-2d0b9d35":"c7340a1d","chunk-2d0bae4a":"232e0e74","chunk-2d0c7b11":"f9791704","chunk-2d0de55e":"b1bb8e9d","chunk-2d22937e":"31ddb7f4","chunk-2d22d746":"c21b6c09","chunk-11c89b56":"2fa97698","chunk-6264fe3e":"e6b55262","chunk-6e5a474c":"a5ef0ce6"}[t]+".js"}function l(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(t){var e=[],a={"chunk-0c3efc18":1,"chunk-1d9e66cc":1,"chunk-2533a6f9":1,"chunk-6264fe3e":1,"chunk-6e5a474c":1};o[t]?e.push(o[t]):0!==o[t]&&a[t]&&e.push(o[t]=new Promise((function(e,a){for(var n="css/"+({}[t]||t)+"."+{"chunk-0c3efc18":"dad4fc4e","chunk-2d0aeccd":"31d6cfe0","chunk-2d0b725c":"31d6cfe0","chunk-5a2994c4":"31d6cfe0","chunk-2d0a3553":"31d6cfe0","chunk-1d9e66cc":"bc0e80af","chunk-2533a6f9":"313df255","chunk-2d0aad45":"31d6cfe0","chunk-2d0b5fb1":"31d6cfe0","chunk-2d0b648e":"31d6cfe0","chunk-2d0b9d35":"31d6cfe0","chunk-2d0bae4a":"31d6cfe0","chunk-2d0c7b11":"31d6cfe0","chunk-2d0de55e":"31d6cfe0","chunk-2d22937e":"31d6cfe0","chunk-2d22d746":"31d6cfe0","chunk-11c89b56":"31d6cfe0","chunk-6264fe3e":"7cc37d0b","chunk-6e5a474c":"a926ea96"}[t]+".css",i=l.p+n,r=document.getElementsByTagName("link"),s=0;s<r.length;s++){var c=r[s],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===n||d===i))return e()}var u=document.getElementsByTagName("style");for(s=0;s<u.length;s++){c=u[s],d=c.getAttribute("data-href");if(d===n||d===i)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var n=e&&e.target&&e.target.src||i,r=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=n,delete o[t],h.parentNode.removeChild(h),a(r)},h.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(h)})).then((function(){o[t]=0})));var n=i[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise((function(e,a){n=i[t]=[e,a]}));e.push(n[2]=r);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=s(t);var u=new Error;c=function(e){d.onerror=d.onload=null,clearTimeout(h);var a=i[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",u.name="ChunkLoadError",u.type=n,u.request=o,a[1](u)}i[t]=void 0}};var h=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(e)},l.m=t,l.c=n,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)l.d(a,n,function(e){return t[e]}.bind(null,n));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="",l.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var h=d;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0e21":function(t,e,a){},1:function(t,e){},"1e47":function(t,e,a){"use strict";a("ae97")},4360:function(t,e,a){"use strict";a.r(e);var n=a("2b0e"),o=a("2f62"),i=a("f508"),r=a("e669"),s=a("2a19");n["default"].use(o["a"]);var l="https://server-pindara.bludrs-konut.id/";e["default"]=new o["a"].Store({state:{coordinat:{lat:-4.034694,lng:122.484263},btn:{add:!1,edit:!1,remove:!1},url:{URL_APP:l,URL_simpeg_biodata:l+"api/v1/dm_biodata/",URL_simpeg_unit_kerja:l+"api/v1/dm_unitKerja/",URL_simpeg_instansi:l+"api/v1/dm_instansi/",URL_DM_REGISTER:l+"api/v1/dm_registrasi/",URL_DM_MENU:l+"api/v1/dm_menuList/",URL_DM_KLP_USERS:l+"api/v1/dm_kelompokUsers/",checkAuth:l+"api/v1/checkAuth/",DASHBOARD:l+"api/v1/dashboard/",BERITA:l+"api/v1/berita/",STOK:l+"api/v1/stok_darah/",REGIS_MEDIS:l+"api/v1/reg_tenagamedis/",REGIS_DONOR:l+"api/v1/reg_pendonor/",REGIS_MASYARAKAT:l+"api/v1/reg_masyarakat/",REGIS_ADMIN_BDRS:l+"api/v1/reg_admin/",KOMPONEN:l+"api/v1/komponen/",PERMINTAAN:l+"api/v1/permintaan_darah/",TRANSAKSI:l+"api/v1/transaksi_darah/",REAKSI_TRANSFUSI:l+"api/v1/reaksi_transfusi/",JADWAL_DONOR:l+"api/v1/jadwal_donor/",FOTO:l+"api/v1/foto/"},list_contoh_autocomplete:[],list_unit_kerja:[],list_instansi:[],list_menu:null,aksesMenu:{},page_first:1,page_last:0,cari_value:"",cek_load_data:!0,type:[{id:0,uraian:"Single Menu"},{id:1,uraian:"Multy Menu"}]},mutations:{listJeniskategorilokasi(t){fetch(t.url.URL_MasterKategoriLokasi,{method:"GET",headers:{"content-type":"application/json",authorization:"kikensbatara "+localStorage.token}}).then(t=>t.json()).then(e=>{t.list_MasterKategoriLokasi=e})},listApelJenis(t){fetch(t.url.URL_apelJenis,{method:"GET",headers:{"content-type":"application/json",authorization:"kikensbatara "+localStorage.token}}).then(t=>t.json()).then(e=>{t.list_ApleJenis=e})},getStorage(t){var e=JSON.parse(localStorage.profile);t.unit_kerja=e.profile.unit_kerja},shoWLoading(){const t="undefined"!==typeof r["a"]?r["a"]:Quasar.components.QSpinnerFacebook;i["a"].show({spinner:t,spinnerColor:"red",spinnerSize:140,backgroundColor:"grey"})},hideLoading(){i["a"].hide()},shoWNotify(t,e,a,n){s["a"].create({message:e,color:a,position:"top-right",icon:n})}},actions:{},modules:{}})},"56d7":function(t,e,a){"use strict";a.r(e);var n=a("2b0e"),o=function(){var t=this,e=t._self._c;return e("q-layout",{attrs:{view:"lHh Lpr lFf"}},[t.checkLogin?t._e():e("q-header",{staticClass:"glossy main1",attrs:{elevated:""}},[e("q-toolbar",[e("q-btn",{attrs:{flat:"",dense:"",round:"","aria-label":"Menu",icon:"menu"},on:{click:function(e){t.leftDrawerOpen=!t.leftDrawerOpen}}}),e("q-toolbar-title",[t._v(" PINDARA - BLUD RS Konawe Utara ")]),e("div",[e("q-btn",{staticStyle:{color:"white"},attrs:{flat:"",color:"white",icon:t.$q.fullscreen.isActive?"fullscreen_exit":"fullscreen"},on:{click:function(e){return t.$q.fullscreen.toggle()}}}),e("q-btn",{attrs:{dense:"",round:"",color:t.audioUnlocked?"green-6":"grey-6",icon:t.audioUnlocked?"notifications_active":"notifications_off"},on:{click:t.unlockAudio}})],1)],1)],1),t.checkLogin?t._e():e("q-drawer",{attrs:{"show-if-above":"","content-class":"bg-grey-2 shadow-up-4"},model:{value:t.leftDrawerOpen,callback:function(e){t.leftDrawerOpen=e},expression:"leftDrawerOpen"}},[e("SideBar")],1),e("q-page-container",{staticClass:"bg-grey-2"},[e("router-view")],1),e("audio",{ref:"notifSound",attrs:{src:"/sound/notif.mp3"}})],1)},i=[],r=function(){var t=this,e=t._self._c;return e("q-page",{staticClass:"flex flex-center"},[e("img",{attrs:{alt:"Quasar logo",src:a("cf05")}})])},s=[],l={name:"HelloWorld"},c=l,d=a("2877"),u=a("fe09"),h=Object(d["a"])(c,r,s,!1,null,null,null),p=h.exports;h.options.components=Object.assign(Object.create(h.options.components||null),h.options.components||{},{QPage:u["E"]});var m=a("8055"),g=a.n(m),f={name:"LayoutDefault",components:{HelloWorld:p},data(){return{leftDrawerOpen:!1,text:"",dense:!0,notifUnread:0,isMuted:!1,socket:null,audioUnlocked:!1}},methods:{unlockAudio(){if(this.audioUnlocked)return;const t=this.$refs.notifSound;t&&(t.volume=0,t.play().then(()=>{t.pause(),t.currentTime=0,t.volume=1,this.audioUnlocked=!0,localStorage.setItem("audioUnlocked","1"),this.$q.notify({type:"positive",message:"Notifikasi suara aktif"})}).catch(()=>{}))},playNotifSound(){if(!this.audioUnlocked)return;const t=this.$refs.notifSound;t&&(t.currentTime=0,t.play().catch(()=>{}))}},computed:{checkLogin(){return"login"===this.$route.name}},mounted(){var t,e=JSON.parse(localStorage.profile);this.$store.state.unit_kerja=e.profile.unit_kerja,this.$store.state.unit_kerja_nama=e.profile.unit_kerja_nama;const a=Number(null===e||void 0===e||null===(t=e.profile)||void 0===t?void 0:t.stokdarah_konut),n=1===a||2===a?"admin_upd":3===a?"admin_ruangan":null;n&&(this.socket=g()("https://server-pindara.bludrs-konut.id/",{transports:["websocket","polling"],query:{token:localStorage.token}}),this.socket.on("connect",()=>{console.log("âœ… SOCKET CONNECTED:",this.socket.id),3===a&&e.profile.ruangan_id&&(this.socket.emit("join_room","ruangan:"+e.profile.ruangan_id),console.log("ðŸ”” JOIN ROOM: ruangan:",e.profile.ruangan_id))}),this.socket.on("permintaan_status_update",t=>{console.log("ðŸ”” NOTIF DITERIMA:",t),this.notifUnread++,this.audioUnlocked?this.playNotifSound():this.$q.notify({type:"warning",message:"Klik ikon lonceng untuk mengaktifkan suara notifikasi",position:"top-right",timeout:3e3}),this.$root.$emit("permintaan-updated",t),this.$q.notify({type:"info",message:t.pesan,position:"top-right",timeout:2500})}),this.audioUnlocked=!1,localStorage.removeItem("audioUnlocked"),console.log("TOKEN FRONTEND:",localStorage.getItem("token")))}},b=f,k=Object(d["a"])(b,o,i,!1,null,null,null),_=k.exports;k.options.components=Object.assign(Object.create(k.options.components||null),k.options.components||{},{QLayout:u["A"],QHeader:u["t"],QToolbar:u["M"],QBtn:u["f"],QToolbarTitle:u["N"],QDrawer:u["m"],QPageContainer:u["F"]});var v=a("9483");Object(v["a"])("service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var S=a("8c4f"),y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"about",staticStyle:{padding:"15px"}},[e("q-card",{staticClass:"my-card",attrs:{bordered:""}},[e("q-card-section",{staticClass:"main2 text-white"},[e("div",{staticClass:"row items-start justify-between"},[e("div",[e("div",{staticClass:"text-h6 h_titleHead"},[t._v("HOME")]),e("div",{staticClass:"text-h8"},[t._v("DASHBOARD PINDARA")])])])]),e("q-separator",{attrs:{dark:"",inset:""}}),e("q-card-section",{staticClass:"biruSangatmudaGrad"},[e("div",{staticClass:"row q-col-gutter-md items-start"},[e("div",{staticClass:"col-12 col-md-12 column"},[e("div",{staticClass:"row q-col-gutter-md"},[e("div",{staticClass:"col-12 col-md-5th"},[e("div",{staticClass:"row shadow-3 frWidgetSub",staticStyle:{"min-height":"80px"}},[e("div",{staticClass:"col-4 frWidgetSub1 text-center main1 row items-center justify-center"},[e("q-icon",{attrs:{name:"view_list",size:"28px",color:"white"}})],1),e("div",{staticClass:"col-8 frWidgetSub2 main1x"},[e("span",{staticClass:"frWidgetText1"},[t._v("Permintaan Darah")]),e("br"),e("span",{staticClass:"frWidgetText2"},[t._v(t._s(t.widgetStatus.total_permintaan||0))])])])]),e("div",{staticClass:"col-12 col-md-5th"},[e("div",{staticClass:"row shadow-3 frWidgetSub",staticStyle:{"min-height":"80px"}},[e("div",{staticClass:"col-4 frWidgetSub1 text-center widgetdashboardCSR row items-center justify-center"},[e("q-icon",{attrs:{name:"fiber_new",size:"28px",color:"white"}})],1),e("div",{staticClass:"col-8 frWidgetSub2 widgetdashboardCSRNilai"},[e("span",{staticClass:"frWidgetText1"},[t._v("Permintaan Baru")]),e("br"),e("span",{staticClass:"frWidgetText2"},[t._v(t._s(t.widgetStatus.permintaan_baru||0))])])])]),e("div",{staticClass:"col-12 col-md-5th"},[e("div",{staticClass:"row shadow-3 frWidgetSub",staticStyle:{"min-height":"80px"}},[e("div",{staticClass:"col-4 frWidgetSub1 text-center widgetdashboardProsesIcon row items-center justify-center"},[e("q-icon",{attrs:{name:"block_flipped",size:"28px",color:"white"}})],1),e("div",{staticClass:"col-8 frWidgetSub2 widgetdashboardProsesNilai"},[e("span",{staticClass:"frWidgetText1"},[t._v("Ditolak")]),e("br"),e("span",{staticClass:"frWidgetText2"},[t._v(t._s(t.widgetStatus.ditolak||0))])])])]),e("div",{staticClass:"col-12 col-md-5th"},[e("div",{staticClass:"row shadow-3 frWidgetSub",staticStyle:{"min-height":"80px"}},[e("div",{staticClass:"col-4 frWidgetSub1 text-center widgetdashboardSebagian row items-center justify-center"},[e("q-icon",{attrs:{name:"volunteer_activism",size:"28px",color:"white"}})],1),e("div",{staticClass:"col-8 frWidgetSub2 widgetdashboardSebagianNilai"},[e("span",{staticClass:"frWidgetText1"},[t._v("Darah Siap diambil")]),e("br"),e("span",{staticClass:"frWidgetText2"},[t._v(t._s(t.widgetStatus.siap_ambil||0))])])])]),e("div",{staticClass:"col-12 col-md-5th"},[e("div",{staticClass:"row shadow-3 frWidgetSub",staticStyle:{"min-height":"80px"}},[e("div",{staticClass:"col-4 frWidgetSub1 text-center widgetdashboardTerimaIcon row items-center justify-center"},[e("q-icon",{attrs:{name:"check_circle_outline",size:"28px",color:"white"}})],1),e("div",{staticClass:"col-8 frWidgetSub2 widgetdashboardTerimaNilai"},[e("span",{staticClass:"frWidgetText1"},[t._v("Selesai")]),e("br"),e("span",{staticClass:"frWidgetText2"},[t._v(t._s(t.widgetStatus.selesai||0))])])])])])])]),e("hr",{staticClass:"hrpagin2"}),e("div",{staticClass:"row q-col-gutter-md q-mt-md"},[e("div",{staticClass:"col-12 col-md-6"},[e("div",{staticClass:"frameChart shadow-5"},[e("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"chartPie"}})])]),e("div",{staticClass:"col-12 col-md-6"},[e("div",{staticClass:"frameChart shadow-5 q-pa-md"},[e("div",{staticClass:"row items-center q-mb-sm"},[e("div",{staticClass:"col-12 col-md-6"},[e("q-select",{attrs:{dense:"",outlined:"",label:"Tahun",options:t.yearOptions},model:{value:t.selectedYear,callback:function(e){t.selectedYear=e},expression:"selectedYear"}})],1)]),e("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"chartByPermintaanDarah"}})])]),e("div",{staticClass:"col-12 col-md-6"},[e("div",{staticClass:"col-12 col-md-6"},[e("div",{staticClass:"frameChart shadow-5 q-pa-md"},[e("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"chartPendonorGender"}})])])]),e("div",{staticClass:"col-12 col-md-6"},[e("div",{staticClass:"frameChart shadow-5 q-pa-md"},[e("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"chartPermintaanRuangan"}})])]),e("div",{staticClass:"col-12 col-md-6"},[e("div",{staticClass:"frameChart shadow-5 q-pa-md"},[e("div",{staticClass:"text-h6 q-mb-md text-center"},[t._v("Jumlah Partisipasi Pendonor Darah")]),e("table",{staticStyle:{width:"100%","border-collapse":"collapse"}},[e("thead",[e("tr",{staticStyle:{"background-color":"#F87C7C"}},[e("th",{staticStyle:{"text-align":"left",padding:"8px",color:"aliceblue"},attrs:{width:"80%"}},[t._v("Jenis Kelamin")]),e("th",{staticStyle:{"text-align":"right",padding:"8px",color:"aliceblue"},attrs:{width:"20%"}},[t._v("Jumlah Pendonor")])])]),e("tbody",t._l(t.listJk,(function(a){return e("tr",{key:a.jk_pendonor,style:{backgroundColor:t.listJk.indexOf(a)%2===0?"#f9f9f9":"white"}},[e("td",{staticStyle:{padding:"8px"},attrs:{width:"80%"}},[t._v(t._s(a.jk_pendonor))]),e("td",{staticStyle:{padding:"8px","text-align":"right"},attrs:{width:"20%"}},[t._v(t._s(a.jumlah))])])})),0)])])]),e("div",{staticClass:"col-12 col-md-6"},[e("div",{staticClass:"frameChart shadow-5 q-pa-md text-center"},[e("div",{staticClass:"text-h6 q-mb-md"},[t._v(" Jumlah Permintaan Darah dari Ruangan BLUD RS ")]),e("div",{staticStyle:{"max-height":"150px","overflow-y":"auto"}},[e("table",{staticStyle:{width:"100%","border-collapse":"collapse"}},[e("thead",[e("tr",{staticStyle:{"background-color":"#F87C7C"}},[e("th",{staticStyle:{"text-align":"left",padding:"8px",color:"aliceblue"},attrs:{width:"70%"}},[t._v("Nama Ruangan")]),e("th",{staticStyle:{"text-align":"right",padding:"8px",color:"aliceblue"},attrs:{width:"30%"}},[t._v("Jumlah Permintaan Darah ")])])]),e("tbody",t._l(t.listBidangUsaha,(function(a){return e("tr",{key:a.bidang_id,style:{backgroundColor:t.listBidangUsaha.indexOf(a)%2===0?"#f9f9f9":"white"}},[e("td",{staticStyle:{padding:"8px"}},[t._v(t._s(a.nama_bidang))]),e("td",{staticStyle:{padding:"8px","text-align":"right"}},[t._v(t._s(a.jumlah))])])})),0)])])])])])]),e("q-card-section",{staticClass:"biruSangatmudaGrad"})],1)],1)},w=[],x={data(){return{notifUnread:0,socket:null,selectedYear:(new Date).getFullYear(),yearOptions:[2025,2026,2027,2028],chartGolonganData:[],tipe:null,widgetStatus:{total_kegiatan:0,permintaan_baru:0,ditolak:0,siap_ambil:0,selesai:0},listJk:[],listBidangUsaha:[]}},methods:{async loadWidgetDashboard(){try{var t,e;const a=JSON.parse(localStorage.profile),n=Number(null===(t=a.profile)||void 0===t?void 0:t.stokdarah_konut),o=null===(e=a.profile)||void 0===e?void 0:e.ruangan_id;let i="statusDashboard?stokdarah_konut="+n;3===n&&o&&(i+="&ruangan_id="+o);const r=await fetch(this.$store.state.url.DASHBOARD+i,{headers:{authorization:"kikensbatara "+localStorage.token}}),s=await r.json();s.data&&(this.widgetStatus=s.data),this.$nextTick(()=>{this.chartPie()})}catch(a){console.error("Gagal load dashboard:",a)}},chartPie(){Highcharts.chart("chartPie",{chart:{type:"pie",backgroundColor:"transparent"},title:{text:"Status Permintaan Darah"},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},series:[{name:"Jumlah",colorByPoint:!0,data:[{name:"Permintaan Baru",y:this.widgetStatus.permintaan_baru,color:"#1e88e5"},{name:"Ditolak",y:this.widgetStatus.ditolak,color:"#ffb300"},{name:"Darah Siap Ambil",y:this.widgetStatus.siap_ambil,color:"#f57c00"},{name:"Selesai",y:this.widgetStatus.selesai,color:"#43a047"}]}]})},renderChartGolongan(){const t=["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"],e=()=>Array(12).fill(0),a={A:e(),B:e(),AB:e(),O:e()};this.chartGolonganData.forEach(t=>{const e=t.bulan-1;a[t.golongan_darah]&&(a[t.golongan_darah][e]=t.jumlah)}),Highcharts.chart("chartByPermintaanDarah",{chart:{type:"line",backgroundColor:"transparent"},title:{text:"Permintaan Darah Terpakai Tahun "+this.selectedYear},subtitle:{text:"Berdasarkan golongan darah"},xAxis:{categories:t},yAxis:{title:{text:"Jumlah Permintaan"},allowDecimals:!1},tooltip:{shared:!0,valueSuffix:" Kantong"},plotOptions:{line:{dataLabels:{enabled:!0}}},series:[{name:"Golongan A",data:a.A},{name:"Golongan B",data:a.B},{name:"Golongan AB",data:a.AB},{name:"Golongan O",data:a.O}]})},async loadPermintaanDarahByGolongan(){try{const t=await fetch(this.$store.state.url.DASHBOARD+"permintaanDarahByGolongan?year="+this.selectedYear,{headers:{authorization:"kikensbatara "+localStorage.token}}),e=await t.json();this.chartGolonganData=e.data||[],this.$nextTick(()=>{this.renderChartGolongan()})}catch(t){console.error("Gagal load permintaan darah:",t)}},async loadPendonorByGender(){try{const t=await fetch(this.$store.state.url.DASHBOARD+"pendonorByGender",{headers:{authorization:"kikensbatara "+localStorage.token}}),e=await t.json();this.renderPendonorGenderChart(e.data||[])}catch(t){console.error("Gagal load pendonor by gender:",t)}},renderPendonorGenderChart(t){Highcharts.chart("chartPendonorGender",{chart:{type:"pie",backgroundColor:"transparent"},title:{text:"Pendonor Berdasarkan Jenis Kelamin"},subtitle:{text:"Perempuan & Laki-laki"},tooltip:{pointFormat:"<b>{point.y}</b> pendonor ({point.percentage:.1f}%)"},plotOptions:{pie:{innerSize:"60%",allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b><br>{point.percentage:.1f} %"}}},series:[{name:"Jumlah Pendonor",colorByPoint:!0,data:t}]})},async loadPendonorGenderTable(){try{const t=await fetch(this.$store.state.url.DASHBOARD+"pendonorByGenderTable",{headers:{authorization:"kikensbatara "+localStorage.token}}),e=await t.json();this.listJk=e.data||[]}catch(t){console.error("Gagal load tabel pendonor:",t)}},async loadPermintaanByRuanganPie(){try{const t=await fetch(this.$store.state.url.DASHBOARD+"permintaanByRuanganPie",{headers:{authorization:"kikensbatara "+localStorage.token}}),e=await t.json();this.renderPermintaanRuanganPie(e.data||[])}catch(t){console.error("Gagal load pie ruangan:",t)}},renderPermintaanRuanganPie(t){Highcharts.chart("chartPermintaanRuangan",{chart:{type:"pie",backgroundColor:"transparent"},title:{text:"Permintaan Darah per Ruangan"},subtitle:{text:null},tooltip:{pointFormat:"<b>{point.y}</b> permintaan ({point.percentage:.1f}%)"},plotOptions:{pie:{innerSize:"60%",allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b><br>{point.percentage:.1f}%"}}},series:[{name:"Jumlah Permintaan",colorByPoint:!0,data:t}]})},async loadPermintaanByRuanganTable(){try{const t=await fetch(this.$store.state.url.DASHBOARD+"permintaanByRuanganTable",{headers:{authorization:"kikensbatara "+localStorage.token}}),e=await t.json();this.listBidangUsaha=e.data||[]}catch(t){console.error("Gagal load tabel ruangan:",t)}}},mounted(){const t=JSON.parse(localStorage.profile);this.tipe=Number(t.profile.db_csrkonsel),this.mitra={id:t._id,nama:t.profile.nama,username:t.username,email:t.email,telp:t.profile.telp,alamat:t.profile.alamat,pic:t.profile.pic,file_name:t.profile.file_name},this.loadWidgetDashboard(),this.loadPermintaanDarahByGolongan(),this.loadPendonorByGender(),this.loadPendonorGenderTable(),this.loadPermintaanByRuanganPie(),this.loadPermintaanByRuanganTable()},watch:{selectedYear(){this.loadPermintaanDarahByGolongan()}}},C=x,O=Object(d["a"])(C,y,w,!1,null,null,null),P=O.exports;function A(t,e,a){localStorage.token?a("/"):a()}function D(t,e,a){localStorage.token?a():a("/login")}O.options.components=Object.assign(Object.create(O.options.components||null),O.options.components||{},{QCard:u["h"],QCardSection:u["j"],QSeparator:u["I"],QIcon:u["u"],QSelect:u["H"]}),n["default"].use(S["a"]);const j=[{path:"/login",name:"login",component:()=>Promise.all([a.e("chunk-5a2994c4"),a.e("chunk-11c89b56")]).then(a.bind(null,"bd01")),beforeEnter:A},{path:"/",name:"Home",component:P,beforeEnter:D},{path:"/berita",name:"Berita",component:()=>a.e("chunk-2d0bae4a").then(a.bind(null,"38c2")),beforeEnter:D},{path:"/jadwal_donor",name:"Jadwal Donor",component:()=>a.e("chunk-2d0b648e").then(a.bind(null,"1d05")),beforeEnter:D},{path:"/stok_darah",name:"Stok Darah",component:()=>a.e("chunk-6264fe3e").then(a.bind(null,"4229")),beforeEnter:D},{path:"/permintaan_darah",name:"Permintaan Darah",component:()=>a.e("chunk-6e5a474c").then(a.bind(null,"b7ce")),beforeEnter:D},{path:"/reaksi_transfusi",name:"reaksi_transfusi",component:()=>a.e("chunk-1d9e66cc").then(a.bind(null,"8958")),beforeEnter:D},{path:"/transaksi_darah",name:"Transaksi Darah",component:()=>a.e("chunk-2533a6f9").then(a.bind(null,"c3fd")),beforeEnter:D},{path:"/menuList",name:"menuList",component:()=>Promise.all([a.e("chunk-0c3efc18"),a.e("chunk-2d0aeccd")]).then(a.bind(null,"0c37")),beforeEnter:D},{path:"/klpUsers",name:"klpUsers",component:()=>Promise.all([a.e("chunk-0c3efc18"),a.e("chunk-2d0b725c")]).then(a.bind(null,"1fd5")),beforeEnter:D},{path:"/registrasi",name:"registrasi",component:()=>Promise.all([a.e("chunk-0c3efc18"),a.e("chunk-5a2994c4"),a.e("chunk-2d0a3553")]).then(a.bind(null,"0272")),beforeEnter:D},{path:"/regisTenagaMedis",name:"regisTenagaMedis",component:()=>a.e("chunk-2d0b5fb1").then(a.bind(null,"1ae0")),beforeEnter:D},{path:"/regisPendonor",name:"regisPendonor",component:()=>a.e("chunk-2d0b9d35").then(a.bind(null,"3530")),beforeEnter:D},{path:"/regisMasy",name:"regisMasy",component:()=>a.e("chunk-2d0de55e").then(a.bind(null,"84e1")),beforeEnter:D},{path:"/regisAdmin",name:"regisAdmin",component:()=>a.e("chunk-2d22937e").then(a.bind(null,"dd08")),beforeEnter:D},{path:"/komponen",name:"Komponen Darah",component:()=>a.e("chunk-2d0aad45").then(a.bind(null,"134a")),beforeEnter:D},{path:"/foto",name:"foto",component:()=>a.e("chunk-2d0c7b11").then(a.bind(null,"5264")),beforeEnter:D},{path:"/about",name:"About",component:()=>a.e("chunk-2d22d746").then(a.bind(null,"f820")),beforeEnter:D}],q=new S["a"]({routes:j});var E=q,T=a("4360"),M=(a("0e21"),a("e54f"),a("b05d")),R=a("2a19"),B=a("b12a");n["default"].use(M["a"],{config:{},components:{},directives:{},plugins:[R["a"],B["a"]]});var L=a("6930"),N=a.n(L),I=a("ebfd"),U=a.n(I),G=a("755e"),J=function(){var t=this,e=t._self._c;return e("q-list",[e("q-img",{staticStyle:{width:"100%"},attrs:{src:"img/card.png"}}),e("q-item-label",{staticClass:"main2",attrs:{header:""}},[e("span",{staticStyle:{color:"white"}},[t._v(t._s(t.nama))])]),t._l(t.$store.state.list_menu,(function(a,n){return[t.checkLength(a.subItem)?t._e():e("q-item",{key:a.index,attrs:{clickable:"",to:a.route,exact:""}},[e("q-item-section",{attrs:{top:"",avatar:""}},[e("span",{staticStyle:{display:"none"}},[t._v(t._s(n))]),e("q-avatar",{attrs:{color:a.color,"text-color":"white",icon:a.icon}})],1),e("q-item-section",[e("q-item-label",{staticClass:"h_sidebar_menu"},[t._v(t._s(a.title))])],1)],1),t.checkLength(a.subItem)?e("q-expansion-item",{key:a.index,scopedSlots:t._u([{key:"header",fn:function(){return[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",{attrs:{icon:a.icon,color:a.color,"text-color":"white"}})],1),e("q-item-section",{staticClass:"h_sidebar_menu"},[t._v(t._s(a.title))])]},proxy:!0}],null,!0)},[e("q-list",{attrs:{bordered:""}},[t._l(a.subItem,(function(a,n){return[t.checkLength(a.subItem)?t._e():e("q-item",{key:n,attrs:{clickable:"",to:a.route}},[e("q-item-section",{attrs:{avatar:""}}),e("q-item-section",{staticClass:"h_sidebar_sub_menu"},[t._v(t._s(a.title))])],1),t.checkLength(a.subItem)?e("q-expansion-item",{key:n,staticClass:"h_sidebar_sub_menu",attrs:{"expand-separator":"","content-inset-level":1},scopedSlots:t._u([{key:"header",fn:function(){return[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",{attrs:{icon:"radio_button_checked","text-color":"#2d2c2c"}})],1),e("q-item-section",{staticClass:"h_sidebar_menu"},[t._v(t._s(a.title))])]},proxy:!0}],null,!0)},t._l(a.subItem,(function(a,n){return e("q-list",{key:n},[e("q-item",{attrs:{clickable:"",to:a.route}},[e("q-item-section",{staticClass:"h_sidebar_sub_menu"},[t._v(t._s(a.title))])],1)],1)})),1):t._e()]}))],2)],1):t._e()]})),e("q-item",{attrs:{clickable:"",exact:""},on:{click:t.logout}},[e("q-item-section",{attrs:{top:"",avatar:""}},[e("q-avatar",{attrs:{color:"red","text-color":"white",icon:"lock"}})],1),e("q-item-section",[e("q-item-label",{staticClass:"h_sidebar_menu"},[t._v("Keluar")]),e("q-item-label",{attrs:{caption:"",lines:"2"}},[t._v("Logout")])],1)],1)],2)},W=[],$=(a("14d9"),a("dcef")),z=a.n($),Q=a("7daa"),F=a.n(Q),H={data(){return{leftDrawerOpen:!0,nama:"",unit_kerja_nama:"",list_data:[],FETCHING:z.a,UMUM:F.a}},methods:{logout:function(){localStorage.removeItem("token"),localStorage.removeItem("profile"),this.$router.push("/login")},checkLength(t){return!(t.length<=0)},checkOtorisasi(){console.log(this.$store.state.url.checkAuth),fetch(this.$store.state.url.checkAuth,{method:"GET",headers:{"content-type":"application/json",authorization:"kikensbatara "+localStorage.token}}).then(t=>t.json()).then(t=>{if("SSILAHKAN LOGIN DULU..!!!"!=t.message)return!1;localStorage.removeItem("token"),localStorage.removeItem("profile"),this.$router.push("/login")})},async loadMenu(){var t=JSON.parse(localStorage.profile),e=t.profile,a=await this.FETCHING.postMasterMenuGetSideBar(e.stokdarah_konut);this.$store.state.list_menu=a;var n=[];a.forEach(t=>{0==t.type?n.push(t):t.subItem.forEach(t=>{0==t.type?n.push(t):t.subItem.forEach(t=>{n.push(t)})})});var o=F.a.ArrToObj(n);this.$store.state.aksesMenu=o}},mounted(){this.checkOtorisasi();var t=JSON.parse(localStorage.profile);this.nama=t.profile.nama,this.unit_kerja_nama=t.profile.unit_kerja_nama,this.loadMenu()}},K=H,Y=Object(d["a"])(K,J,W,!1,null,null,null),X=Y.exports;Y.options.components=Object.assign(Object.create(Y.options.components||null),Y.options.components||{},{QList:u["B"],QImg:u["v"],QItemLabel:u["y"],QItem:u["x"],QItemSection:u["z"],QAvatar:u["b"],QExpansionItem:u["o"],QIcon:u["u"]});var V=function(){var t=this,e=t._self._c;return e("div")},Z=[],tt={},et=tt,at=Object(d["a"])(et,V,Z,!1,null,"75660a9c",null),nt=at.exports,ot=function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center"},[e("q-img",{attrs:{src:"img/loading.gif",width:"190px","spinner-color":"primary","spinner-size":"82px"}}),e("br"),e("span",{staticClass:"loadingFonts"},[t._v("LOADING...!")])],1)},it=[],rt=(a("1e47"),{}),st=Object(d["a"])(rt,ot,it,!1,null,null,null),lt=st.exports;st.options.components=Object.assign(Object.create(st.options.components||null),st.options.components||{},{QImg:u["v"]});var ct=a("35c6"),dt=a("7898"),ut=a.n(dt);n["default"].use(N.a),n["default"].use(U.a),n["default"].use(G,{load:{key:"AIzaSyA4Q_DJMnn-MOg1xPAQz0ALWAajEr6Cyqk",v:"3.26",libraries:"places, drawing, visualization"},autobindAllEvents:!0,installComponents:!0}),n["default"].component("SideBar",X),n["default"].component("topBar",nt),n["default"].component("ProgressLoading",lt),n["default"].use(ct["a"]);const ht={name:"_blank",specs:["fullscreen=yes","titlebar=yes","scrollbars=yes"],styles:["./css/kiken.css","./css/bg.css","./css/huruf.css","./css/modal.css","./css/input.css","./css/huruf.css","https://cdn.jsdelivr.net/npm/quasar@2.10.1/dist/quasar.prod.css"]};n["default"].use(ut.a,ht),n["default"].config.productionTip=!1,new n["default"]({router:E,store:T["default"],render:t=>t(_)}).$mount("#app")},"7daa":function(t,e,a){a("13d5");const n=a("3d20"),o=t=>{var e=new Date(t),a=e.getMonth()+1,n="";return"1"==a?n="Januari":"2"==a?n="Februari":"3"==a?n="Maret":"4"==a?n="April":"5"==a?n="Mei":"6"==a?n="Juni":"7"==a?n="Juli":"8"==a?n="Agustus":"9"==a?n="September":"10"==a?n="Oktober":"11"==a?n="November":"12"==a&&(n="Desember"),e.getDate()+" "+n+" "+e.getFullYear()},i=(t,e=!1)=>{var a=new Date(t),n=a.getMonth()+1,o="";1==n?o="Jan":2==n?o="Febr":3==n?o="Maret":4==n?o="April":5==n?o="Mei":6==n?o="Juni":7==n?o="Juli":8==n?o="Agust":9==n?o="Sept":10==n?o="Okt":11==n?o="Nov":12==n&&(o="Des");let i=a.getDate()+" "+o+" "+a.getFullYear();if(e){let t=a.getHours().toString().padStart(2,"0"),e=a.getMinutes().toString().padStart(2,"0");i+=` ${t}:${e}`}return i};function r(t){if(!t)return"-";const e=new Date(t),a=new Date;let n=a.getFullYear()-e.getFullYear();const o=a.getMonth()<e.getMonth()||a.getMonth()===e.getMonth()&&a.getDate()<e.getDate();return o&&n--,n}const s=async()=>new Promise(t=>{n.fire({title:"Apakah anda yakin untuk menyetujui data ini?",text:"Pilih button Approve untuk menyetujui data ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Approve!"}).then(e=>{e.isConfirmed&&t("")})}),l=t=>{},c=(t,e)=>{},d=t=>{var e=t.toString().replace(/\/|-| |@/g,"_X_");return e},u=t=>{var e=t.reduce((function(t,e,a){return t[d(e.route)]={readx:e.readx,updatex:e.updatex,deletex:e.deletex,addx:e.addx},t}),{});return e};t.exports={tglConvert:o,tglConvertx:i,btn_prev:l,btn_next:c,notifApprove:s,ArrToObj:u,hitungUsia:r}},ae97:function(t,e,a){},cf05:function(t,e,a){t.exports=a.p+"img/logo.8c4120b4.png"},dcef:function(t,e,a){a("3d20");var n=a("4360"),o=n.default,i=o.state;const r=async()=>new Promise(t=>{fetch(i.url.URL_DM_KLP_USERS+"listAdd",{method:"GET",headers:{"content-type":"application/json",authorization:"kikensbatara "+localStorage.token}}).then(t=>t.json()).then(e=>{t(e)})}),s=async t=>new Promise(e=>{fetch(i.url.URL_DM_KLP_USERS+"listEdit",{method:"POST",headers:{"content-type":"application/json",authorization:"kikensbatara "+localStorage.token},body:JSON.stringify({menu_klp_id:t})}).then(t=>t.json()).then(t=>{e(t)})}),l=async()=>new Promise(t=>{fetch(i.url.URL_DM_KLP_USERS+"list",{method:"POST",headers:{"content-type":"application/json",authorization:"kikensbatara "+localStorage.token},body:JSON.stringify({menu_klp_id:"id"})}).then(t=>t.json()).then(e=>{console.log(e),t(e)})}),c=async t=>(console.log("postMasterMenuGetSideBar"),new Promise(e=>{fetch(i.url.URL_DM_KLP_USERS+"listSidebar",{method:"POST",headers:{"content-type":"application/json",authorization:"kikensbatara "+localStorage.token},body:JSON.stringify({side_bar:!0,menu_klp_id:t})}).then(t=>t.json()).then(t=>{console.log(t),e(t)})})),d=t=>{fetch(i.url.checkAuth+"autocomplete_db",{method:"POST",headers:{"content-type":"application/json",authorization:"kikensbatara "+localStorage.token},body:JSON.stringify({val:t})}).then(t=>t.json()).then(t=>{i.list_contoh_autocomplete=t})};t.exports={getMasterMenu:r,postMasterMenu:s,postMasterMenuGetSideBar:c,postMasterKlpMenu:l,getContohAtocomplete:d}}});
//# sourceMappingURL=app.e8495b20.js.map