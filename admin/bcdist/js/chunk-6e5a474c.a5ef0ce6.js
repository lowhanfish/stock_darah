(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e5a474c"],{"889d":function(a,t,s){"use strict";s("9fb0")},"9fb0":function(a,t,s){},b7ce:function(a,t,s){"use strict";s.r(t);var e=function(){var a=this,t=a._self._c;return t("div",{staticClass:"about",staticStyle:{padding:"15px"}},[t("q-card",{staticClass:"my-card",attrs:{bordered:""}},[t("q-card-section",{staticClass:"main2 text-white"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-md-6"},[t("div",{staticClass:"text-h6 h_titleHead"},[a._v("Permintaan Darah")]),t("div",{staticClass:"text-h8"},[a._v("Manajemen Darah")])]),t("div",{staticClass:"col-12 col-md-2"}),t("div",{staticClass:"col-12 col-md-4"},[t("div",{staticClass:"row"},[t("q-input",{staticClass:"bg-white",staticStyle:{width:"90%"},attrs:{outlined:"",square:"",dense:!0},on:{keyup:function(t){return a.cari_data()}},model:{value:a.cari_value,callback:function(t){a.cari_value=t},expression:"cari_value"}}),3===a.tipe?t("q-btn",{staticClass:"main4",staticStyle:{width:"10%"},attrs:{glossy:"",dense:"",flat:"",icon:"add"},on:{click:function(t){a.mdl_add=!0}}},[t("q-tooltip",{attrs:{"content-class":"bg-green-6","content-style":"font-size: 13px"}},[a._v(" Tambah Permintaan ")])],1):a._e()],1)])])])],1),t("hr",{staticClass:"hrpagin2"}),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Golongan Darah")]),t("q-select",{staticClass:"bg-white",attrs:{options:["A","B","O","AB"],outlined:"",dense:""},on:{input:a.applyFilter},model:{value:a.filter.golongan_darah,callback:function(t){a.$set(a.filter,"golongan_darah",t)},expression:"filter.golongan_darah"}})],1),t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Komponen")]),t("q-select",{staticClass:"bg-white",attrs:{options:a.list_komponen,"option-label":"nama_komponen","option-value":"id","emit-value":"","map-options":"",outlined:"",dense:""},on:{input:a.applyFilter},model:{value:a.filter.komponen_id,callback:function(t){a.$set(a.filter,"komponen_id",t)},expression:"filter.komponen_id"}})],1),t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Status")]),t("q-select",{staticClass:"bg-white",attrs:{options:a.statusOptions,"emit-value":"","map-options":"",outlined:"",dense:""},on:{input:a.applyFilter},model:{value:a.filter.status,callback:function(t){a.$set(a.filter,"status",t)},expression:"filter.status"}})],1)]),t("hr",{staticClass:"hrpagin2"}),t("div",{staticClass:"tbl_responsive"},[t("table",{attrs:{width:"100%"}},[a._m(0),t("tbody",[a._l(a.list_data,(function(s,e){return t("tr",{key:s.id+"-"+e},[t("td",{staticClass:"text-center"},[a._v(a._s(a.indexing(e+1)))]),t("td",{staticClass:"text-center"},[t("div",{staticClass:"removeTextDecoration"},[1===Number(s.status)?t("q-badge",{staticClass:"q-pa-xs status-badge text-bold cursor-pointer",attrs:{color:"orange","text-color":"white"},on:{click:function(t){return a.lihatKeterangan(s)}}},[a._v(" Pengajuan ")]):2===Number(s.status)?t("q-badge",{staticClass:"q-pa-xs status-badge text-bold cursor-pointer",attrs:{color:"info","text-color":"white"},on:{click:function(t){return a.lihatKeterangan(s)}}},[a._v(" Diperiksa ")]):3===Number(s.status)?[1===a.tipe||2===a.tipe?t("q-badge",{staticClass:"q-pa-xs status-badge text-bold cursor-pointer",attrs:{color:"secondary","text-color":"white"},on:{click:function(t){return t.stopPropagation(),a.openStage2(s)}}},[a._v(" Darah Siap Diambil ")]):3===a.tipe?t("q-badge",{staticClass:"q-pa-xs status-badge text-bold cursor-pointer",attrs:{color:"secondary","text-color":"white"},on:{click:function(t){return a.lihatKeterangan(s)}}},[a._v(" Darah Siap Diambil ")]):a._e()]:6===Number(s.status)?t("q-badge",{staticClass:"q-pa-xs status-badge text-bold cursor-pointer",attrs:{color:"accent","text-color":"white"},on:{click:function(t){return t.stopPropagation(),a.openStage2(s)}}},[a._v(" Darah Telah Diambil ")]):4===Number(s.status)?t("q-badge",{staticClass:"q-pa-xs status-badge text-bold cursor-pointer",attrs:{color:"green","text-color":"white"},on:{click:function(t){return a.openStage2(s)}}},[a._v(" Permintaan Selesai ")]):5===Number(s.status)?t("q-badge",{staticClass:"q-pa-xs status-badge text-bold cursor-pointer",attrs:{color:"negative","text-color":"white"},on:{click:function(t){return a.lihatKeterangan(s)}}},[a._v(" Permintaan Ditolak ")]):a._e()],2)]),t("td",[t("div",[a._v(" "+a._s(s.nama_pasien)+" ")]),t("div",{staticClass:"text-blue text-bold",staticStyle:{"font-size":"12px"}},[a._v(" Ruangan: "+a._s(s.nama_ruangan)+" ")])]),t("td",[t("div",[a._v(" "+a._s(a.UMUM.tglConvert(s.tanggal_lahir))+" ")]),t("div",{staticClass:"text-blue text-bold",staticStyle:{"font-size":"12px"}},[a._v(" Usia: "+a._s(a.UMUM.hitungUsia(s.tanggal_lahir))+" Tahun ")])]),t("td",{staticClass:"text-center"},[a._v(a._s(s.golongan_darah||"-")+a._s(s.rhesus))]),t("td",[a._v(a._s(s.nama_komponen||"-"))]),t("td",{staticClass:"text-center"},[a._v(a._s(s.jumlah_kantong))]),t("td",{staticClass:"text-center"},[a._v(a._s(s.jumlah_darah_diberikan||"-"))]),t("td",{staticClass:"text-center q-gutter-sm"},[t("q-btn",{attrs:{dense:"",round:"",color:"primary",icon:"visibility"},on:{click:function(t){return a.openLihat(s)}}},[t("q-tooltip",{attrs:{"content-class":"bg-blue-7"}},[a._v("Lihat Detail")])],1),1!==a.tipe?t("q-btn",{attrs:{dense:"",round:"",color:"warning",icon:"edit",disable:3===Number(s.status)||4===Number(s.status)},on:{click:function(t){return a.openEdit(s)}}},[3===Number(s.status)||4===Number(s.status)?t("q-tooltip",{attrs:{"content-class":"bg-amber-7"}},[a._v(" Tidak dapat edit — permintaan sudah Disetujui ")]):t("q-tooltip",{attrs:{"content-class":"bg-amber-7"}},[a._v("Edit Permintaan")])],1):a._e(),1!==a.tipe?t("q-btn",{attrs:{dense:"",round:"",color:"negative",icon:"delete",disable:2===Number(s.status)||3===Number(s.status)||4===Number(s.status)},on:{click:function(t){return a.openDelete(s)}}},[t("q-tooltip",{attrs:{"content-class":"bg-red-7"}},[a._v(" "+a._s(2===Number(s.status)||3===Number(s.status)?"Tidak dapat dihapus (sedang diperiksa / disetujui)":"Hapus Permintaan")+" ")])],1):a._e()],1)])})),0===a.list_data.length?t("tr",[t("td",{staticClass:"text-center text-grey",attrs:{colspan:"9"}},[a._v(" Belum ada data permintaan. ")])]):a._e()],2)])]),t("div",{staticClass:"flex flex-center q-mt-md"},[t("q-pagination",{attrs:{max:a.page_last,color:"grey-6","max-pages":4,"direction-links":!0,"boundary-links":!0},on:{input:a.getView},model:{value:a.page_first,callback:function(t){a.page_first=t},expression:"page_first"}})],1),t("q-dialog",{attrs:{persistent:""},model:{value:a.mdl_add,callback:function(t){a.mdl_add=t},expression:"mdl_add"}},[t("q-card",{staticClass:"mdl-md"},[t("q-card-section",{staticClass:"main2 text-white"},[t("div",{staticClass:"text-h6 h_modalhead"},[a._v("Tambah Permintaan Darah")])]),t("form",{on:{submit:function(t){return t.preventDefault(),a.addData.apply(null,arguments)}}},[t("q-card-section",{staticClass:"q-pt-none"},[t("hr",{staticClass:"hrpagin2"}),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Nama Dokter*")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{outlined:"",square:"",dense:!0,required:""},model:{value:a.form.nama_dokter,callback:function(t){a.$set(a.form,"nama_dokter",t)},expression:"form.nama_dokter"}})],1),t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Nama Pasien*")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{outlined:"",square:"",dense:!0,required:""},model:{value:a.form.nama_pasien,callback:function(t){a.$set(a.form,"nama_pasien",t)},expression:"form.nama_pasien"}})],1)]),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Jenis Kelamin*")]),t("q-select",{staticClass:"bg-white margin_btn",attrs:{options:[{label:"Laki-laki",value:"L"},{label:"Perempuan",value:"P"}],"option-value":"value","option-label":"label","emit-value":"","map-options":"",outlined:"",square:"",dense:!0,required:""},model:{value:a.form.jenis_kelamin,callback:function(t){a.$set(a.form,"jenis_kelamin",t)},expression:"form.jenis_kelamin"}})],1),t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Nomor RM*")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{outlined:"",square:"",dense:!0},model:{value:a.form.nomor_rm,callback:function(t){a.$set(a.form,"nomor_rm",t)},expression:"form.nomor_rm"}})],1),t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Tanggal Lahir*")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"date",outlined:"",square:"",dense:!0},model:{value:a.form.tanggal_lahir,callback:function(t){a.$set(a.form,"tanggal_lahir",t)},expression:"form.tanggal_lahir"}})],1)]),"P"===a.form.jenis_kelamin?t("div",[t("hr",{staticClass:"hrpagin2"}),t("div",{staticClass:"text-subtitle2 q-mb-sm"},[a._v("Khusus Pasien Wanita")]),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Jumlah Kehamilan")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"number",min:"0",outlined:"",square:"",dense:!0,rules:[t=>"P"!==a.form.jenis_kelamin||(null!==t&&""!==t||"Harus diisi")]},model:{value:a.form.jumlah_kehamilan,callback:function(t){a.$set(a.form,"jumlah_kehamilan",a._n(t))},expression:"form.jumlah_kehamilan"}})],1),t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Pernah Abortus")]),t("q-option-group",{attrs:{options:[{label:"Ya",value:"Ya"},{label:"Tidak",value:"Tidak"}],type:"radio",inline:""},model:{value:a.form.pernah_abortus,callback:function(t){a.$set(a.form,"pernah_abortus",t)},expression:"form.pernah_abortus"}})],1),t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Pernah HDN (penyakit hemolitik bayi)")]),t("q-option-group",{attrs:{options:[{label:"Ya",value:"Ya"},{label:"Tidak",value:"Tidak"}],type:"radio",inline:""},model:{value:a.form.pernah_hdn,callback:function(t){a.$set(a.form,"pernah_hdn",t)},expression:"form.pernah_hdn"}})],1)]),t("hr",{staticClass:"hrpagin2"})]):a._e(),t("span",{staticClass:"h_lable"},[a._v("Alamat*")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"textarea",autogrow:"",outlined:"",square:"",dense:!0},model:{value:a.form.alamat,callback:function(t){a.$set(a.form,"alamat",t)},expression:"form.alamat"}}),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Nama Wali*")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{outlined:"",square:"",dense:!0},model:{value:a.form.nama_wali,callback:function(t){a.$set(a.form,"nama_wali",t)},expression:"form.nama_wali"}})],1),t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Kadar HB (g/dL)")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"number",step:"0.1",outlined:"",square:"",dense:!0,hint:"Opsional (diisi jika tersedia)"},model:{value:a.form.kadar_hb,callback:function(t){a.$set(a.form,"kadar_hb",a._n(t))},expression:"form.kadar_hb"}})],1)]),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Golongan Darah")]),t("q-select",{staticClass:"bg-white margin_btn",attrs:{options:["A","B","O","AB"],outlined:"",square:"",dense:!0},model:{value:a.form.golongan_darah,callback:function(t){a.$set(a.form,"golongan_darah",t)},expression:"form.golongan_darah"}})],1),t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Rhesus")]),t("q-select",{staticClass:"bg-white margin_btn",attrs:{options:["+","-"],outlined:"",square:"",dense:!0,required:""},model:{value:a.form.rhesus,callback:function(t){a.$set(a.form,"rhesus",t)},expression:"form.rhesus"}})],1),t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Komponen")]),t("q-select",{staticClass:"bg-white margin_btn",attrs:{options:a.list_komponen,"option-value":"id","option-label":"nama_komponen","emit-value":"","map-options":"",outlined:"",dense:"",required:""},model:{value:a.form.komponen_id,callback:function(t){a.$set(a.form,"komponen_id",t)},expression:"form.komponen_id"}})],1)]),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Jumlah (Kantong)*")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"number",outlined:"",square:"",dense:!0,required:""},model:{value:a.form.jumlah_kantong,callback:function(t){a.$set(a.form,"jumlah_kantong",a._n(t))},expression:"form.jumlah_kantong"}})],1),t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Jumlah (cc)*")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"number",outlined:"",square:"",dense:!0,required:""},model:{value:a.form.jumlah_cc,callback:function(t){a.$set(a.form,"jumlah_cc",a._n(t))},expression:"form.jumlah_cc"}})],1)]),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Tanggal Permintaan*")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"date",outlined:"",square:"",dense:!0,required:""},model:{value:a.form.tanggal_permintaan,callback:function(t){a.$set(a.form,"tanggal_permintaan",t)},expression:"form.tanggal_permintaan"}})],1),t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Tanggal Diperlukan*")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"date",outlined:"",square:"",dense:!0},model:{value:a.form.tanggal_diperlukan,callback:function(t){a.$set(a.form,"tanggal_diperlukan",t)},expression:"form.tanggal_diperlukan"}})],1)]),t("span",{staticClass:"h_lable"},[a._v("Diagnosis Klinis")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"textarea",outlined:"",square:"",dense:!0,autogrow:""},model:{value:a.form.diagnosis_klinis,callback:function(t){a.$set(a.form,"diagnosis_klinis",t)},expression:"form.diagnosis_klinis"}}),t("span",{staticClass:"h_lable"},[a._v("Alasan Transfusi")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"textarea",outlined:"",square:"",dense:!0,autogrow:""},model:{value:a.form.alasan_transfusi,callback:function(t){a.$set(a.form,"alasan_transfusi",t)},expression:"form.alasan_transfusi"}}),t("hr",{staticClass:"hrpagin2"}),t("div",{staticClass:"text-subtitle1 q-mb-sm text-bold text-center"},[a._v("Riwayat Transfusi & Pemeriksaan Serologi")]),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Transfusi Sebelumnya")]),t("q-option-group",{attrs:{options:[{label:"Ya",value:"Ya"},{label:"Tidak",value:"Tidak"}],type:"radio",inline:""},model:{value:a.form.transfusi_sebelumnya,callback:function(t){a.$set(a.form,"transfusi_sebelumnya",t)},expression:"form.transfusi_sebelumnya"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"Ya"===a.form.transfusi_sebelumnya,expression:"form.transfusi_sebelumnya === 'Ya'"}],staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Kapan (tanggal / keterangan)")]),t("q-input",{staticClass:"bg-white",attrs:{outlined:"",square:"",dense:!0,placeholder:"YYYY-MM-DD atau keterangan"},model:{value:a.form.transfusi_kapan,callback:function(t){a.$set(a.form,"transfusi_kapan",t)},expression:"form.transfusi_kapan"}})],1),t("div",{staticClass:"col-12 col-md-6 q-mt-sm"},[t("span",{staticClass:"h_lable"},[a._v("Reaksi Transfusi")]),t("q-option-group",{attrs:{options:[{label:"Ya",value:"Ya"},{label:"Tidak",value:"Tidak"}],type:"radio",inline:""},model:{value:a.form.reaksi_transfusi,callback:function(t){a.$set(a.form,"reaksi_transfusi",t)},expression:"form.reaksi_transfusi"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"Ya"===a.form.reaksi_transfusi,expression:"form.reaksi_transfusi === 'Ya'"}],staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Gejala")]),t("q-input",{staticClass:"bg-white",attrs:{outlined:"",square:"",dense:!0,placeholder:"Jelaskan gejala reaksi"},model:{value:a.form.gejala_transfusi,callback:function(t){a.$set(a.form,"gejala_transfusi",t)},expression:"form.gejala_transfusi"}})],1),t("div",{staticClass:"col-12 col-md-6 q-mt-sm"},[t("span",{staticClass:"h_lable"},[a._v("Pernah diperiksa serologi (Coomb's test)?")]),t("q-option-group",{attrs:{options:[{label:"Ya",value:"Ya"},{label:"Tidak",value:"Tidak"}],type:"radio",inline:""},model:{value:a.form.coomb_test,callback:function(t){a.$set(a.form,"coomb_test",t)},expression:"form.coomb_test"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"Ya"===a.form.coomb_test,expression:"form.coomb_test === 'Ya'"}],staticClass:"col-12 col-md-6"},[t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-12"},[t("span",{staticClass:"h_lable"},[a._v("Dimana (lab/rumah sakit)")]),t("q-input",{staticClass:"bg-white",attrs:{outlined:"",square:"",dense:!0},model:{value:a.form.coomb_tempat,callback:function(t){a.$set(a.form,"coomb_tempat",t)},expression:"form.coomb_tempat"}})],1),t("div",{staticClass:"col-12 col-md-6 q-mt-sm"},[t("span",{staticClass:"h_lable"},[a._v("Kapan")]),t("q-input",{staticClass:"bg-white",attrs:{type:"date",outlined:"",square:"",dense:!0},model:{value:a.form.coomb_kapan,callback:function(t){a.$set(a.form,"coomb_kapan",t)},expression:"form.coomb_kapan"}})],1),t("div",{staticClass:"col-12 col-md-6 q-mt-sm"},[t("span",{staticClass:"h_lable"},[a._v("Hasil")]),t("q-input",{staticClass:"bg-white",attrs:{outlined:"",square:"",dense:!0,placeholder:"Negatif / Positif / Lainnya"},model:{value:a.form.coomb_hasil,callback:function(t){a.$set(a.form,"coomb_hasil",t)},expression:"form.coomb_hasil"}})],1)])])])],1),t("hr",{staticClass:"hrpagin2"}),t("q-card-actions",{staticClass:"bg-grey-4 mdl-footer",attrs:{align:"right"}},[t("q-btn",{attrs:{loading:a.btn_add,color:"primary",type:"submit",label:"Simpan"}}),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Batal",color:"negative"},on:{click:a.resetForm}})],1)],1)],1)],1),t("q-dialog",{attrs:{persistent:""},model:{value:a.mdl_lihat,callback:function(t){a.mdl_lihat=t},expression:"mdl_lihat"}},[t("q-card",{staticClass:"mdl-lg"},[t("q-card-section",{staticClass:"bg-orange text-white row items-center justify-between"},[t("div",{staticClass:"text-h6 h_modalhead"},[a._v("Detail Permintaan Darah")]),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-sm",attrs:{flat:"",round:"",dense:"",icon:"close",color:"white","aria-label":"Tutup"},on:{click:function(t){a.lihat_target=null}}},[t("q-tooltip",{attrs:{"content-class":"bg-red"}},[a._v("Tutup")])],1)],1),t("q-card-section",[a.lihat_target?t("div",[t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-6"},[t("div",{staticClass:"detail-table"},[t("div",{staticClass:"row-line"},[t("div",{staticClass:"label"},[a._v("Nama Pasien")]),t("div",{staticClass:"colon"},[a._v(":")]),t("div",{staticClass:"value text-bold"},[a._v(a._s(a.lihat_target.nama_pasien||"-"))])]),t("div",{staticClass:"row-line"},[t("div",{staticClass:"label"},[a._v("No. RM")]),t("div",{staticClass:"colon"},[a._v(":")]),t("div",{staticClass:"value text-bold"},[a._v(a._s(a.lihat_target.nomor_rm||"-"))])]),t("div",{staticClass:"row-line"},[t("div",{staticClass:"label"},[a._v("Tanggal Lahir")]),t("div",{staticClass:"colon"},[a._v(":")]),t("div",{staticClass:"value text-bold"},[a._v(" "+a._s(a.lihat_target.tanggal_lahir?a.UMUM.tglConvert(a.lihat_target.tanggal_lahir):"-")+" ")])]),t("div",{staticClass:"row-line"},[t("div",{staticClass:"label"},[a._v("Alamat")]),t("div",{staticClass:"colon"},[a._v(":")]),t("div",{staticClass:"value text-bold"},[a._v(a._s(a.lihat_target.alamat||"-"))])])])]),t("div",{staticClass:"col-12 col-md-6"},[t("div",{staticClass:"detail-table"},[t("div",{staticClass:"row-line"},[t("div",{staticClass:"label"},[a._v("Dokter")]),t("div",{staticClass:"colon"},[a._v(":")]),t("div",{staticClass:"value text-bold"},[a._v(a._s(a.lihat_target.nama_dokter||"-"))])]),t("div",{staticClass:"row-line"},[t("div",{staticClass:"label"},[a._v("Ruangan")]),t("div",{staticClass:"colon"},[a._v(":")]),t("div",{staticClass:"value text-bold"},[a._v(a._s(a.lihat_target.nama_ruangan||"-"))])]),t("div",{staticClass:"row-line"},[t("div",{staticClass:"label"},[a._v("Tanggal Diperlukan")]),t("div",{staticClass:"colon"},[a._v(":")]),t("div",{staticClass:"value text-bold"},[a._v(" "+a._s(a.lihat_target.tanggal_diperlukan?a.UMUM.tglConvert(a.lihat_target.tanggal_diperlukan):"-")+" ")])]),t("div",{staticClass:"row-line"},[t("div",{staticClass:"label"},[a._v("Nama Wali")]),t("div",{staticClass:"colon"},[a._v(":")]),t("div",{staticClass:"value text-bold"},[a._v(a._s(a.lihat_target.nama_wali||"-"))])])])])]),t("q-separator",{attrs:{spaced:""}}),t("q-list",{staticClass:"rounded-borders",attrs:{bordered:"",dense:""}},[t("q-item",[t("q-item-section",[t("q-item-label",{staticClass:"text-black",attrs:{caption:""}},[t("strong",[a._v(" Komponen : ")]),t("span",{staticClass:"text-bold text-grey",staticStyle:{"font-size":"16px"}},[a._v(" "+a._s(a.lihat_target.nama_komponen||"-")+" ")])]),t("div",{staticClass:"text-caption q-mt-xs"},[t("strong",[a._v(" Golongan Darah : ")]),a._v(" "),t("span",{staticClass:"text-bold text-grey",staticStyle:{"font-size":"16px"}},[a._v(a._s(a.lihat_target.golongan_darah||"-")+a._s(a.lihat_target.rhesus?a.lihat_target.rhesus:"")+" ")])])],1),t("q-item-section",{staticStyle:{"min-width":"160px","text-align":"right"},attrs:{side:""}},[t("q-item-label",{staticClass:"text-black text-bold",attrs:{caption:""}},[t("strong",[a._v(" Jumlah : ")]),t("span",{staticClass:"text-bold text-grey",staticStyle:{"font-size":"16px"}},[a._v(" "+a._s(a.lihat_target.jumlah_kantong)+" Kantong ")])]),t("q-item-label",{staticClass:"text-black text-bold",attrs:{caption:""}},[t("strong",[a._v(" Volume : ")]),t("span",{staticClass:"text-bold text-grey",staticStyle:{"font-size":"16px"}},[a._v(" "+a._s(null!==a.lihat_target.jumlah_cc?a.lihat_target.jumlah_cc+" cc":"-")+" ")])])],1)],1),t("q-separator",{attrs:{inset:""}}),t("q-item",[t("q-item-section",[t("q-item-label",{staticClass:"text-black text-bold",attrs:{caption:""}},[a._v("Status")]),t("q-item-label",[t("q-chip",{staticClass:"q-mr-sm",attrs:{color:a.statusColor(a.lihat_target.status),"text-color":"white",size:"md"}},[a._v(" "+a._s(a.statusText(a.lihat_target.status))+" ")])],1)],1),t("q-item-section",{staticStyle:{"min-width":"140px","text-align":"right"},attrs:{side:""}},[t("q-item-label",{staticClass:"text-black text-bold",attrs:{caption:""}},[a._v("Permintaan dibuat")]),t("q-item-label",{staticClass:"text-weight-medium text-bold"},[a._v(" "+a._s(a.lihat_target.created_at?a.UMUM.tglConvert(a.lihat_target.created_at,!0):"-")+" ")])],1)],1)],1),t("div",{staticClass:"q-mt-md"},[t("div",{staticClass:"text-subtitle2 q-mb-xs"},[a._v("Diagnosis : ")]),t("div",{staticClass:"detail-table"},[t("div",{staticClass:"row-line"},[t("div",{staticClass:"label"}),t("div",{staticClass:"colon"}),t("div",{staticClass:"value text-bold"},[a._v(a._s(a.lihat_target.diagnosis_klinis||"-"))])])])]),t("div",{staticClass:"q-mt-md"},[t("div",{staticClass:"text-subtitle2 q-mb-xs"},[a._v("Alasan Transfusi : ")]),t("div",{staticClass:"detail-table"},[t("div",{staticClass:"row-line"},[t("div",{staticClass:"label"}),t("div",{staticClass:"colon"}),t("div",{staticClass:"value text-bold"},[a._v(a._s(a.lihat_target.alasan_transfusi||"-"))])])])]),t("q-separator",{attrs:{spaced:""}}),t("div",{staticClass:"q-mt-md"},[t("div",{staticClass:"text-subtitle1 q-mb-sm text-bold text-center"},[a._v("Riwayat Transfusi & Pemeriksaan Serologi")]),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-4"},[t("div",{staticClass:"detail-table"},[t("div",{staticClass:"row-line"},[t("div",{staticClass:"label"},[a._v("Transfusi Sebelumnya")]),t("div",{staticClass:"colon"},[a._v(":")]),t("div",{staticClass:"value text-bold"},[a._v(a._s(a.lihat_target.transfusi_sebelumnya||"-")+" ")])]),"Ya"===a.lihat_target.transfusi_sebelumnya?t("div",{staticClass:"row-line"},[t("div",{staticClass:"label"},[a._v("Kapan")]),t("div",{staticClass:"colon"},[a._v(":")]),t("div",{staticClass:"value text-bold"},[a._v(a._s(a.lihat_target.transfusi_kapan||"-"))])]):a._e()])]),t("div",{staticClass:"col-12 col-md-8"},[t("div",{staticClass:"detail-table"},[t("div",{staticClass:"row-line"},[t("div",{staticClass:"label"},[a._v("Reaksi Transfusi")]),t("div",{staticClass:"colon"},[a._v(":")]),t("div",{staticClass:"value text-bold"},[a._v(a._s(a.lihat_target.reaksi_transfusi||"-")+" ")])]),"Ya"===a.lihat_target.reaksi_transfusi?t("div",{staticClass:"row-line"},[t("div",{staticClass:"label"},[a._v("Gejala")]),t("div",{staticClass:"colon"},[a._v(":")]),t("div",{staticClass:"value text-bold"},[a._v(a._s(a.lihat_target.gejala_transfusi||"-")+" ")])]):a._e()])])])]),t("div",{staticClass:"row q-col-gutter-md q-mt-md"},[t("div",{staticClass:"col-12 col-md-4"},[t("div",{staticClass:"detail-table"},[t("div",{staticClass:"row-line"},[t("div",{staticClass:"label"},[a._v("Coomb Test")]),t("div",{staticClass:"colon"},[a._v(":")]),t("div",{staticClass:"value text-bold"},[a._v(a._s(a.lihat_target.coomb_test||"-"))])])])]),t("div",{staticClass:"col-12 col-md-4"},[t("div",{staticClass:"detail-table"},[t("div",{staticClass:"row-line"},[t("div",{staticClass:"label"},[a._v("Tempat Coomb")]),t("div",{staticClass:"colon"},[a._v(":")]),t("div",{staticClass:"value text-bold"},[a._v(a._s(a.lihat_target.coomb_tempat||"-"))])])])]),t("div",{staticClass:"col-12 col-md-4"},[t("div",{staticClass:"detail-table"},[t("div",{staticClass:"row-line"},[t("div",{staticClass:"label"},[a._v("Hasil Coomb")]),t("div",{staticClass:"colon"},[a._v(":")]),t("div",{staticClass:"value text-bold"},[a._v(a._s(a.lihat_target.coomb_hasil||"-"))])])])])]),a.lihat_target&&"P"===a.lihat_target.jenis_kelamin?t("div",{staticClass:"q-mt-md"},[t("q-separator",{attrs:{spaced:""}}),t("div",{staticClass:"text-subtitle1 text-weight-medium q-mb-sm"},[a._v("Khusus Pasien Wanita")]),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-4"},[t("div",{staticClass:"detail-table"},[t("div",{staticClass:"row-line"},[t("div",{staticClass:"label"},[a._v("Jumlah Kehamilan")]),t("div",{staticClass:"colon"},[a._v(":")]),t("div",{staticClass:"value text-bold"},[a._v(a._s(null!==a.lihat_target.jumlah_kehamilan?a.lihat_target.jumlah_kehamilan:"-"))])])])]),t("div",{staticClass:"col-12 col-md-4"},[t("div",{staticClass:"detail-table"},[t("div",{staticClass:"row-line"},[t("div",{staticClass:"label"},[a._v("Pernah Abortus")]),t("div",{staticClass:"colon"},[a._v(":")]),t("div",{staticClass:"value text-bold"},[a._v(a._s(a.lihat_target.pernah_abortus||"-"))])])])]),t("div",{staticClass:"col-12 col-md-4"},[t("div",{staticClass:"detail-table"},[t("div",{staticClass:"row-line"},[t("div",{staticClass:"label"},[a._v("Pernah HDN")]),t("div",{staticClass:"colon"},[a._v(":")]),t("div",{staticClass:"value text-bold"},[a._v(a._s(a.lihat_target.pernah_hdn||"-"))])])])])])],1):a._e(),a.lihat_target&&Number(a.lihat_target.status)>=3?t("div",{staticClass:"q-mt-md"},[t("hr",{staticClass:"hrpagin2"}),t("q-separator",{attrs:{spaced:""}}),t("div",{staticClass:"text-subtitle1 q-mb-sm text-bold text-center"},[a._v("Hasil Pemeriksaan UPD")]),t("div",{staticClass:"q-mb-md"},[t("div",{staticClass:"text-subtitle2 text-weight-medium q-mb-sm text-primary"},[a._v("Tahap 1: Hasil Pemeriksaan")]),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-4"},[t("div",{staticClass:"text-subtitle2"},[a._v("Petugas Pemeriksa")]),t("div",{staticClass:"text-body1 text-grey text-bold"},[a._v(a._s(a.lihat_target.petugas_pemeriksa||"-"))])]),t("div",{staticClass:"col-12 col-md-4"},[t("div",{staticClass:"text-subtitle2"},[a._v("Tanggal Pemeriksaan")]),t("div",{staticClass:"text-body1 text-grey text-bold"},[a._v(a._s(a.lihat_target.tanggal_pemeriksaan?a.UMUM.tglConvert(a.lihat_target.tanggal_pemeriksaan):"-"))])]),t("div",{staticClass:"col-12 col-md-4"},[t("div",{staticClass:"text-subtitle2"},[a._v("Golongan Darah")]),t("div",{staticClass:"text-body1 text-grey text-bold"},[a._v(a._s(a.lihat_target.golongan_darah||"-")+" "+a._s(a.lihat_target.rhesus?a.lihat_target.rhesus:"")+" ")])])]),t("div",{staticClass:"row q-col-gutter-md q-mt-sm"},[t("div",{staticClass:"col-12 col-md-4"},[t("div",{staticClass:"text-subtitle2"},[a._v("Crossmatch 1")]),t("div",{staticClass:"text-body1 text-grey text-bold"},[a._v(a._s(a.lihat_target.crossmatch_1||"-"))])]),t("div",{staticClass:"col-12 col-md-4"},[t("div",{staticClass:"text-subtitle2"},[a._v("Crossmatch 2")]),t("div",{staticClass:"text-body1 text-grey text-bold"},[a._v(a._s(a.lihat_target.crossmatch_2||"-"))])]),t("div",{staticClass:"col-12 col-md-4"},[t("div",{staticClass:"text-subtitle2"},[a._v("Crossmatch 3")]),t("div",{staticClass:"text-body1 text-grey text-bold"},[a._v(a._s(a.lihat_target.crossmatch_3||"-"))])])]),t("div",{staticClass:"row q-col-gutter-md q-mt-sm"},[t("div",{staticClass:"col-12 col-md-4"},[t("div",{staticClass:"text-subtitle2"},[a._v("Jumlah Diberikan (Kantong)")]),t("div",{staticClass:"text-body1 text-grey text-bold"},[a._v(a._s(null!==a.lihat_target.jumlah_darah_diberikan?a.lihat_target.jumlah_darah_diberikan+" Kantong":"-"))])]),t("div",{staticClass:"col-12 col-md-4"},[t("div",{staticClass:"text-subtitle2"},[a._v("Jumlah Diberikan (cc)")]),t("div",{staticClass:"text-body1 text-grey text-bold"},[a._v(a._s(null!==a.lihat_target.jumlah_darah_diberikan_cc?a.lihat_target.jumlah_darah_diberikan_cc+" cc":"-"))])]),t("div",{staticClass:"col-12 col-md-4"},[t("div",{staticClass:"text-subtitle2"},[a._v("Nomor Kantong")]),t("div",{staticClass:"text-body1 text-grey text-bold"},[a._v(a._s(a.lihat_target.nomor_kantong||"-"))])])]),t("div",{staticClass:"row q-col-gutter-md q-mt-sm"},[t("div",{staticClass:"col-12 col-md-4"},[t("div",{staticClass:"text-subtitle2"},[a._v("Tanggal Expired")]),t("div",{staticClass:"text-body1 text-grey text-bold"},[a._v(a._s(a.UMUM.tglConvert(a.lihat_target.exp||"-")))])]),t("div",{staticClass:"col-12 col-md-8"},[t("div",{staticClass:"text-subtitle2"},[a._v("Catatan Tambahan Pemeriksa")]),t("div",{staticClass:"text-body1 text-grey text-bold"},[a._v(a._s(a.lihat_target.catatan_tambahan||"-"))])])])]),a.lihat_target&&4==Number(a.lihat_target.status)?t("div",{staticClass:"q-mb-md"},[t("q-separator",{attrs:{spaced:""}}),t("div",{staticClass:"text-subtitle2 text-weight-medium q-mb-sm text-teal"},[a._v("Tahap 2: Pengambilan ")]),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-4"},[t("div",{staticClass:"text-subtitle2"},[a._v("Petugas Pengeluar")]),t("div",{staticClass:"text-body1 text-grey text-bold"},[a._v(a._s(a.lihat_target.petugas_pengeluar||"-"))])]),t("div",{staticClass:"col-12 col-md-4"},[t("div",{staticClass:"text-subtitle2"},[a._v("Penerima Darah")]),t("div",{staticClass:"text-body1 text-grey text-bold"},[a._v(a._s(a.lihat_target.penerima_darah||"-"))])]),t("div",{staticClass:"col-12 col-md-4"},[t("div",{staticClass:"text-subtitle2"},[a._v("Waktu Pengambilan")]),t("div",{staticClass:"text-body1 text-grey text-bold"},[a._v(a._s(a.UMUM.tglConvertx(a.lihat_target.tanggal_pengambilan,!0)||"-"))])])]),t("div",{staticClass:"q-mt-sm"},[t("div",{staticClass:"text-subtitle2 q-mb-xs"},[a._v("Catatan Pengambilan")]),t("div",{staticClass:"text-body1 text-grey text-bold"},[a._v(a._s(a.lihat_target.catatan_pengambilan||"-"))])])],1):a._e()],1):a._e()],1):a._e()]),t("q-card-actions",{staticClass:"bg-grey-4 mdl-footer"},[t("q-space"),a.lihat_target&&1===Number(a.lihat_target.status)&&3!==a.tipe?t("div",{staticClass:"row items-center q-gutter-sm"},[t("q-btn",{attrs:{loading:a.btn_periksa,color:"primary",label:"Diperiksa",dense:""},on:{click:function(t){return a.openPeriksaFor(a.lihat_target)}}},[t("q-tooltip",{attrs:{"content-class":"bg-blue-8"}},[a._v("Verifikasi & isi form UPD")])],1),t("q-btn",{attrs:{loading:a.btn_reject,color:"negative",label:"Ditolak",dense:""},on:{click:function(t){return a.openReject(a.lihat_target)}}},[t("q-tooltip",{attrs:{"content-class":"bg-red-8"}},[a._v("Tolak permintaan (wajib isi alasan)")])],1)],1):a.lihat_target&&2===Number(a.lihat_target.status)&&3!==a.tipe?t("div",{staticClass:"row items-center q-gutter-sm"},[t("q-btn",{attrs:{loading:a.btn_periksa,color:"green",label:"Lanjutkan Pemeriksaan",dense:""},on:{click:function(t){return a.openPeriksaFor(a.lihat_target)}}},[t("q-tooltip",{attrs:{"content-class":"bg-green-8"}},[a._v("Lanjut isi hasil pemeriksaan UPD")])],1),t("q-btn",{attrs:{loading:a.btn_reject,color:"negative",label:"Ditolak",dense:""},on:{click:function(t){return a.openReject(a.lihat_target)}}},[t("q-tooltip",{attrs:{"content-class":"bg-red-8"}},[a._v("Tolak permintaan (wajib isi alasan)")])],1)],1):t("div",{staticClass:"row items-center q-gutter-sm"},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Tutup",color:"negative"},on:{click:function(t){a.lihat_target=null}}}),a.lihat_target&&4===Number(a.lihat_target.status)&&a.lihat_target.file?t("q-btn",{attrs:{color:"red-6",icon:"picture_as_pdf",label:"Buka PDF"},on:{click:function(t){return a.bukaPdf(a.lihat_target.id)}}}):a._e()],1),2!==a.tipe&&1!==a.tipe||!a.lihat_target||3!==Number(a.lihat_target.status)?a._e():t("q-btn",{staticClass:"q-ml-sm",attrs:{dense:"",glossy:"",color:"warning",icon:"undo"},on:{click:function(t){return a.openRevertModal(a.lihat_target)}}},[a._v(" Edit dan Periksa Kembali "),t("q-tooltip",{attrs:{"content-class":"bg-orange"}},[a._v("Kembalikan permintaan ke status Diperiksa")])],1)],1)],1)],1),t("q-dialog",{attrs:{persistent:""},model:{value:a.mdl_edit,callback:function(t){a.mdl_edit=t},expression:"mdl_edit"}},[t("q-card",{staticClass:"mdl-md"},[t("q-card-section",{staticClass:"bg-orange text-white"},[t("div",{staticClass:"text-h6 h_modalhead"},[a._v("Edit Permintaan Darah")])]),t("form",{on:{submit:function(t){return t.preventDefault(),a.submitEdit.apply(null,arguments)}}},[t("q-card-section",{staticClass:"q-pt-none"},[t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Nama Dokter")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{outlined:"",square:"",dense:!0,required:""},model:{value:a.form_edit.nama_dokter,callback:function(t){a.$set(a.form_edit,"nama_dokter",t)},expression:"form_edit.nama_dokter"}})],1),t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Nama Pasien")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{outlined:"",square:"",dense:!0,required:""},model:{value:a.form_edit.nama_pasien,callback:function(t){a.$set(a.form_edit,"nama_pasien",t)},expression:"form_edit.nama_pasien"}})],1)]),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Jenis Kelamin")]),t("q-select",{staticClass:"bg-white margin_btn",attrs:{options:[{label:"Laki-laki",value:"L"},{label:"Perempuan",value:"P"}],"option-value":"value","option-label":"label","emit-value":"","map-options":"",outlined:"",square:"",dense:!0,required:""},model:{value:a.form_edit.jenis_kelamin,callback:function(t){a.$set(a.form_edit,"jenis_kelamin",t)},expression:"form_edit.jenis_kelamin"}})],1),t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Nomor RM")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{outlined:"",square:"",dense:!0,required:""},model:{value:a.form_edit.nomor_rm,callback:function(t){a.$set(a.form_edit,"nomor_rm",t)},expression:"form_edit.nomor_rm"}})],1),t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Tanggal Lahir")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"date",outlined:"",square:"",dense:!0},model:{value:a.form_edit.tanggal_lahir,callback:function(t){a.$set(a.form_edit,"tanggal_lahir",t)},expression:"form_edit.tanggal_lahir"}})],1)]),"P"===a.form_edit.jenis_kelamin?t("div",[t("hr",{staticClass:"hrpagin2"}),t("div",{staticClass:"text-subtitle2 q-mb-sm"},[a._v("Khusus Pasien Wanita")]),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Jumlah Kehamilan Sebelumnya")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"number",min:"0",outlined:"",square:"",dense:!0},model:{value:a.form_edit.jumlah_kehamilan,callback:function(t){a.$set(a.form_edit,"jumlah_kehamilan",a._n(t))},expression:"form_edit.jumlah_kehamilan"}})],1),t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Pernah Abortus")]),t("q-option-group",{attrs:{options:[{label:"Ya",value:"Ya"},{label:"Tidak",value:"Tidak"}],type:"radio",inline:""},model:{value:a.form_edit.pernah_abortus,callback:function(t){a.$set(a.form_edit,"pernah_abortus",t)},expression:"form_edit.pernah_abortus"}})],1),t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Pernah HDN")]),t("q-option-group",{attrs:{options:[{label:"Ya",value:"Ya"},{label:"Tidak",value:"Tidak"}],type:"radio",inline:""},model:{value:a.form_edit.pernah_hdn,callback:function(t){a.$set(a.form_edit,"pernah_hdn",t)},expression:"form_edit.pernah_hdn"}})],1)]),t("hr",{staticClass:"hrpagin2"})]):a._e(),t("span",{staticClass:"h_lable"},[a._v("Alamat")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"textarea",outlined:"",square:"",dense:!0},model:{value:a.form_edit.alamat,callback:function(t){a.$set(a.form_edit,"alamat",t)},expression:"form_edit.alamat"}}),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Nama Wali")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{outlined:"",square:"",dense:!0},model:{value:a.form_edit.nama_wali,callback:function(t){a.$set(a.form_edit,"nama_wali",t)},expression:"form_edit.nama_wali"}})],1),t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Kadar HB (g/dL)")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"number",step:"0.1",outlined:"",square:"",dense:!0},model:{value:a.form_edit.kadar_hb,callback:function(t){a.$set(a.form_edit,"kadar_hb",a._n(t))},expression:"form_edit.kadar_hb"}})],1)]),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Golongan Darah")]),t("q-select",{staticClass:"bg-white margin_btn",attrs:{options:["A","B","O","AB"],outlined:"",square:"",dense:!0},model:{value:a.form_edit.golongan_darah,callback:function(t){a.$set(a.form_edit,"golongan_darah",t)},expression:"form_edit.golongan_darah"}})],1),t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Rhesus")]),t("q-select",{staticClass:"bg-white margin_btn",attrs:{options:["+","-"],outlined:"",square:"",dense:!0},model:{value:a.form_edit.rhesus,callback:function(t){a.$set(a.form_edit,"rhesus",t)},expression:"form_edit.rhesus"}})],1),t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Komponen")]),t("q-select",{staticClass:"bg-white margin_btn",attrs:{options:a.list_komponen,"option-value":"id","option-label":"nama_komponen","emit-value":"","map-options":"",outlined:"",dense:""},model:{value:a.form_edit.komponen_id,callback:function(t){a.$set(a.form_edit,"komponen_id",t)},expression:"form_edit.komponen_id"}})],1)]),t("span",{staticClass:"h_lable"},[a._v("Jumlah (Kantong)")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"number",outlined:"",square:"",dense:!0,required:""},model:{value:a.form_edit.jumlah_kantong,callback:function(t){a.$set(a.form_edit,"jumlah_kantong",a._n(t))},expression:"form_edit.jumlah_kantong"}}),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Tanggal Permintaan")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"date",outlined:"",square:"",dense:!0},model:{value:a.form_edit.tanggal_permintaan,callback:function(t){a.$set(a.form_edit,"tanggal_permintaan",t)},expression:"form_edit.tanggal_permintaan"}})],1),t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Tanggal Diperlukan")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"date",outlined:"",square:"",dense:!0},model:{value:a.form_edit.tanggal_diperlukan,callback:function(t){a.$set(a.form_edit,"tanggal_diperlukan",t)},expression:"form_edit.tanggal_diperlukan"}})],1)]),t("span",{staticClass:"h_lable"},[a._v("Diagnosis Klinis")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"textarea",outlined:"",square:"",dense:!0,autogrow:""},model:{value:a.form_edit.diagnosis_klinis,callback:function(t){a.$set(a.form_edit,"diagnosis_klinis",t)},expression:"form_edit.diagnosis_klinis"}}),t("span",{staticClass:"h_lable"},[a._v("Alasan Transfusi")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{type:"textarea",outlined:"",square:"",dense:!0,autogrow:""},model:{value:a.form_edit.alasan_transfusi,callback:function(t){a.$set(a.form_edit,"alasan_transfusi",t)},expression:"form_edit.alasan_transfusi"}}),t("hr",{staticClass:"hrpagin2"}),t("div",{staticClass:"text-subtitle1 q-mb-sm text-bold text-center"},[a._v("Riwayat Transfusi & Pemeriksaan Serologi")]),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Transfusi Sebelumnya")]),t("q-option-group",{attrs:{options:[{label:"Ya",value:"Ya"},{label:"Tidak",value:"Tidak"}],type:"radio",inline:""},model:{value:a.form_edit.transfusi_sebelumnya,callback:function(t){a.$set(a.form_edit,"transfusi_sebelumnya",t)},expression:"form_edit.transfusi_sebelumnya"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"Ya"===a.form_edit.transfusi_sebelumnya,expression:"form_edit.transfusi_sebelumnya === 'Ya'"}],staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Kapan (tanggal / keterangan)")]),t("q-input",{staticClass:"bg-white",attrs:{outlined:"",square:"",dense:!0,placeholder:"YYYY-MM-DD atau keterangan"},model:{value:a.form_edit.transfusi_kapan,callback:function(t){a.$set(a.form_edit,"transfusi_kapan",t)},expression:"form_edit.transfusi_kapan"}})],1),t("div",{staticClass:"col-12 col-md-6 q-mt-sm"},[t("span",{staticClass:"h_lable"},[a._v("Reaksi Transfusi")]),t("q-option-group",{attrs:{options:[{label:"Ya",value:"Ya"},{label:"Tidak",value:"Tidak"}],type:"radio",inline:""},model:{value:a.form_edit.reaksi_transfusi,callback:function(t){a.$set(a.form_edit,"reaksi_transfusi",t)},expression:"form_edit.reaksi_transfusi"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"Ya"===a.form_edit.reaksi_transfusi,expression:"form_edit.reaksi_transfusi === 'Ya'"}],staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Gejala")]),t("q-input",{staticClass:"bg-white",attrs:{outlined:"",square:"",dense:!0,placeholder:"Jelaskan gejala reaksi"},model:{value:a.form_edit.gejala_transfusi,callback:function(t){a.$set(a.form_edit,"gejala_transfusi",t)},expression:"form_edit.gejala_transfusi"}})],1),t("div",{staticClass:"col-12 col-md-6 q-mt-sm"},[t("span",{staticClass:"h_lable"},[a._v("Pernah diperiksa serologi (Coomb's test)?")]),t("q-option-group",{attrs:{options:[{label:"Ya",value:"Ya"},{label:"Tidak",value:"Tidak"}],type:"radio",inline:""},model:{value:a.form_edit.coomb_test,callback:function(t){a.$set(a.form_edit,"coomb_test",t)},expression:"form_edit.coomb_test"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"Ya"===a.form_edit.coomb_test,expression:"form_edit.coomb_test === 'Ya'"}],staticClass:"col-12 col-md-6"},[t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-12"},[t("span",{staticClass:"h_lable"},[a._v("Dimana (lab/rumah sakit)")]),t("q-input",{staticClass:"bg-white",attrs:{outlined:"",square:"",dense:!0},model:{value:a.form_edit.coomb_tempat,callback:function(t){a.$set(a.form_edit,"coomb_tempat",t)},expression:"form_edit.coomb_tempat"}})],1),t("div",{staticClass:"col-12 col-md-6 q-mt-sm"},[t("span",{staticClass:"h_lable"},[a._v("Kapan")]),t("q-input",{staticClass:"bg-white",attrs:{type:"date",outlined:"",square:"",dense:!0},model:{value:a.form_edit.coomb_kapan,callback:function(t){a.$set(a.form_edit,"coomb_kapan",t)},expression:"form_edit.coomb_kapan"}})],1),t("div",{staticClass:"col-12 col-md-6 q-mt-sm"},[t("span",{staticClass:"h_lable"},[a._v("Hasil")]),t("q-input",{staticClass:"bg-white",attrs:{outlined:"",square:"",dense:!0,placeholder:"Negatif / Positif / Lainnya"},model:{value:a.form_edit.coomb_hasil,callback:function(t){a.$set(a.form_edit,"coomb_hasil",t)},expression:"form_edit.coomb_hasil"}})],1)])])])],1),t("q-card-actions",{staticClass:"bg-grey-4 mdl-footer",attrs:{align:"right"}},[t("q-btn",{attrs:{loading:a.btn_edit,color:"primary",type:"submit",label:"Simpan Perubahan"}}),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Batal",color:"negative"},on:{click:function(t){a.mdl_edit=!1}}})],1)],1)],1)],1),t("q-dialog",{attrs:{persistent:""},model:{value:a.mdl_periksa,callback:function(t){a.mdl_periksa=t},expression:"mdl_periksa"}},[t("q-card",{staticClass:"mdl-md"},[t("q-card-section",{staticClass:"bg-orange text-white row items-center justify-between"},[t("div",{staticClass:"text-h6 h_modalhead"},[a._v("Pemeriksaan UPD — Tahap 1")]),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close",color:"white","aria-label":"Tutup"},on:{click:a.closePeriksa}},[t("q-tooltip",{attrs:{"content-class":"bg-red"}},[a._v("Tutup")])],1)],1),t("q-card-section",[a.periksa_target?t("div",[t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-6"},[t("div",{staticClass:"text-subtitle2"},[a._v("Nama Pasien*")]),t("div",{staticClass:"text-body1 text-bold text-grey"},[a._v(a._s(a.periksa_target.nama_pasien||"-")+" ")])]),t("div",{staticClass:"col-12 col-md-6"},[t("div",{staticClass:"text-subtitle2"},[a._v("Komponen*")]),t("div",{staticClass:"text-body1 text-bold text-grey"},[a._v(a._s(a.periksa_target.nama_komponen||"-")+" ")])])]),t("q-separator",{staticClass:"q-mt-md",attrs:{spaced:""}}),t("q-form",{ref:"formStage1",on:{submit:function(t){return t.preventDefault(),a.saveStage1.apply(null,arguments)}}},[t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Petugas Pemeriksa*")]),t("q-input",{staticClass:"bg-white",attrs:{outlined:"",square:"",dense:!0,required:"",rules:[a=>!!a||"Petugas harus diisi"]},model:{value:a.form1.petugas_pemeriksa,callback:function(t){a.$set(a.form1,"petugas_pemeriksa",t)},expression:"form1.petugas_pemeriksa"}})],1),t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Tanggal Pemeriksaan*")]),t("q-input",{staticClass:"bg-white",attrs:{outlined:"",square:"",dense:!0,readonly:"",value:a.form1.tanggal_pemeriksaan?a.formatDateFromTimestamp(a.form1.tanggal_pemeriksaan):""}})],1)]),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Kadar Hb (g/dL)")]),t("q-input",{staticClass:"bg-white",attrs:{type:"number",outlined:"",square:"",dense:!0,hint:"Opsional (diisi jika tersedia)"},model:{value:a.form1.kadar_hb,callback:function(t){a.$set(a.form1,"kadar_hb",a._n(t))},expression:"form1.kadar_hb"}})],1),t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Komponen Darah*")]),t("q-select",{staticClass:"bg-white",attrs:{options:a.list_komponen,"option-label":"nama_komponen","option-value":"id","emit-value":"","map-options":"",outlined:"",square:"",dense:!0,required:""},model:{value:a.form1.komponen_id,callback:function(t){a.$set(a.form1,"komponen_id",t)},expression:"form1.komponen_id"}})],1),t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Golongan Darah*")]),t("q-select",{staticClass:"bg-white",attrs:{options:["A","B","O","AB"],outlined:"",square:"",dense:"",required:""},model:{value:a.form1.golongan_darah,callback:function(t){a.$set(a.form1,"golongan_darah",t)},expression:"form1.golongan_darah"}})],1),t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Rhesus*")]),t("q-select",{staticClass:"bg-white",attrs:{options:["+","-"],outlined:"",square:"",dense:"",required:""},model:{value:a.form1.rhesus,callback:function(t){a.$set(a.form1,"rhesus",t)},expression:"form1.rhesus"}})],1)]),t("div",{staticClass:"row q-col-gutter-md q-mt-sm"},[t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Jumlah Diberikan (Kantong)*")]),t("q-input",{staticClass:"bg-white",attrs:{type:"number",outlined:"",square:"",dense:!0,required:""},model:{value:a.form1.jumlah_darah_diberikan,callback:function(t){a.$set(a.form1,"jumlah_darah_diberikan",a._n(t))},expression:"form1.jumlah_darah_diberikan"}})],1),t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Jumlah Diberikan (cc)*")]),t("q-input",{staticClass:"bg-white",attrs:{type:"number",outlined:"",square:"",dense:!0,required:""},model:{value:a.form1.jumlah_darah_diberikan_cc,callback:function(t){a.$set(a.form1,"jumlah_darah_diberikan_cc",a._n(t))},expression:"form1.jumlah_darah_diberikan_cc"}})],1),t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Nomor Kantong*")]),t("q-input",{staticClass:"bg-white",attrs:{outlined:"",square:"",dense:!0,required:""},model:{value:a.form1.nomor_kantong,callback:function(t){a.$set(a.form1,"nomor_kantong",a._n(t))},expression:"form1.nomor_kantong"}})],1),t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Expired (exp)*")]),t("q-input",{staticClass:"bg-white",attrs:{required:"",type:"date",outlined:"",square:"",dense:!0},model:{value:a.form1.exp,callback:function(t){a.$set(a.form1,"exp",t)},expression:"form1.exp"}})],1)]),t("div",{staticClass:"row q-col-gutter-md q-mt-sm"},[t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Crossmatch 1")]),t("q-select",{staticClass:"bg-white",attrs:{options:["Cocok","Tidak","Emergency"],outlined:"",square:"",dense:!0},model:{value:a.form1.crossmatch_1,callback:function(t){a.$set(a.form1,"crossmatch_1",t)},expression:"form1.crossmatch_1"}})],1),t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Crossmatch 2")]),t("q-select",{staticClass:"bg-white",attrs:{options:["Cocok","Tidak","Emergency"],outlined:"",square:"",dense:!0},model:{value:a.form1.crossmatch_2,callback:function(t){a.$set(a.form1,"crossmatch_2",t)},expression:"form1.crossmatch_2"}})],1),t("div",{staticClass:"col-12 col-md-4"},[t("span",{staticClass:"h_lable"},[a._v("Crossmatch 3")]),t("q-select",{staticClass:"bg-white",attrs:{options:["Cocok","Tidak","Emergency"],outlined:"",square:"",dense:!0},model:{value:a.form1.crossmatch_3,callback:function(t){a.$set(a.form1,"crossmatch_3",t)},expression:"form1.crossmatch_3"}})],1)]),t("div",{staticClass:"col-12 q-mt-sm"},[t("span",{staticClass:"h_lable"},[a._v("Catatan Tambahan Pemeriksa*")]),t("q-input",{staticClass:"bg-white",attrs:{outlined:"",dense:"",type:"textarea",autogrow:"",required:""},model:{value:a.form1.catatan_tambahan,callback:function(t){a.$set(a.form1,"catatan_tambahan",t)},expression:"form1.catatan_tambahan"}})],1),t("q-card-actions",{staticClass:"bg-grey-4 mdl-footer q-mt-md",attrs:{align:"right"}},[t("q-btn",{attrs:{label:"Batal",color:"negative"},on:{click:a.closePeriksa}}),t("q-btn",{attrs:{loading:a.loading1,color:"primary",label:"Simpan & Lanjut ke Tahap 2",type:"submit"}})],1)],1)],1):a._e()])],1)],1),t("q-dialog",{attrs:{persistent:""},model:{value:a.mdl_stage2,callback:function(t){a.mdl_stage2=t},expression:"mdl_stage2"}},[t("q-card",{staticClass:"mdl-md"},[t("q-card-section",{staticClass:"bg-teal text-white row items-center justify-between"},[t("div",{staticClass:"text-h6 h_modalhead"},[a._v("Pemeriksaan UPD — Tahap 2 (Pengambilan)")]),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close",color:"white","aria-label":"Tutup"},on:{click:a.closeStage2}},[t("q-tooltip",{attrs:{"content-class":"bg-red"}},[a._v("Tutup")])],1)],1),t("form",{on:{submit:function(t){return t.preventDefault(),a.saveStage2.apply(null,arguments)}}},[t("q-card-section",{staticClass:"q-pt-none"},[t("hr",{staticClass:"hrpagin2"}),a.stage2_target?t("div",[t("div",{staticClass:"text-subtitle2 q-mb-sm"},[a._v("Data Pengambilan (ID: "+a._s(a.stage2_target.id||"-")+") ")]),t("q-separator",{staticClass:"q-mt-sm",attrs:{spaced:""}}),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Petugas Pengeluar")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{outlined:"",square:"",dense:!0,rules:[a=>!!a||"Petugas pengeluar harus diisi"]},model:{value:a.form2.petugas_pengeluar,callback:function(t){a.$set(a.form2,"petugas_pengeluar",t)},expression:"form2.petugas_pengeluar"}})],1),t("div",{staticClass:"col-12 col-md-6"},[t("span",{staticClass:"h_lable"},[a._v("Penerima Darah")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{outlined:"",square:"",dense:!0,rules:[a=>!!a||"Penerima harus diisi"]},model:{value:a.form2.penerima_darah,callback:function(t){a.$set(a.form2,"penerima_darah",t)},expression:"form2.penerima_darah"}})],1)]),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12"},[t("span",{staticClass:"h_lable"},[a._v("Catatan Pengambilan (opsional)")]),t("q-input",{staticClass:"bg-white margin_btn",attrs:{outlined:"",square:"",dense:!0,type:"textarea",autogrow:""},model:{value:a.form2.catatan_pengambilan,callback:function(t){a.$set(a.form2,"catatan_pengambilan",t)},expression:"form2.catatan_pengambilan"}})],1)])],1):a._e()]),t("hr",{staticClass:"hrpagin2"}),t("q-card-actions",{staticClass:"bg-grey-4 mdl-footer",attrs:{align:"right"}},[t("q-btn",{attrs:{label:"Batal",color:"negative"},on:{click:a.closeStage2}}),t("q-btn",{attrs:{loading:a.loading2,color:"teal",label:"Simpan",type:"submit"}})],1)],1)],1)],1),t("q-dialog",{attrs:{persistent:""},model:{value:a.mdl_reject,callback:function(t){a.mdl_reject=t},expression:"mdl_reject"}},[t("q-card",{staticClass:"mdl-sm"},[t("q-card-section",{staticClass:"q-pt-none text-center orageGrad"},[t("form",{on:{submit:function(t){return t.preventDefault(),a.submitReject.apply(null,arguments)}}},[t("br"),t("div",{staticClass:"text-h6"},[a._v("Alasan Penolakan")]),t("q-input",{staticClass:"bg-white q-mt-md",attrs:{type:"textarea",outlined:"",square:"",dense:!0,autogrow:"",required:""},model:{value:a.reject_reason,callback:function(t){a.reject_reason=t},expression:"reject_reason"}}),t("q-card-actions",{staticClass:"q-mt-md",attrs:{align:"center"}},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Batal",size:"sm",color:"secondary"},on:{click:function(t){a.mdl_reject=!1}}}),a._v("   "),t("q-btn",{attrs:{loading:a.btn_reject,type:"submit",label:"Kirim Penolakan",size:"sm",color:"negative"}})],1)],1)])],1)],1),t("q-dialog",{attrs:{persistent:""},model:{value:a.mdl_keterangan,callback:function(t){a.mdl_keterangan=t},expression:"mdl_keterangan"}},[t("q-card",{staticClass:"mdl-md"},[t("q-card-section",{staticClass:"bg-orange"},[t("div",{staticClass:"text-h6 h_modalhead"},[a._v("KETERANGAN")])]),t("q-card-section",{staticClass:"q-pt-none"},[t("div",[t("div",{staticClass:"q-mb-sm"},[t("q-separator",{attrs:{spaced:""}}),t("span",{staticClass:"q-ml-sm"},[a._v("Keterangan : "+a._s(a.statusText(a.selectedItem.status,a.selectedItem.status_keterangan)))]),t("q-separator",{attrs:{spaced:""}})],1)])]),t("q-card-actions",{staticClass:"bg-grey-4 mdl-footer",attrs:{align:"right"}},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"negative"},on:{click:a.closeKeterangan}})],1)],1)],1),t("q-dialog",{attrs:{persistent:""},model:{value:a.mdl_delete,callback:function(t){a.mdl_delete=t},expression:"mdl_delete"}},[t("q-card",{staticClass:"mdl-sm"},[t("q-card-section",{staticClass:"q-pt-none text-center orageGrad"},[t("form",{on:{submit:function(t){return t.preventDefault(),a.removeData.apply(null,arguments)}}},[t("br"),t("img",{attrs:{src:"img/alert.png",alt:"",width:"75"}}),a._v(" "),t("br"),t("span",{staticClass:"h_notifikasi"},[a._v("APAKAH ANDA YAKIN INGIN MENGHAPUS DATA INI??")]),t("input",{staticStyle:{position:"absolute",left:"-9999px"},attrs:{type:"submit"}}),t("br"),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Batal",size:"sm",color:"negative"}}),a._v("   "),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{type:"submit",label:"Hapus",size:"sm",color:"primary"}})],1)])],1)],1),t("q-dialog",{attrs:{persistent:""},model:{value:a.mdl_taken,callback:function(t){a.mdl_taken=t},expression:"mdl_taken"}},[t("q-card",{staticClass:"mdl-sm"},[t("q-card-section",{staticClass:"q-pt-none text-center redGrad"},[t("div",[t("br"),t("img",{attrs:{src:"img/alert.png",alt:"",width:"75"}}),a._v(" "),t("br"),t("div",{staticClass:"q-mt-sm"},[t("span",{staticClass:"h_notifikasi"},[a._v("DETAIL PENGAMBILAN DARAH")])]),t("div",{staticClass:"q-mt-md text-white",staticStyle:{"text-align":"left",margin:"0 18px","margin-top":"18px"}},[t("div",{staticClass:"q-mb-sm"},[t("strong",[a._v("Petugas Pengeluar:")]),t("div",{staticClass:"q-ml-sm",staticStyle:{color:"#fff"}},[a._v(" "+a._s(a.taken_target&&a.taken_target.petugas_pengeluar?a.taken_target.petugas_pengeluar:"-")+" ")])]),t("div",{staticClass:"q-mb-sm"},[t("strong",[a._v("Penerima Darah:")]),t("div",{staticClass:"q-ml-sm",staticStyle:{color:"#fff"}},[a._v(" "+a._s(a.taken_target&&a.taken_target.penerima_darah?a.taken_target.penerima_darah:"-")+" ")])]),t("div",{staticClass:"q-mb-sm"},[t("strong",[a._v("Catatan Pengambilan:")]),t("div",{staticClass:"q-ml-sm",staticStyle:{color:"#fff","white-space":"pre-wrap"}},[a._v(" "+a._s(a.taken_target&&a.taken_target.catatan_pengambilan?a.taken_target.catatan_pengambilan:"-")+" ")])]),t("div",{staticClass:"q-mb-sm"},[t("strong",[a._v("Jumlah Kantong:")]),t("div",{staticClass:"q-ml-sm",staticStyle:{color:"#fff","white-space":"pre-wrap"}},[a._v(" "+a._s(a.taken_target&&a.taken_target.jumlah_darah_diberikan?a.taken_target.jumlah_darah_diberikan:"-")+" Kantong "+a._s(a.taken_target&&a.taken_target.jumlah_darah_diberikan_cc?a.taken_target.jumlah_darah_diberikan_cc:"-")+"cc ")])]),t("div",{staticClass:"q-mb-sm"},[t("strong",[a._v("Tanggal Expired:")]),t("div",{staticClass:"q-ml-sm",staticStyle:{color:"#fff"}},[a._v(" "+a._s(a.taken_target&&a.taken_target.exp?a.UMUM.tglConvert(a.taken_target.exp):"-")+" ")])]),t("div",{staticClass:"q-mb-sm"},[t("strong",[a._v("Tanggal & Jam Pengambilan:")]),t("div",{staticClass:"q-ml-sm",staticStyle:{color:"#fff"}},[a._v(" "+a._s(a.taken_target&&a.taken_target.tanggal_pengambilan?a.UMUM.tglConvertx(a.taken_target.tanggal_pengambilan,!0):"-")+" ")])])]),t("br")]),t("q-card-actions",{attrs:{align:"center"}},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Tutup",size:"sm",color:"negative"},on:{click:a.closeTaken}}),a._v("   "),3===a.tipe?t("q-btn",{attrs:{label:"Diterima",size:"sm",color:"primary",loading:a.loadingTaken},on:{click:a.confirmTaken}}):a._e()],1)],1)],1)],1),t("q-dialog",{attrs:{persistent:""},model:{value:a.mdl_taken_ruangan,callback:function(t){a.mdl_taken_ruangan=t},expression:"mdl_taken_ruangan"}},[t("q-card",{staticClass:"mdl-sm"},[t("q-card-section",{staticClass:"q-pt-none text-center hijauMudaGrad"},[t("div",[t("br"),t("img",{attrs:{src:"img/approve.png",alt:"",width:"75"}}),a._v(" "),t("br"),t("div",{staticClass:"q-mt-sm"},[t("span",{staticClass:"h_notifikasi"},[a._v("PERMINTAAN DARAH SELESAI")])]),t("div",{staticClass:"q-mt-md text-white",staticStyle:{"text-align":"left",margin:"0 18px","margin-top":"18px"}},[t("div",{staticClass:"q-mb-sm text-center"},[t("strong",[a._v("Tanggal & Jam Tiba diruangan:")]),t("div",{staticClass:"q-mt-sm",staticStyle:{color:"#fff"}},[a._v(" "+a._s(a.taken_target&&a.taken_target.updated_at?a.UMUM.tglConvertx(a.taken_target.updated_at,!0):"-")+" ")])])]),t("br")]),t("q-card-actions",{attrs:{align:"center"}},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Tutup",size:"sm",color:"negative"},on:{click:a.closeTaken}}),a._v("   "),3===a.tipe?t("q-btn",{attrs:{label:"Diterima",size:"sm",color:"primary",loading:a.loadingTaken},on:{click:a.confirmTaken}}):a._e()],1)],1)],1)],1),t("q-dialog",{attrs:{persistent:""},model:{value:a.mdl_revert,callback:function(t){a.mdl_revert=t},expression:"mdl_revert"}},[t("q-card",{staticClass:"mdl-sm"},[t("q-card-section",{staticClass:"q-pt-none text-center orageGrad"},[t("form",{on:{submit:function(t){return t.preventDefault(),a.confirmRevert.apply(null,arguments)}}},[t("br"),t("img",{attrs:{src:"img/alert.png",alt:"",width:"75"}}),a._v(" "),t("br"),t("span",{staticClass:"h_notifikasi"},[a._v("APAKAH ANDA YAKIN INGIN MENGEMBALIKAN PERMINTAAN INI KE STATUS DIPERIKSA (2)?")]),t("input",{staticStyle:{position:"absolute",left:"-9999px"},attrs:{type:"submit"}}),t("br"),t("br"),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Batal",size:"sm",color:"negative"},on:{click:function(t){a.revert_target=null}}}),a._v("   "),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{type:"submit",label:"Ya, Kembalikan",size:"sm",color:"primary"}})],1)])],1)],1)],1)},i=[function(){var a=this,t=a._self._c;return t("thead",{staticClass:"h_table_head main2x text-white"},[t("tr",[t("th",{staticClass:"text-center",attrs:{width:"5%"}},[a._v("No")]),t("th",{staticClass:"text-center",attrs:{width:"10%"}},[a._v("Status")]),t("th",{attrs:{width:"15%"}},[a._v("Nama Pasien")]),t("th",{attrs:{width:"15%"}},[a._v("Tgl Lahir")]),t("th",{attrs:{width:"5%"}},[a._v("Gol.Darah")]),t("th",{attrs:{width:"25%"}},[a._v("Komponen")]),t("th",{staticClass:"text-center",attrs:{width:"5%"}},[a._v("Jumlah Permintaan (Kantong)")]),t("th",{staticClass:"text-center",attrs:{width:"5%"}},[a._v("Jumlah diberikan (Kantong)")]),t("th",{staticClass:"text-center",attrs:{width:"15%"}},[a._v("Aksi")])])])}],l=s("7daa"),n=s.n(l),r={data(){return{UMUM:n.a,tipe:0,user:null,form:{rumah_sakit_id:1,ruangan_id:null,nama_dokter:"",tanggal_permintaan:"",tanggal_diperlukan:"",nama_pasien:"",nomor_rm:"",tanggal_lahir:"",alamat:"",nama_wali:"",jenis_kelamin:"",jumlah_kehamilan:null,pernah_abortus:"",pernah_hdn:"",transfusi_sebelumnya:"Tidak",transfusi_kapan:"",reaksi_transfusi:"Tidak",gejala_transfusi:"",coomb_test:"Tidak",coomb_tempat:"",coomb_kapan:"",coomb_hasil:"",golongan_darah:"",rhesus:"",komponen_id:null,jumlah_kantong:1,jumlah_cc:"",diagnosis_klinis:"",alasan_transfusi:"",kadar_hb:null,status:1,status_keterangan:"Menunggu Diperiksa oleh Admin UPD"},mdl_edit:!1,mdl_delete:!1,btn_edit:!1,form_edit:{id:null,rumah_sakit_id:1,ruangan_id:null,nama_dokter:"",tanggal_permintaan:"",tanggal_diperlukan:"",nama_pasien:"",nomor_rm:"",tanggal_lahir:"",alamat:"",nama_wali:"",jenis_kelamin:"",jumlah_kehamilan:null,pernah_abortus:"",pernah_hdn:"",golongan_darah:"",rhesus:"",komponen_id:null,jumlah_kantong:1,jumlah_cc:"",diagnosis_klinis:"",alasan_transfusi:"",kadar_hb:null,status:1,status_keterangan:"",transfusi_sebelumnya:"Tidak",transfusi_kapan:"",reaksi_transfusi:"Tidak",gejala_transfusi:"",coomb_test:"Tidak",coomb_tempat:"",coomb_kapan:"",coomb_hasil:""},periksa_target:null,form1:{id:null,petugas_pemeriksa:"",tanggal_pemeriksaan:null,komponen_id:null,golongan_darah:"",rhesus:"",exp:"",kadar_hb:null,catatan_tambahan:"",crossmatch_1:"",crossmatch_2:"",crossmatch_3:"",jumlah_darah_diberikan:null,jumlah_darah_diberikan_cc:null,nomor_kantong:""},loading1:!1,list_data:[],list_komponen:[],list_ruangan:[],mdl_keterangan:!1,selectedItem:{},page_first:1,page_last:0,page_limit:10,jml_data:0,total_data:0,cari_value:"",mdl_add:!1,btn_add:!1,mdl_lihat:!1,lihat_target:null,filter:{komponen_id:"",golongan_darah:"",status:""},statusOptions:[{label:"Semua",value:null},{label:"Diajukan",value:1},{label:"Diperiksa",value:2},{label:"Siap Diambil",value:3},{label:"Selesai",value:4},{label:"Ditolak",value:5},{label:"Telah Diambil",value:6}],mdl_periksa:!1,mdl_reject:!1,btn_periksa:!1,btn_reject:!1,reject_reason:"",mdl_stage2:!1,stage2_target:null,form2:{petugas_pengeluar:"",penerima_darah:"",catatan_pengambilan:""},loading2:!1,mdl_taken:!1,mdl_taken_ruangan:!1,taken_target:null,loadingTaken:!1,mdl_revert:!1,revert_target:null,loadingRevert:!1}},methods:{bukaPdf(){var a,t;null!==(a=this.lihat_target)&&void 0!==a&&a.id&&null!==(t=this.lihat_target)&&void 0!==t&&t.pdf_key?window.open(`https://server-pindara.bludrs-konut.id/api/v1/permintaan_darah/pdf/${this.lihat_target.id}?key=${this.lihat_target.pdf_key}`,"_blank"):this.$q.notify({type:"negative",message:"PDF belum tersedia"})},openRevertModal(a){this.revert_target=a,this.mdl_revert=!0},async confirmRevert(){if(!this.revert_target||!this.revert_target.id)return this.$q.notify({type:"negative",message:"Data tidak valid"}),this.mdl_revert=!1,void(this.revert_target=null);const a=this.revert_target,t={id:a.id,previous_status:a.status,status:2,status_keterangan:"Dikembalikan ke Diperiksa oleh Admin UPD"};try{this.loadingRevert=!0;const s=await this.updateStatusRequest(t);s&&s.success?(this.$q.notify({type:"positive",message:s.message||"Berhasil mengembalikan ke Diperiksa"}),a.status=2,this.lihat_target&&this.lihat_target.id===a.id&&(this.lihat_target.status=2,this.lihat_target.status_keterangan=t.status_keterangan),this.mdl_revert=!1,this.revert_target=null,await this.openPeriksaFor(a)):(this.$q.notify({type:"negative",message:(null===s||void 0===s?void 0:s.message)||"Gagal mengubah status"}),this.mdl_revert=!1,this.revert_target=null)}catch(s){console.error("confirmRevert error",s),this.$q.notify({type:"negative",message:"Terjadi kesalahan saat mengubah status"}),this.mdl_revert=!1,this.revert_target=null}finally{this.loadingRevert=!1}},async handleRevertToPeriksa(a){if(!a||!a.id)return void this.$q.notify({type:"negative",message:"Data tidak valid"});const t=await this.$q.dialog({title:"Konfirmasi",message:"Kembalikan permintaan ini ke status Diperiksa (2) dan buka form Pemeriksaan UPD?",cancel:!0,persistent:!0}).onOk(()=>!0).onCancel(()=>!1).onDismiss(()=>!1);if(!t)return;const s={id:a.id,previous_status:a.status,status:2,status_keterangan:"Dikembalikan ke Diperiksa oleh Admin UPD"};try{this.$q.loading.show();const t=await this.updateStatusRequest(s);t&&t.success?(this.$q.notify({type:"positive",message:t.message||"Berhasil mengembalikan ke Diperiksa"}),a.status=2,this.lihat_target&&this.lihat_target.id===a.id&&(this.lihat_target.status=2,this.lihat_target.status_keterangan=s.status_keterangan),await this.openPeriksaFor(a)):this.$q.notify({type:"negative",message:(null===t||void 0===t?void 0:t.message)||"Gagal mengubah status"})}catch(e){console.error("handleRevertToPeriksa error",e),this.$q.notify({type:"negative",message:"Terjadi kesalahan saat mengubah status"})}finally{this.$q.loading.hide()}},statusColor(a){const t=Number(a);return 1===t?"orange":2===t?"info":3===t?"secondary":4===t?"positive":5===t?"negative":6===t?"accent":"grey"},getView(){const a={page:this.page_first,limit:this.page_limit,cari_value:this.cari_value||"",komponen_id:this.filter.komponen_id||"",golongan_darah:this.filter.golongan_darah||""};null!==this.filter.status&&""!==this.filter.status&&(a.status=this.filter.status);const t=new URLSearchParams(a).toString(),s=this.$store.state.url.PERMINTAAN||(this.$store.state.url.BASE||"")+"permintaan_darah/";fetch(s+"view?"+t,{method:"GET",headers:{"content-type":"application/json",authorization:"kikensbatara "+localStorage.token}}).then(a=>a.json()).then(a=>{a.success?(this.list_data=a.data||[],this.total_data=a.total_data||0,this.page_last=a.total_pages||1,this.jml_data=this.list_data.length,this.page_first>this.page_last&&(this.page_first=this.page_last||1)):this.$q.notify({type:"negative",message:a.message||"Gagal memuat data permintaan darah"})}).catch(a=>{console.error("Error fetching permintaan:",a),this.$q.notify({type:"negative",message:"Terjadi kesalahan saat memuat data permintaan darah"})})},getKomponen(){const a=this.$store.state.url.KOMPONEN||(this.$store.state.url.BASE||"")+"komponen_darah/";fetch(a+"view",{method:"POST",headers:{"content-type":"application/json",authorization:"kikensbatara "+localStorage.token},body:JSON.stringify({})}).then(a=>a.json()).then(a=>{this.list_komponen=a.data||[]}).catch(a=>console.error("Error getKomponen:",a))},addData(){if(this.btn_add=!0,"P"===this.form.jenis_kelamin&&(null===this.form.jumlah_kehamilan||""===this.form.jumlah_kehamilan))return void this.$q.notify({type:"negative",message:"Jumlah kehamilan harus diisi untuk pasien wanita"});if("Ya"===this.form.transfusi_sebelumnya&&(!this.form.transfusi_kapan||""===this.form.transfusi_kapan.trim()))return this.$q.notify({type:"negative",message:"Mohon isi tanggal/keterangan transfusi sebelumnya."}),void(this.btn_add=!1);if("Ya"===this.form.reaksi_transfusi&&(!this.form.gejala_transfusi||""===this.form.gejala_transfusi.trim()))return this.$q.notify({type:"negative",message:"Mohon jelaskan gejala reaksi transfusi."}),void(this.btn_add=!1);if("Ya"===this.form.coomb_test&&(!this.form.coomb_tempat||""===this.form.coomb_tempat.trim()||!this.form.coomb_kapan||""===this.form.coomb_kapan.trim()||!this.form.coomb_hasil||""===this.form.coomb_hasil.trim()))return this.$q.notify({type:"negative",message:"Mohon lengkapi data pemeriksaan serologi (Coomb's test): tempat, kapan, dan hasil."}),void(this.btn_add=!1);const a=this.$store.state.url.PERMINTAAN||(this.$store.state.url.BASE||"")+"permintaan_darah/";fetch(a+"addData",{method:"POST",headers:{"content-type":"application/json",authorization:"kikensbatara "+localStorage.token},body:JSON.stringify(this.form)}).then(a=>a.json()).then(a=>{a.success?(this.$q.notify({type:"positive",message:a.message||"Permintaan berhasil ditambahkan"}),this.mdl_add=!1,this.resetForm(),this.getView()):this.$q.notify({type:"negative",message:a.message||"Gagal menambah permintaan"})}).catch(a=>{console.error("Error addData:",a),this.$q.notify({type:"negative",message:"Gagal menambah permintaan darah"})}).finally(()=>{this.btn_add=!1})},resetForm(){let a=null,t=1;try{var s,e;const i=JSON.parse(localStorage.profile||"{}");null!==i&&void 0!==i&&null!==(s=i.profile)&&void 0!==s&&s.ruangan_id&&(a=Number(i.profile.ruangan_id)),null!==i&&void 0!==i&&null!==(e=i.profile)&&void 0!==e&&e.rumah_sakit_id&&(t=Number(i.profile.rumah_sakit_id))}catch(i){}this.form={rumah_sakit_id:1,ruangan_id:a,nama_dokter:"",tanggal_permintaan:"",tanggal_diperlukan:"",nama_pasien:"",nomor_rm:"",tanggal_lahir:"",alamat:"",nama_wali:"",jenis_kelamin:"",jumlah_kehamilan:null,pernah_abortus:"",pernah_hdn:"",golongan_darah:"",rhesus:"",komponen_id:null,jumlah_kantong:1,jumlah_cc:"",diagnosis_klinis:"",alasan_transfusi:"",kadar_hb:null,status:1,status_keterangan:"Menunggu Diperiksa oleh Admin UPD",transfusi_sebelumnya:"Tidak",transfusi_kapan:"",reaksi_transfusi:"Tidak",gejala_transfusi:"",coomb_test:"Tidak",coomb_tempat:"",coomb_kapan:"",coomb_hasil:""}},openEdit(a){a&&a.id?3!==Number(a.status)?(this.form_edit=Object.assign({},{id:a.id,rumah_sakit_id:a.rumah_sakit_id||1,ruangan_id:a.ruangan_id||null,nama_dokter:a.nama_dokter||"",tanggal_permintaan:a.tanggal_permintaan||"",tanggal_diperlukan:a.tanggal_diperlukan||"",nama_pasien:a.nama_pasien||"",nomor_rm:a.nomor_rm||"",tanggal_lahir:a.tanggal_lahir||"",alamat:a.alamat||"",nama_wali:a.nama_wali||"",jenis_kelamin:a.jenis_kelamin||"",jumlah_kehamilan:a.jumlah_kehamilan||null,pernah_abortus:a.pernah_abortus||"",pernah_hdn:a.pernah_hdn||"",golongan_darah:a.golongan_darah||"",rhesus:a.rhesus||"",komponen_id:a.komponen_id||null,jumlah_kantong:a.jumlah_kantong||1,jumlah_cc:a.jumlah_cc||1,diagnosis_klinis:a.diagnosis_klinis||"",alasan_transfusi:a.alasan_transfusi||"",kadar_hb:a.kadar_hb||null,status:a.status||1,status_keterangan:a.status_keterangan||"",transfusi_sebelumnya:a.transfusi_sebelumnya||"Tidak",transfusi_kapan:a.transfusi_kapan||"",reaksi_transfusi:a.reaksi_transfusi||"Tidak",gejala_transfusi:a.gejala_transfusi||"",coomb_test:a.coomb_test||"Tidak",coomb_tempat:a.coomb_tempat||"",coomb_kapan:a.coomb_kapan||"",coomb_hasil:a.coomb_hasil||""}),this.mdl_edit=!0):this.$q.notify({type:"warning",message:"Tidak dapat mengedit: permintaan sudah Disetujui"}):this.$q.notify({type:"negative",message:"Data tidak valid untuk edit"})},async submitEdit(){if(this.form_edit&&this.form_edit.id)if(3!==Number(this.form_edit.status))if("P"!==this.form_edit.jenis_kelamin||null!==this.form_edit.jumlah_kehamilan&&""!==this.form_edit.jumlah_kehamilan)if("Ya"!==this.form_edit.transfusi_sebelumnya||this.form_edit.transfusi_kapan&&""!==this.form_edit.transfusi_kapan.trim())if("Ya"!==this.form_edit.reaksi_transfusi||this.form_edit.gejala_transfusi&&""!==this.form_edit.gejala_transfusi.trim())if("Ya"!==this.form_edit.coomb_test||this.form_edit.coomb_tempat&&""!==this.form_edit.coomb_tempat.trim()&&this.form_edit.coomb_kapan&&""!==this.form_edit.coomb_kapan.trim()&&this.form_edit.coomb_hasil&&""!==this.form_edit.coomb_hasil.trim()){this.btn_edit=!0;try{const a=this.$store.state.url.PERMINTAAN||(this.$store.state.url.BASE||"")+"permintaan_darah/",t=await fetch(a+"edit",{method:"POST",headers:{"content-type":"application/json",authorization:"kikensbatara "+localStorage.token},body:JSON.stringify(this.form_edit)}),s=await t.json();s&&s.success?(this.$q.notify({type:"positive",message:s.message||"Perubahan tersimpan"}),this.mdl_edit=!1,this.getView()):this.$q.notify({type:"negative",message:s.message||"Gagal menyimpan perubahan"})}catch(a){console.error("Error submitEdit:",a),this.$q.notify({type:"negative",message:"Terjadi kesalahan saat menyimpan perubahan"})}finally{this.btn_edit=!1}}else this.$q.notify({type:"negative",message:"Mohon lengkapi data pemeriksaan serologi (Coomb's test): tempat, kapan, dan hasil."});else this.$q.notify({type:"negative",message:"Mohon jelaskan gejala reaksi transfusi."});else this.$q.notify({type:"negative",message:"Mohon isi tanggal/keterangan transfusi sebelumnya."});else this.$q.notify({type:"negative",message:"Jumlah kehamilan harus diisi untuk pasien wanita"});else this.$q.notify({type:"warning",message:"Tidak dapat menyimpan: status sudah Disetujui"});else this.$q.notify({type:"negative",message:"Data edit tidak lengkap"})},async openLihat(a){this.mdl_lihat=!0,this.lihat_target=null;const t=(this.$store.state.url.PERMINTAAN||this.$store.state.url.BASE+"permintaan_darah/")+"detail/"+a.id;try{const a=await fetch(t,{headers:{authorization:"kikensbatara "+localStorage.token}}),s=await a.json();s.success?this.lihat_target=s.data:(this.$q.notify({type:"negative",message:"Gagal memuat detail permintaan"}),this.mdl_lihat=!1)}catch(s){console.error(s),this.$q.notify({type:"negative",message:"Error ambil detail permintaan"}),this.mdl_lihat=!1}},updateStatusRequest(a){const t=this.$store.state.url.PERMINTAAN||(this.$store.state.url.BASE||"")+"permintaan_darah/";return fetch(t+"updateStatus",{method:"POST",headers:{"content-type":"application/json",authorization:"kikensbatara "+localStorage.token},body:JSON.stringify(a)}).then(a=>a.json())},async openPeriksaFor(a){this.btn_periksa=!0;try{const t={id:a.id,status:2};await this.updateStatusRequest(t);a.status=2,this.lihat_target&&this.lihat_target.id===a.id&&(this.lihat_target.status=2,this.lihat_target.status_keterangan="Permintaan Sedang diperiksa"),this.periksa_target=a,this.form1={id:a.id,petugas_pemeriksa:a.petugas_pemeriksa||"",komponen_id:a.komponen_id||null,tanggal_pemeriksaan:Date.now(),exp:a.exp||(new Date).toISOString().slice(0,10),golongan_darah:a.golongan_darah||"",rhesus:a.rhesus||"",kadar_hb:a.kadar_hb||null,catatan_tambahan:a.catatan_tambahan||"",crossmatch_1:a.crossmatch_1||"",crossmatch_2:a.crossmatch_2||"",crossmatch_3:a.crossmatch_3||"",jumlah_darah_diberikan:a.jumlah_darah_diberikan||null,jumlah_darah_diberikan_cc:a.jumlah_darah_diberikan_cc||null,nomor_kantong:a.nomor_kantong||""},this.mdl_periksa=!0,this.getView()}catch(t){console.error("Error openPeriksaFor:",t),this.$q.notify({type:"negative",message:"Terjadi kesalahan saat memulai pemeriksaan"})}finally{this.btn_periksa=!1}},async saveStage1(){if(this.form1.komponen_id)if(this.form1&&this.form1.id)if(this.form1.petugas_pemeriksa){this.loading1=!0;try{const a={id:this.form1.id,status:3,status_keterangan:"Siap diambil - Menunggu pengambilan oleh keluarga/ruangan",komponen_id:this.form1.komponen_id,petugas_pemeriksa:this.form1.petugas_pemeriksa,golongan_darah:this.form1.golongan_darah,rhesus:this.form1.rhesus,rhesus:this.form1.rhesus||null,exp:this.form1.exp||null,catatan_tambahan:this.form1.catatan_tambahan||null,crossmatch_1:this.form1.crossmatch_1||null,crossmatch_2:this.form1.crossmatch_2||null,crossmatch_3:this.form1.crossmatch_3||null,jumlah_darah_diberikan:this.form1.jumlah_darah_diberikan||null,jumlah_darah_diberikan_cc:this.form1.jumlah_darah_diberikan_cc||null,nomor_kantong:this.form1.nomor_kantong||null},t=await this.updateStatusRequest(a);if(!t||!t.success)return void this.$q.notify({type:"negative",message:t&&t.message?t.message:"Gagal menyimpan hasil pemeriksaan"});this.$q.notify({type:"positive",message:t.message||"Simpan tahap 1 berhasil. Lanjut ke Tahap 2."}),this.lihat_target&&this.lihat_target.id===this.form1.id&&(this.lihat_target.status=3,this.lihat_target.status_keterangan=a.status_keterangan,Object.assign(this.lihat_target,{petugas_pemeriksa:a.petugas_pemeriksa,tanggal_pemeriksaan:a.tanggal_pemeriksaan,golongan_darah:a.golongan_darah,rhesus:a.rhesus,catatan_tambahan:a.catatan_tambahan,crossmatch_1:a.crossmatch_1,crossmatch_2:a.crossmatch_2,crossmatch_3:a.crossmatch_3,jumlah_darah_diberikan:a.jumlah_darah_diberikan,jumlah_darah_diberikan_cc:a.jumlah_darah_diberikan_cc,nomor_kantong:a.nomor_kantong})),this.$q.notify({type:"positive",message:"Darah Siap diambil."}),this.mdl_periksa=!1,this.getView()}catch(a){console.error("saveStage1 error",a),this.$q.notify({type:"negative",message:"Terjadi kesalahan saat menyimpan tahap 1"})}finally{this.loading1=!1}}else this.$q.notify({type:"negative",message:"Petugas pemeriksa harus diisi"});else this.$q.notify({type:"negative",message:"Form pemeriksaan belum terisi dengan benar"});else this.$q.notify({type:"negative",message:"Komponen darah wajib diisi pada tahap pemeriksaan"})},async saveStage2(){if(this.stage2_target&&this.stage2_target.id)if(this.form2.petugas_pengeluar&&this.form2.penerima_darah){this.loading2=!0;try{const a={id:this.stage2_target.id,status:6,status_keterangan:"Sudah diambil",petugas_pengeluar:this.form2.petugas_pengeluar,penerima_darah:this.form2.penerima_darah,catatan_pengambilan:this.form2.catatan_pengambilan||null},t=await this.updateStatusRequest(a);if(!t||!t.success)return void this.$q.notify({type:"negative",message:t&&t.message?t.message:"Gagal menyimpan pengambilan"});this.$q.notify({type:"positive",message:t.message||"Pengambilan berhasil disimpan. Permintaan selesai."}),this.lihat_target&&this.lihat_target.id===this.stage2_target.id&&(this.lihat_target.status=4,this.lihat_target.status_keterangan=a.status_keterangan,Object.assign(this.lihat_target,{petugas_pengeluar:a.petugas_pengeluar,penerima_darah:a.penerima_darah,catatan_pengambilan:a.catatan_pengambilan})),this.mdl_stage2=!1,this.stage2_target=null,this.getView()}catch(a){console.error("Error saveStage2:",a),this.$q.notify({type:"negative",message:"Terjadi kesalahan saat menyimpan pengambilan"})}finally{this.loading2=!1}}else this.$q.notify({type:"negative",message:"Isi semua field wajib pengambilan"});else this.$q.notify({type:"negative",message:"Tidak ada permintaan yang dipilih untuk pengambilan"})},openReject(a){this.reject_reason="",this.lihat_target=a,this.mdl_reject=!0},lihatKeterangan(a){this.selectedItem=Object.assign({},a||{}),this.mdl_keterangan=!0},closeKeterangan(){this.mdl_keterangan=!1,setTimeout(()=>{this.selectedItem={}},200)},submitReject(){if(!this.lihat_target||!this.lihat_target.id)return void this.$q.notify({type:"negative",message:"Tidak ada permintaan yang dipilih"});if(!this.reject_reason||!String(this.reject_reason).trim())return void this.$q.notify({type:"negative",message:"Alasan penolakan wajib diisi"});this.btn_reject=!0;const a={id:this.lihat_target.id,status:5,status_keterangan:this.reject_reason};this.updateStatusRequest(a).then(a=>{a&&a.success?(this.$q.notify({type:"positive",message:a.message||"Permintaan berhasil ditolak"}),this.mdl_reject=!1,this.lihat_target=null,this.getView()):this.$q.notify({type:"negative",message:a.message||"Gagal menolak permintaan"})}).catch(a=>{console.error("Error submitReject:",a),this.$q.notify({type:"negative",message:"Terjadi kesalahan saat mengirim penolakan"})}).finally(()=>this.btn_reject=!1)},openDelete(a){a&&a.id?(this.form={id:a.id},this.mdl_delete=!0):console.warn("⚠️ Tidak ada data yang dipilih untuk dihapus:",a)},removeData(){this.$store.commit("shoWLoading"),fetch(this.$store.state.url.PERMINTAAN+"delete",{method:"POST",headers:{"content-type":"application/json",authorization:"kikensbatara "+localStorage.token},body:JSON.stringify({id:this.form.id})}).then(a=>a.json()).then(a=>{this.$store.commit("hideLoading"),a.success?(this.Notify(a.message||"✅ Sukses Menghapus Data","negative","check_circle_outline"),this.getView()):this.Notify(a.message||"⚠️ Gagal menghapus data","warning","error_outline")}).catch(a=>{this.$store.commit("hideLoading"),this.Notify("❌ Terjadi kesalahan: "+a.message,"warning","error_outline")})},closePeriksa(){this.mdl_periksa=!1,this.periksa_target=null,this.form1={id:null,petugas_pemeriksa:"",tanggal_pemeriksaan:"",golongan_darah:"",rhesus:"",kadar_hb:null,catatan_tambahan:"",crossmatch_1:"",crossmatch_2:"",crossmatch_3:"",jumlah_darah_diberikan:null,jumlah_darah_diberikan_cc:null,nomor_kantong:""},this.loading1=!1},openStage2(a){if(!a||!a.id)return void this.$q.notify({type:"negative",message:"Data permintaan tidak valid"});const t=Number(a.status);return 3===t?(this.stage2_target={id:a.id},this.form2={petugas_pengeluar:a.petugas_pengeluar||"",penerima_darah:a.penerima_darah||"",tanggal_pengambilan:a.tanggal_pengambilan||null,jam_pengambilan:a.jam_pengambilan||null,catatan_pengambilan:a.catatan_pengambilan||""},void(this.mdl_stage2=!0)):6===t?(this.taken_target=Object.assign({},a),void(this.mdl_taken=!0)):4===t?(this.taken_target=Object.assign({},a),void(this.mdl_taken_ruangan=!0)):void this.lihatKeterangan(a)},closeTaken(){this.mdl_taken=!1,this.mdl_taken_ruangan=!1,this.taken_target=null},closeStage2(){this.mdl_stage2=!1,this.stage2_target=null,this.form2={petugas_pengeluar:"",penerima_darah:"",catatan_pengambilan:""},this.loading2=!1},async confirmTaken(){if(this.taken_target&&this.taken_target.id){this.loadingTaken=!0;try{const a={id:this.taken_target.id,status:4,status_keterangan:"Darah telah diterima"},t=await this.updateStatusRequest(a);if(!t||!t.success)return void this.$q.notify({type:"negative",message:(null===t||void 0===t?void 0:t.message)||"Gagal mengubah status"});this.$q.notify({type:"positive",message:"Status berhasil diubah menjadi Diterima"}),this.mdl_taken=!1,this.taken_target=null,this.getView()}catch(a){console.error("Error confirmTaken:",a),this.$q.notify({type:"negative",message:"Terjadi kesalahan saat mengubah status"})}finally{this.loadingTaken=!1}}else this.$q.notify({type:"negative",message:"Data tidak valid"})},Notify(a,t,s){this.$q.notify({message:a,color:t,icon:s,position:"top",timeout:1e3})},indexing(a){return(this.page_first-1)*this.page_limit+a},cari_data(){this.page_first=1,this.getView()},applyFilter(){this.page_first=1,this.getView()},statusText(a,t){const s=Number(a);return 1===s?"Menunggu Diperiksa oleh Admin UPD":2===s?"Permintaan Sedang diperiksa":3===s?"Siap Diambil (Menunggu Pengambilan)":4===s?"Permintaan Darah sudah Berhasil":6===s?"Darah Telah di Ambil Petugas Ruangan/Keluarga Pasien":5===s?t||"Ditolak":"-"},formatDateFromTimestamp(a){if(!a)return"";const t="number"===typeof a?new Date(a):new Date(Number(a)),s=a=>String(a).padStart(2,"0");return`${t.getFullYear()}-${s(t.getMonth()+1)}-${s(t.getDate())}`}},watch:{"form.jenis_kelamin"(a){"P"!==a&&(this.form.jumlah_kehamilan=null,this.form.pernah_abortus="",this.form.pernah_hdn="")}},mounted(){try{const a=JSON.parse(localStorage.profile||"{}");a&&a.profile&&(this.tipe=Number(a.profile.stokdarah_konut),this.user=a,a.profile.ruangan_id&&(this.form.ruangan_id=Number(a.profile.ruangan_id)),a.profile.rumah_sakit_id&&(this.form.rumah_sakit_id=Number(a.profile.rumah_sakit_id)))}catch(a){console.warn("Gagal parse localStorage.profile",a)}this.getKomponen(),this.getView(),this.form.rumah_sakit_id=1}},o=r,c=(s("889d"),s("2877")),d=s("fe09"),m=Object(c["a"])(o,e,i,!1,null,"e5acda4c",null);t["default"]=m.exports;m.options.components=Object.assign(Object.create(m.options.components||null),m.options.components||{},{QCard:d["h"],QCardSection:d["j"],QInput:d["w"],QBtn:d["f"],QTooltip:d["O"],QSelect:d["H"],QBadge:d["c"],QPagination:d["G"],QDialog:d["l"],QOptionGroup:d["D"],QCardActions:d["i"],QSeparator:d["I"],QList:d["B"],QItem:d["x"],QItemSection:d["z"],QItemLabel:d["y"],QChip:d["k"],QSpace:d["J"],QForm:d["s"]}),m.options.directives=Object.assign(Object.create(m.options.directives||null),m.options.directives||{},{ClosePopup:d["a"]})}}]);
//# sourceMappingURL=chunk-6e5a474c.a5ef0ce6.js.map